var Recaius=function(e){function t(n){if(r[n])return r[n].exports;var s=r[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=r(1);e.exports={urlJoin:function(e,t){return e.replace(/\/{1,}$/,"")+"/"+t.replace(/^\/{1,}/,"")},getRecaiusUrl:function(t,r,n){return e.exports.urlJoin(t,n)+"/"+r},clone:function(t){if(null===t||"object"!==(void 0===t?"undefined":n(t))||"isActiveClone"in t)return t;if(t instanceof Date)var r=new t.constructor;else var r=t.constructor();for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t.isActiveClone=null,r[s]=e.exports.clone(t[s]),delete t.isActiveClone);return r},throwError:function(e){throw e},typedArrayView:function(e,t,r){return void 0===r?new e.constructor(e.buffer,e.BYTES_PER_ELEMENT*t):new e.constructor(e.buffer,e.BYTES_PER_ELEMENT*t,r)},copyItemIfPresent:function(e,t,r){return!!e.hasOwnProperty(r)&&(t[r]=e[r],!0)},waitFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=setInterval(function(){e()&&clearInterval(r)},t)},sleep:function(e){return new Promise(function(t,r){setTimeout(function(){return t()},e)})},withTimeout:function(e,t){return Promise.race([e,new Promise(function(e,r){return setTimeout(function(){return r(new s.TimeoutError(t))},t)})])},downloadBuffer:function(e){var t=this.encodeWAV(e),r=new Blob([t],{type:"audio/wav"});forceDownload(r,"out.wav")},forceDownload:function(e,t){var r=(window.URL||window.webkitURL).createObjectURL(e),n=window.document.createElement("a");n.href=r,n.download=t||"output.wav";var s=document.createEvent("Event");s.initEvent("click",!0,!0),n.dispatchEvent(s)},floatTo16BitPCM:function(e,t,r){for(var n=0;n<r.length;n++,t+=2){var s=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,s<0?32768*s:32767*s,!0)}},writeString:function(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))},encodeWav:function(e){var t=new ArrayBuffer(44+2*e.length),r=new DataView(t);return this.writeString(r,0,"RIFF"),r.setUint32(4,36+2*e.length,!0),this.writeString(r,8,"WAVE"),this.writeString(r,12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,1,!0),r.setUint32(24,16e3,!0),r.setUint32(28,32e3,!0),r.setUint16(32,2,!0),r.setUint16(34,16,!0),this.writeString(r,36,"data"),r.setUint32(40,2*e.length,!0),this.floatTo16BitPCM(r,44,e),r},parseWav:function(t){var r=void 0;if(r=t instanceof ArrayBuffer?new DataView(t):new DataView(t.buffer),1179011410!=r.getUint32(0,!0))throw TypeError("Not a wave format");if(1163280727!=r.getUint32(8,!0))throw TypeError("Not a wave format");if(544501094!=r.getUint32(12,!0))throw TypeError("Not a wave format");var n=r.getUint32(16,!0),s=r.getUint16(22,!0),o=r.getUint32(24,!0),i=(r.getUint32(28,!0),r.getUint16(32,!0),r.getUint16(34,!0)),a=16+n+8,u={channelNum:s,sampleRate:o};return u.data=new Int16Array(r.buffer,a),16==i?(u.type="linear",2==s&&(u.data=e.exports.convertStereoToMonoral(u.data))):u.type,u},convertStereoToMonoral:function(e){for(var t=new Int16Array(e.length/2),r=0;r<e.length;r+=2)t[r]=e[r]+e[r+1]/2;return t}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(e){function t(){n(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Need login"));return e.message="Need login",e.name="NeedLoginError",e}return o(t,e),t}(Error),a=function(e){function t(e){n(this,t);var r="Require argument: "+e,o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return o.message=r,o.name="RequireArgumentError",o}return o(t,e),t}(Error),u=function(e){function t(){n(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ASR not started"));return e.message="ASR not started",e.name="NotStartedError",e}return o(t,e),t}(Error),h=function(e){function t(){n(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Timeout"));return e.message="Timeout",e.name="TimeoutError",e}return o(t,e),t}(Error);e.exports={NeedLoginError:i,RequireArgumentError:a,NotStartedError:u,TimeoutError:h}},function(e,t,r){function n(e,t,r,n){var o={method:t,headers:{}};if(n.hasOwnProperty("headers")&&(o.headers=n.headers),n.hasOwnProperty("json"))o.body=JSON.stringify(n.json),o.headers["Content-type"]="application/json; charset=utf-8";else if(n.hasOwnProperty("body"))o.body=n.body;else if(n.hasOwnProperty("formData")){var i=new FormData;Object.keys(n.formData).forEach(function(e){n.formData[e]instanceof Uint8Array?i.append(e,new Blob([n.formData[e]])):i.append(e,n.formData[e])}),o.body=i}else if(n.hasOwnProperty("qs")){var a=new URL(a);Object.keys(n.qs).forEach(function(e){return a.searchParams.append(e,n.qs[e])})}return n.hasOwnProperty("timeout")?s.withTimeout(fetch(e,o),n.timeout):fetch(e,o).then(function(e){return e.ok?Promise.resolve().then(function(){return r?e.arrayBuffer():e.text().then(function(e){try{return JSON.parse(e)}catch(t){return e}})}).then(function(t){return{status:e.status,data:t}}):e.text().then(function(t){return Promise.reject({status:e.status,data:t})})})}var s=r(0),o=void 0;try{r(!function(){var e=new Error('Cannot find module "request"');throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}e.exports={requestJson:function(t,r,n){return e.exports.request(t,r,!1,n).then(function(e){return e.data})},requestRaw:function(t,r,n){return e.exports.request(t,r,!0,n).then(function(e){return e.data})},request:function(e,t,r,s){return void 0===o?n(e,t,r,s):new Promise(function(n,i){var a={url:e,method:t};Object.keys(s).forEach(function(e){return a[e]=s[e]}),r&&(a.encoding=null),o(a,function(e,t,s){e&&i(e);var o={status:t.statusCode};if(o.status>=400){try{o.detail=JSON.parse(s)}catch(e){o.detail=s}i(o)}if(r)o.data=s;else if(s.length>0)try{o.data=JSON.parse(s)}catch(e){if(0!=t.headers["content-type"].indexOf("text"))throw e;o.data=s}else o.data=null;n(o)})})}}},function(e,t,r){e.exports=r(4)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(5),i=r(6),a=r(7),u=r(8),h=r(9),c=r(10),l=r(0),f=r(1),p={url:"https://api.recaius.jp/",version:"v2",proxy:void 0,auth:{},asr:{},tts:{},mt:{},iip:{}},d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this._config=this.readConfig(t,r),this.auth=new o(this._config),this.tts=new a(this._config,this.auth),this.mt=new u(this._config,this.auth),this.asr=new i(this._config,this.auth),this.iip=new h(this._config,this.auth),this.getMic=c.getMic,this.exceptions=f}return s(e,[{key:"readConfig",value:function(e,t){var r=l.clone(p);return Object.keys(r).forEach(function(t){e.hasOwnProperty(t)&&(r[t]=l.clone(e[t]))}),null!=t.expire_sec&&(r.auth.expiry_sec=t.expire_sec),r}}]),e}();e.exports=d},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=r(2),a=r(1),u=function(){function e(t){n(this,e),this._token=null,this._config=t,this._url=o.getRecaiusUrl(t.url,t.version,"auth"),this._lastLogin=null,this._expire=null}return s(e,[{key:"setConfig",value:function(e){this._params=e}},{key:"login",value:function(){var e=this,t=o.urlJoin(this._url,"tokens"),r=this._config.auth;return this._requestJson(t,"POST",JSON.stringify(r)).then(function(t){e._token=t.token,e._lastLogin=Date.now(),e._expire=1e3*t.expiry_sec})}},{key:"logout",value:function(){var e=this,t=o.urlJoin(this._url,"tokens");return this._requestJson(t,"DELETE",null,this.token(!1)).then(function(){e._token=null})}},{key:"token",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===this._token||e&&this.needLogin())throw new a.NeedLoginError;return this._token}},{key:"needLogin",value:function(){if(!this._token||!this._lastLogin)return!0;var e=Date.now();return this._lastLogin+this._expire<e+3e4}},{key:"_requestJson",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s={headers:{"Content-Type":"application/json"},body:r,proxy:this._config.proxy};return null!=n&&(s.headers["X-Token"]=n),i.requestJson(e,t,s)}}]),e}();e.exports=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=r(2),a=r(1),u=[-.00074137037,-.0011531283,-.00021740662,.0012790698,.0015922,-3.4433974e-18,-.0020013065,-.0020233887,.00043397098,.0029163663,.0023894008,-.0011475103,-.0040206192,-.0026171816,.0022067504,.0052971887,.0026168107,-.0036817563,-.0067156054,-.0022786677,.0056507799,.0082325512,.0014663481,-.0082112125,-.0097937101,1.0208823e-17,.011504166,.011336633,-.0023823846,-.015769542,-.012794431,.006118992,.021479134,.014100024,-.012078595,-.029709077,-.015190611,.022394622,.04346599,.016012,-.044309316,-.074967798,-.016522431,.12862139,.28390915,.35060704,.28390915,.12862139,-.016522431,-.074967798,-.044309316,.016012,.04346599,.022394622,-.015190611,-.029709077,-.012078595,.014100024,.021479134,.006118992,-.012794431,-.015769542,-.0023823846,.011336633,.011504166,1.0208823e-17,-.0097937101,-.0082112125,.0014663481,.0082325512,.0056507799,-.0022786677,-.0067156054,-.0036817563,.0026168107,.0052971887,.0022067504,-.0026171816,-.0040206192,-.0011475103,.0023894008,.0029163663,.00043397098,-.0020233887,-.0020013065,-3.4433974e-18,.0015922,.0012790698,-.00021740662,-.0011531283,-.00074137037],h=function(){function e(t,r){n(this,e),this._config=t,this._auth=r,this._url=o.getRecaiusUrl(t.url,t.version,"asr")}return s(e,[{key:"newSession",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.inputType||"linear/int16",r=e.sampleRate||16e3,n=e.sendInterval||512;return new c(this._config,this._auth,this._url,t,r,n)}},{key:"recognize",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=void 0,s=e;if(r.hasOwnProperty("inputType"))if("wave"==r.inputType){var i=o.parseWav(e);n=this.newSession({sampleRate:i.sampleRate}),s=i.data}else n=this.newSession({inputType:r.inputType,sampleRate:optoins.sampleRate});else n=this.newSession();var a=3e4;r.hasOwnProperty("wait")&&(a=r.wait);var u=[];return n.setCallback("Result",function(e){u.push(e)}),n.start(t).then(function(){return n.sendData(s)}).then(function(){return n.flush()}).then(function(){return n.checkResultFor("NoData",a)}).then(function(){return u})}},{key:"getRawFromWave",value:function(e){return o.parseWav(e).data}}]),e}(),c=function(){function e(t,r,s,o,i,a){if(n(this,e),this._config=t,this._auth=r,this._url=s,this._uuid=null,this._asrParams=null,this._sampleRate=i,this._targetRate=16e3,this._rateRatio=this._sampleRate/this._targetRate,this._voiceId=0,this._setInputType(o),this._setSendInterval(a),this._sampleRate<this._targetRate)throw new TypeError("Upsampling is not supported yet.");this._pushedBuffer=null,this._pushedDataStack=[],this._pushedBufferCount=0,this._eventCallbacks={},this._internalEventCallbacks={},this._canRequest=!1,this._isStarted=!1}return s(e,[{key:"setCallback",value:function(e,t){this._eventCallbacks.hasOwnProperty(e)?this._eventCallbacks[e].push(t):this._eventCallbacks[e]=[t]}},{key:"unsetCallback",value:function(e,t){if(this._eventCallbacks.hasOwnProperty(e))for(var r=0;r<this._eventCallbacks[e].length;++r)if(t===this._eventCallbacks[e[r]])return void this._eventCallbacks[e].splice(r,1)}},{key:"start",value:function(e){var t=this;return e.hasOwnProperty("model_id")||o.throwError(new a.RequireArgumentError("model_id")),this._canRequest=!0,this._request("voices",{method:"POST",params:e}).then(function(r){return t._uuid=r.uuid,t._voiceId=1,t._asrParams=e,"speex"!=t._inputType&&(t._pushedBuffer=new t._InputTypeClass(t._storeSize)),t._pushedDataStack=[],t._pushedBufferCount=0,t._isStarted=!0,r})}},{key:"stop",value:function(){null===this._uuid&&o.throwError(new a.NotStartedError);var e=this._uuid;this._uuid=null,this._voiceId=0,this._asrParams=null,this._pushedBuffer=null,this._pushedDataStack=[],this._pushedBufferCount=0;var t=this._request("voices/"+e,{method:"DELETE"});return this._canRequest=!1,this._isStarted=!1,t}},{key:"push",value:function(e){if(this._isStarted){if(null===this._uuid&&o.throwError(new a.NotStartedError),this._rateRatio<1)throw new Error("downsampling rate should be smaller than original sample rate");if(!(e instanceof this._InputTypeClass))throw new Error("You can only push "+this._InputTypeClass+", or use setInputType()");"speex"==this._inputType?this._send(e):(this._pushedDataStack.push(e.slice(0)),this._push())}}},{key:"flush",value:function(){var e=this;null===this._uuid&&o.throwError(new a.NotStartedError),this._pushedDataStack.push(null),this._push();var t={method:"PUT",params:{voice_id:this._voiceId}};return this._voiceId+=1,this._request("voices/"+this._uuid+"/flush",t).then(function(t){return e._parseAsrResult(t),t})}},{key:"checkResult",value:function(){var e=this;return this._request("voices/"+this._uuid+"/results",{method:"GET"}).then(function(t){return e._parseAsrResult(t),t})}},{key:"checkResultFor",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,s=new Promise(function(r,s){var i=!1;t._setCallback(e,function(e){i=!0,r(e)}),t.checkResult().then(function(){i||o.sleep(n).then(function(){return t.checkResult()})})});return o.withTimeout(s,r)}},{key:"sendData",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==r&&(r=this._voiceId);var n=this._preprocessBeforeSend(e),s=new Uint8Array(n.buffer),o={voice_id:r,voice:s};return this._voiceId+=1,this._request("voices/"+this._uuid,{method:"PUT",formData:o}).then(function(e){t._emit("Send",e),t._parseAsrResult(e)})}},{key:"getBaseModels",value:function(){return this._request("models",{method:"GET"})}},{key:"getBaseModelConf",value:function(e){return this._request("models/"+e+"/configuration",{method:"GET"})}},{key:"updateBaseModelConf",value:function(e,t){return this._request("models/"+e+"/configuration",{method:"PUT",params:t})}},{key:"getUserModels",value:function(){return this._request("userlexicons",{method:"GET"})}},{key:"createUserModel",value:function(e){return this._request("userlexicons",{method:"POST",params:{base_model_id:e}})}},{key:"deleteUserModel",value:function(e){return this._request("userlexicons/"+e,{method:"DELETE"})}},{key:"updateUserModelDescription",value:function(e,t){return this._request("userlexicons/"+e,{method:"PUT",params:{description:t}})}},{key:"getUserModelConf",value:function(e){return this._request("userlexicons/"+e+"/configuration",{method:"GET"})}},{key:"updateUserModelConf",value:function(e,t){return this._request("userlexicons/"+e+"/configuration",{method:"PUT",params:t})}},{key:"getLexicon",value:function(e){return this._request("userlexicons/"+e+"/contents",{method:"GET"})}},{key:"updateLexicon",value:function(e,t){return this._request("userlexicons/"+e+"/contents",{method:"PUT",params:{ulex:t}})}},{key:"getDomainTypes",value:function(){return this._request("domainlexicons",{method:"GET"})}},{key:"_setCallback",value:function(e,t){this._internalEventCallbacks.hasOwnProperty(e)||(this._internalEventCallbacks[e]=t)}},{key:"_unsetCallback",value:function(e){this._internalEventCallbacks.hasOwnProperty(e)||delete this._internalEventCallbacks[e]}},{key:"_emit",value:function(e,t){this._eventCallbacks.hasOwnProperty(e)&&this._eventCallbacks[e].forEach(function(e){e(t)}),this._internalEventCallbacks.hasOwnProperty(e)&&this._internalEventCallbacks[e](t)}},{key:"_setSendInterval",value:function(e){"linear/float32"==this._inputType||"linear/int16"==this._inputType?(this._storeSize=e*this._sampleRate/1e3,this._sampleRate!=this._targetRate&&(this._storeSize=e*this._sampleRate/1e3+u.length-1)):"adpcm"==this._inputType?this._storeSize=e*this._sampleRate/1e3/2:"speex"==this._inputType&&(this._storeSize=null)}},{key:"_setInputType",value:function(e){this._inputType=e,"linear/int16"==e?(this._InputTypeClass=Int16Array,this._inputTypeClassName="i16"):(this._InputTypeClass=Float32Array,this._inputTypeClassName="f32")}},{key:"_push",value:function(){if(0!=this._pushedDataStack.length){if(null==this._pushedDataStack[0])return void this._prepareToSend();if("speex"==this._inputType)throw new TypeError("No speex here");if(console.assert(this._storeSize===this._pushedBuffer.length,"error 1"),this._pushedBufferCount+this._pushedDataStack[0].length<this._storeSize)this._pushedBuffer.set(this._pushedDataStack[0],this._pushedBufferCount),this._pushedBufferCount+=this._pushedDataStack[0].length,this._pushedDataStack.shift();else if(this._pushedBufferCount+this._pushedDataStack[0].length==this._storeSize)this._pushedBuffer.set(this._pushedDataStack[0],this._pushedBufferCount),this._pushedBufferCount+=this._pushedDataStack[0].length,console.assert(this._storeSize===this._pushedBufferCount,"error 2"),this._sampleRate!=this._targetRate?this._pushedDataStack[0]=o.typedArrayView(this._pushedBuffer,yhis._pushedBuffer.length-(u.length-1)):this._pushedDataStack.shift(),this._prepareToSend();else{var e=o.typedArrayView(this._pushedDataStack[0],0,this._storeSize-this._pushedBufferCount);this._pushedBuffer.set(e,this._pushedBufferCount),this._pushedBufferCount+=e.length,console.assert(this._storeSize===this._pushedBufferCount),this._sampleRate!=this._targetRate?e.length<u.length-1?(this._pushedDataStack[0]=o.typedArrayView(this._pushedDataStack[0],0),this._pushedDataStack.unshift(o.typedArrayView(this._pushedBuffer,this._pushedBuffer.length-(u.length-1-e.length)))):this._pushedDataStack[0]=o.typedArrayView(this._pushedDataStack[0],e.length-(u.length-1)):this._pushedDataStack[0]=o.typedArrayView(this._pushedDataStack[0],e.length),this._prepareToSend()}this._push()}}},{key:"_request",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this._canRequest)return Promise.resolve();var n=o.urlJoin(this._url,e),s={headers:{"Content-Type":"application/json","X-Token":this._auth.token()},proxy:this._config.proxy},a=t.method||"POST";return t.hasOwnProperty("params")?s.body=JSON.stringify(t.params):t.hasOwnProperty("body")?s.body=t.body:t.hasOwnProperty("formData")&&(s.formData=t.formData,s.headers["Content-Type"]="multipart/form-data"),t.hasOwnProperty("headers")&&Object.keys(t.headers).forEach(function(e){s.headers[e]=t.headers[e]}),r?i.requestJson(n,a,s):i.requestRaw(n,a,s)}},{key:"_prepareToSend",value:function(){if(0!=this._pushedBufferCount){var e=this._pushedBuffer,t=this._voiceId;this._pushedBuffer=new this._InputTypeClass(this._storeSize),this._pushedBufferCount=0,this.sendData(e,t)}}},{key:"_preprocessBeforeSend",value:function(e){this._sampleRate!=this._targetRate&&(e=this._filterFIRAndDownSampling(e));var t=void 0;if("f32"===this._inputTypeClassName){t=new Int16Array(e.length);for(var r=0;r<e.length;++r){var n=Math.max(-1,Math.min(1,e[r]));n*=n<0?32768:32767,t[r]=n}}else t=e;return t}},{key:"_filterFIRAndDownSampling",value:function(e){for(var t=Math.ceil((e.length-(u.length-1))/this._rateRatio),r=new this._InputTypeClass(t),n=0,s=0;;s+=this._rateRatio){var i=Math.floor(s);if(i+u.length-1>=e.length)break;for(var a=0,h=0;h<u.length;++h)a+=u[h]*e[i+h];"i16"===this._inputTypeClassName?r[n]=Math.round(a):r[n]=a,++n}if(r.length<n)throw new Error("Invalid conversion");return r.length!=n&&(r=o.typedArrayView(r,0,n)),r}},{key:"_parseAsrResult",value:function(e){var t=this;if(e)return e.forEach(function(e){var r=void 0,n=void 0,s=void 0;if(t._asrParams.hasOwnProperty("result_type")&&"one_best"!=t._asrParams.result_type?"nbest"==t._asrParams.result_type?(r=e.type,n=t._parseNbest,s=function(e){return e.result}):"confnet"==t._asrParams.result_type&&(r=e.type,n=t._parseConfnet,s=function(e){return e.result}):(r=e[0],n=t._parseOnebest,s=function(e){return e[1]}),"RESULT"==r){var o=n(e);t._emit("Result",o)}else if("TMP_RESULT"==r){var i=s(e);t._emit("TmpResult",i)}else"SOS"==r?t._emit("SOS"):"NO_DATA"==r?(t._canRequest=!1,t._emit("NoData")):"REJECT"==r?t._emit("Reject"):"TIMEOUT"==r?t._emit("Timeout"):"TOO_LONG"==r&&t._emit("TooLong")}),e}},{key:"_parseOnebest",value:function(e){return e[1]}},{key:"_parseNbest",value:function(e){return e.result}},{key:"_parseConfnet",value:function(e){throw new Error("not implemented")}}]),e}();e.exports=h},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=r(2),a=r(1),u=function(){function e(t,r){n(this,e),this._auth=r,this._config=t,this._url=o.getRecaiusUrl(t.url,t.version,"tts")}return s(e,[{key:"getSound",value:function(e){return e.hasOwnProperty("lang")||o.throwError(new a.RequireArgumentError("lang")),e.hasOwnProperty("speaker_id")||o.throwError(new a.RequireArgumentError("speaker_id")),e.hasOwnProperty("phonetic_text")?this._request("phonetictext2speechwave",{params:e},!1):this._request("plaintext2speechwave",{params:e},!1)}},{key:"getPhoneticText",value:function(e){return e.hasOwnProperty("plain_text")||o.throwError(new a.RequireArgumentError("plain_text")),e.hasOwnProperty("lang")||o.throwError(new a.RequireArgumentError("lang")),this._request("plaintext2phonetictext",{params:e})}},{key:"getSpeakers",value:function(){return this._request("speakers",{method:"GET"})}},{key:"getLexiconDictList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._request("userlexicons/${lexiconId}",{method:"GET",params:t})}},{key:"updateLexicon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._request("userlexicons/${lexiconId}",{method:"PUT",params:t},!1)}},{key:"copyLecixonWords",value:function(e,t){return t.hasOwnProperty("user_lang_dic_id")||o.throwError(new a.RequireArgumentError("user_lang_dic_id")),t.hasOwnProperty("dest_user_lang_dic_id")||o.throwError(new a.RequireArgumentError("dest_user_lang_dic_id")),this._request("userlexicons/copy",{params:t})}},{key:"getLexiconWords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r="binary"==t.response_time;return this._request("userlexicons/${lexiconId}/words",{method:"GET",parmas:t},r)}},{key:"deleteAllLexiconWords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._request("userlexicons/${lexiconId}/words",{method:"DELETE",params:t})}},{key:"addWord",value:function(e,t){return t.hasOwnProperty("ulex")||o.throwError(new a.RequireArgumentError("ulex")),this._request("userlexicons/${lexiconId}/words",{method:"PUT",params:t})}},{key:"deleteWord",value:function(e,t){return t.hasOwnProperty("ulex")||o.throwError(new a.RequireArgumentError("ulex")),this._request("userlexicons/${lexiconId}/words",{method:"POST",params:t})}},{key:"getProgress",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._request("userlexicons/${lexiconId}/${pid}",{method:"GET",params:r})}},{key:"_request",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=o.urlJoin(this._url,e),s={headers:{"Content-Type":"application/json","X-Token":this._auth.token()},proxy:this._config.proxy},a=t.method||"POST";return t.hasOwnProperty("params")&&(s.body=JSON.stringify(t.params)),r?i.requestJson(n,a,s):i.requestRaw(n,a,s)}}]),e}();e.exports=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=r(2),a=r(1),u=function(){function e(t,r){n(this,e),this._auth=r,this._config=t,this._url=o.getRecaiusUrl(t.url,t.version,"mt")}return s(e,[{key:"translate",value:function(e){return this._translate(e)}},{key:"arrange",value:function(e){return this._arrange(e)}},{key:"_translate",value:function(e){return e.hasOwnProperty("query")||o.throwError(new a.RequireArgumentError("query")),e.hasOwnProperty("src_lang")||o.throwError(new a.RequireArgumentError("src_lang")),e.hasOwnProperty("tgt_lang")||o.throwError(new a.RequireArgumentError("tgt_lang")),e.mode=e.mode||"spoken_language",this._requestJson("translate",e)}},{key:"_arrange",value:function(e){var t=e.src_lang||o.throwError(new a.RequireArgumentError("src_lang")),r=e.query||o.throwError(new a.RequireArgumentError("query")),n={src_lang:t,query:r};return this._requestJson("arrange",n)}},{key:"_requestJson",value:function(e,t){var r=o.urlJoin(this._url,e);return i.requestJson(r,"POST",{headers:{"Content-Type":"application/json","X-Token":this._auth.token()},body:JSON.stringify(t),proxy:this._config.proxy})}}]),e}();e.exports=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=r(2),a=r(1),u=function(){function e(t,r){n(this,e),this._auth=r,this._config=t,this._url=o.getRecaiusUrl(t.url,t.version,"iip")}return s(e,[{key:"addDatabase",value:function(e,t){return this._request("databases",{method:"POST",headers:{"X-User":e},params:{dbname:t}})}},{key:"getDatabases",value:function(e){return this._request("databases",{method:"GET",headers:{"X-User":e}})}},{key:"deleteDatabase",value:function(e,t){return this._request("databases/"+t,{method:"DELETE",headers:{"X-User":e}})}},{key:"getDatabaseProperty",value:function(e,t){return this._request("databases/"+t+"/properties",{method:"GET",headers:{"X-User":e}})}},{key:"updateVocabulary",value:function(e,t){return this._request("databases/"+t+"/dictionaries",{headers:{"X-Users":e}})}},{key:"getDatabaseKeywords",value:function(e,t){return this._request("databases/"+t+"/keywords",{method:"GET",headers:{"X-User":e}})}},{key:"addDocument",value:function(e,t,r){var n={};return o.copyItemIfPresent(r,n,"name")||o.throwError(new a.RequireArgumentError("name")),o.copyItemIfPresent(r,n,"text"),o.copyItemIfPresent(r,n,"file"),n.hasOwnProperty("file")?o.copyItemIfPresent(r,n,"filename"):n.hasOwnProperty("text")||o.throwError(new a.RequireArgumentError("text or file")),o.copyItemIfPresent(r,n,"length"),o.copyItemIfPresent(r,n,"tags"),o.copyItemIfPresent(r,n,"uri"),this._request("databases/"+t,{headers:{"X-User":e},formData:n})}},{key:"findDocument",value:function(e,t,r){var n={};return o.copyItemIfPresent(r,n,"query")||o.throwError(new a.RequireArgumentError("query")),o.copyItemIfPresent(r,n,"type"),o.copyItemIfPresent(r,n,"count"),o.copyItemIfPresent(r,n,"length"),this._request("databases/"+t,{method:"GET",headers:{"X-User":e},params:n})}},{key:"getDocumentProperty",value:function(e,t){return this._request("databases/"+t+"/properties",{method:"GET",headers:{"X-User":e}})}},{key:"deleteDocument",value:function(e,t,r){return this._request("databases/"+t+"/"+r+"/",{method:"DELETE",headers:{"X-User":e}})}},{key:"updateDocumentProperty",value:function(e,t,r,n){var s={};return o.copyItemIfPresent(n,s,"name"),o.copyItemIfPresent(n,s,"tags"),o.copyItemIfPresent(n,s,"uri"),o.copyItemIfPresent(n,s,"length"),this._request("databases/"+t+"/"+r+"/properties",{method:"PUT",headers:{"X-User":e},params:s})}},{key:"getDocument",value:function(e,t,r){return this._request("databases/"+t+"/"+r+"/file",{method:"GET",headers:{"X-User":e}},!1)}},{key:"extractDatabaseKeyword",value:function(e,t,r){var n={};return o.copyItemIfPresent(r,n,"text")||o.throwError(new a.RequireArgumentError("name")),o.copyItemIfPresent(r,n,"count"),this._request("databases/"+t+"/search_words",{method:"GET",headers:{"X-User":e},params:n})}},{key:"getDocumentKeywords",value:function(e,t,r){var n={};return o.copyItemIfPresent(r,n,"docids")||o.throwError(new a.RequireArgumentError("docids")),o.copyItemIfPresent(r,n,"count"),this._request("/databases/"+t+"/documents/specific_words",{method:"GET",headers:{"X-User":e},params:n})}},{key:"tokenizeText",value:function(e,t){return this._request("/texts/tokens",{method:"GET",headers:{"X-User":e},params:{text:t}})}},{key:"getTextImportance",value:function(e,t){var r={};return o.copyItemIfPresent(t,r,"text"),o.copyItemIfPresent(t,r,"sentences"),r.hasOwnProperty("text")||r.hasOwnProperty("sentences")||o.throwError(new a.RequireArgumentError("text or sentences")),r.hasOwnProperty("text")&&r.hasOwnProperty("sentences")&&o.throwError(new a.RequireArgumentError("set just one parameter: text or sentences")),this._request("/texts/ranks",{method:"GET",headers:{"X-User":e},params:r})}},{key:"extractKeyword",value:function(e,t){var r={};return o.copyItemIfPresent(t,r,"text")||o.throwError(new a.RequireArgumentError("text")),o.copyItemIfPresent(t,r,"count"),this._request("/texts/keywords",{method:"GET",headers:{"X-User":e},params:r})}},{key:"_request",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=o.urlJoin(this._url,e),s={headers:{"Content-Type":"application/json","X-Token":this._auth.token()},proxy:this._config.proxy},a=t.method||"POST";return t.hasOwnProperty("params")?"POST"==a||"PUT"==a?s.body=JSON.stringify(t.params):s.qs=t.params:t.hasOwnProperty("formData")&&(s.formData=t.formData,s.headers["Content-Type"]="multipart/form-data"),t.hasOwnProperty("headers")&&Object.keys(t.headers).forEach(function(e){s.headers[e]=t.headers[e]}),r?i.requestJson(n,a,s):i.requestRaw(n,a,s)}}]),e}();e.exports=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){var e=new i;return e.getMic().then(function(){return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getMic=s;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e),this.bufferSize=0,this.context_=null,this.source_=null,this.scriptProcessor_=null}return o(e,[{key:"setMedia_",value:function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.AudioContext=window.AudioContext||window.webkitAudioContext}},{key:"stop",value:function(){return this.context_.suspend()}},{key:"start",value:function(){return this.context_.resume()}},{key:"sampleRate",value:function(){return this.context_.sampleRate}},{key:"getMic",value:function(){var e=this;return this.setMedia_(),new Promise(function(t,r){if(!navigator.getUserMedia)return console.log("no media"),r(new Error("Your browser does not support media API"));navigator.getUserMedia({video:!1,audio:!0},function(r){console.log("got audio"),e.context_=new AudioContext,e.source_=e.context_.createMediaStreamSource(r),e.scriptProcessor_=e.context_.createScriptProcessor(e.bufferSize,1,1),e.scriptProcessor_.onaudioprocess=function(t){return e.processInput_(t)},e.source_.connect(e.scriptProcessor_),e.scriptProcessor_.connect(e.context_.destination),e.context_.suspend(),t()},function(e){console.log("Get mic: the following error occured: "+e),r(e)})})}},{key:"onInput",value:function(e){console.log("call onInput")}},{key:"processInput_",value:function(e){this.onInput(e.inputBuffer.getChannelData(0))}}]),e}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcmVjYWl1cy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMzIxYjdkZjMzYTc1M2MzMTEyMjQiLCJ3ZWJwYWNrOi8vLy4vbGliL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2V4Y2VwdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9saWIvY29ubmVjdC5qcyIsIndlYnBhY2s6Ly8vLi9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2F1dGguanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2Fzci5qcyIsIndlYnBhY2s6Ly8vLi9saWIvdHRzLmpzIiwid2VicGFjazovLy8uL2xpYi9tdC5qcyIsIndlYnBhY2s6Ly8vLi9saWIvaWlwLmpzIiwid2VicGFjazovLy8uL2xpYi9taWMuanMiXSwibmFtZXMiOlsiUmVjYWl1cyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJjb25zdHJ1Y3RvciIsImV4Y2VwdGlvbiIsInVybEpvaW4iLCJwMSIsInAyIiwicmVwbGFjZSIsImdldFJlY2FpdXNVcmwiLCJiYXNlIiwidmVyc2lvbiIsImtpbmQiLCJjbG9uZSIsIkRhdGUiLCJ0ZW1wIiwia2V5IiwidGhyb3dFcnJvciIsInR5cGVkQXJyYXlWaWV3IiwiYXJyIiwic3RhcnQiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJidWZmZXIiLCJCWVRFU19QRVJfRUxFTUVOVCIsImNvcHlJdGVtSWZQcmVzZW50IiwiZnJvbU9iaiIsInRvT2JqIiwid2FpdEZvciIsImNvbmRpdGlvbiIsImFyZ3VtZW50cyIsIndhaXRJZCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInNsZWVwIiwiaW50ZXJ2YWwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInNldFRpbWVvdXQiLCJ3aXRoVGltZW91dCIsInByb21pc2UiLCJtc2VjIiwicmFjZSIsIlRpbWVvdXRFcnJvciIsImRvd25sb2FkQnVmZmVyIiwiZW5jb2RlZERhdGEiLCJ0aGlzIiwiZW5jb2RlV0FWIiwid2F2QmxvYiIsIkJsb2IiLCJ0eXBlIiwiZm9yY2VEb3dubG9hZCIsImJsb2IiLCJmaWxlbmFtZSIsInVybCIsIndpbmRvdyIsIlVSTCIsIndlYmtpdFVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImxpbmsiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiZG93bmxvYWQiLCJjbGljayIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImZsb2F0VG8xNkJpdFBDTSIsIm91dHB1dCIsIm9mZnNldCIsImlucHV0IiwiTWF0aCIsIm1heCIsIm1pbiIsInNldEludDE2Iiwid3JpdGVTdHJpbmciLCJ2aWV3Iiwic3RyaW5nIiwic2V0VWludDgiLCJjaGFyQ29kZUF0IiwiZW5jb2RlV2F2Iiwic2FtcGxlcyIsIkFycmF5QnVmZmVyIiwiRGF0YVZpZXciLCJzZXRVaW50MzIiLCJzZXRVaW50MTYiLCJzYW1wbGVSYXRlIiwibnVtQ2hhbm5lbHMiLCJwYXJzZVdhdiIsImRhdGEiLCJnZXRVaW50MzIiLCJUeXBlRXJyb3IiLCJjaHVua1NpemUiLCJjaGFubmVsTnVtIiwiZ2V0VWludDE2IiwiYml0c1dpZHRoIiwiZGF0YVN0YXJ0Iiwicm9iaiIsIkludDE2QXJyYXkiLCJjb252ZXJ0U3RlcmVvVG9Nb25vcmFsIiwibmV3QnVmZmVyIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwidmFsdWUiLCJ3cml0YWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiTmVlZExvZ2luRXJyb3IiLCJfRXJyb3IiLCJfdGhpcyIsImdldFByb3RvdHlwZU9mIiwibWVzc2FnZSIsIkVycm9yIiwiUmVxdWlyZUFyZ3VtZW50RXJyb3IiLCJfRXJyb3IyIiwibXNnIiwiX3RoaXMyIiwiTm90U3RhcnRlZEVycm9yIiwiX0Vycm9yMyIsIl90aGlzMyIsIl9FcnJvcjQiLCJfdGhpczQiLCJyZXF1ZXN0QnJvd3NlciIsIm1ldGhvZCIsImlzX2JpbmFyeSIsIm9wdGlvbnMiLCJwYXJhbXMiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJqc29uIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImtleXMiLCJmb3JFYWNoIiwieCIsIlVpbnQ4QXJyYXkiLCJhcHBlbmQiLCJxcyIsInNlYXJjaFBhcmFtcyIsIlV0aWwiLCJmZXRjaCIsInRpbWVvdXQiLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsImFycmF5QnVmZmVyIiwidGV4dCIsInQiLCJwYXJzZSIsImUiLCJzdGF0dXMiLCJyZXF1ZXN0TGliIiwiY29kZSIsInJlcXVlc3RKc29uIiwicmVxdWVzdCIsInIiLCJyZXF1ZXN0UmF3IiwiZW5jb2RpbmciLCJlcnJvciIsInN0YXR1c0NvZGUiLCJkZXRhaWwiLCJpbmRleE9mIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIkF1dGgiLCJBc3IiLCJUdHMiLCJNdCIsIklpcCIsIk1pYyIsImRlZmF1bHRDb25maWciLCJwcm94eSIsImF1dGgiLCJhc3IiLCJ0dHMiLCJtdCIsImlpcCIsImNvbmZpZyIsImFkZGl0aW9uYWxfY29uZmlnIiwiX2NvbmZpZyIsInJlYWRDb25maWciLCJnZXRNaWMiLCJleGNlcHRpb25zIiwiYWMiLCJleHBpcmVfc2VjIiwiZXhwaXJ5X3NlYyIsIkNvbm5lY3QiLCJleGMiLCJfdG9rZW4iLCJfdXJsIiwiX2xhc3RMb2dpbiIsIl9leHBpcmUiLCJfcGFyYW1zIiwiX3JlcXVlc3RKc29uIiwiaiIsInRva2VuIiwibm93Iiwic3RyaWN0IiwibmVlZExvZ2luIiwiQ29udGVudC1UeXBlIiwiZmlyQ29lIiwiX2F1dGgiLCJpbnB1dFR5cGUiLCJzZW5kSW50ZXJ2YWwiLCJTZXNzaW9uIiwic2VzcyIsInNlbmRCdWYiLCJwYXJzZWQiLCJuZXdTZXNzaW9uIiwib3B0b2lucyIsIndhaXQiLCJyZXN1bHRzIiwic2V0Q2FsbGJhY2siLCJwdXNoIiwic2VuZERhdGEiLCJmbHVzaCIsImNoZWNrUmVzdWx0Rm9yIiwiX3V1aWQiLCJfYXNyUGFyYW1zIiwiX3NhbXBsZVJhdGUiLCJfdGFyZ2V0UmF0ZSIsIl9yYXRlUmF0aW8iLCJfdm9pY2VJZCIsIl9zZXRJbnB1dFR5cGUiLCJfc2V0U2VuZEludGVydmFsIiwiX3B1c2hlZEJ1ZmZlciIsIl9wdXNoZWREYXRhU3RhY2siLCJfcHVzaGVkQnVmZmVyQ291bnQiLCJfZXZlbnRDYWxsYmFja3MiLCJfaW50ZXJuYWxFdmVudENhbGxiYWNrcyIsIl9jYW5SZXF1ZXN0IiwiX2lzU3RhcnRlZCIsImNhbGxiYWNrIiwic3BsaWNlIiwiX3JlcXVlc3QiLCJ1dWlkIiwiX2lucHV0VHlwZSIsIl9JbnB1dFR5cGVDbGFzcyIsIl9zdG9yZVNpemUiLCJfc2VuZCIsInNsaWNlIiwiX3B1c2giLCJ2b2ljZV9pZCIsIl9wYXJzZUFzclJlc3VsdCIsImRvbmUiLCJfc2V0Q2FsbGJhY2siLCJjaGVja1Jlc3VsdCIsImJ1ZiIsIl90aGlzNSIsInZvaWNlSWQiLCJfcHJlcHJvY2Vzc0JlZm9yZVNlbmQiLCJ2b2ljZSIsIl9lbWl0IiwibW9kZWxJZCIsImNvbmYiLCJiYXNlSWQiLCJiYXNlX21vZGVsX2lkIiwiZGVzYyIsImRlc2NyaXB0aW9uIiwibGV4aWNvbnMiLCJ1bGV4IiwidHAiLCJfaW5wdXRUeXBlQ2xhc3NOYW1lIiwiRmxvYXQzMkFycmF5IiwiX3ByZXBhcmVUb1NlbmQiLCJjb25zb2xlIiwiYXNzZXJ0Iiwic2V0Iiwic2hpZnQiLCJ5aGlzIiwidW5zaGlmdCIsInJldHVybkpzb24iLCJzZW5kT3B0aW9ucyIsIlgtVG9rZW4iLCJfZmlsdGVyRklSQW5kRG93blNhbXBsaW5nIiwidiIsImlidWYiLCJjb252ZXJ0ZWRTaXplIiwiY2VpbCIsIm9idWYiLCJjc3IiLCJwb3MiLCJmbG9vciIsInJvdW5kIiwiX3RoaXM2IiwicGFyc2VGdW5jIiwiZXh0cmFjdFRtcCIsInJlc3VsdF90eXBlIiwiX3BhcnNlTmJlc3QiLCJyZXN1bHQiLCJfcGFyc2VDb25mbmV0IiwiX3BhcnNlT25lYmVzdCIsImxleGljb25JZCIsImlzSnNvbiIsInJlc3BvbnNlX3RpbWUiLCJwYXJtYXMiLCJwaWQiLCJfdHJhbnNsYXRlIiwiX2FycmFuZ2UiLCJtb2RlIiwic3JjX2xhbmciLCJxdWVyeSIsInNlbmRQYXJhbXMiLCJ1c2VyIiwiWC1Vc2VyIiwiZGJuYW1lIiwiZGJpZCIsIlgtVXNlcnMiLCJkb2NpZCIsIl9fd2VicGFja19leHBvcnRzX18iLCJtaWMiLCJNaWNyb3Bob25lIiwiYnVmZmVyU2l6ZSIsImNvbnRleHRfIiwic291cmNlXyIsInNjcmlwdFByb2Nlc3Nvcl8iLCJuYXZpZ2F0b3IiLCJnZXRVc2VyTWVkaWEiLCJ3ZWJraXRHZXRVc2VyTWVkaWEiLCJtb3pHZXRVc2VyTWVkaWEiLCJtc0dldFVzZXJNZWRpYSIsIkF1ZGlvQ29udGV4dCIsIndlYmtpdEF1ZGlvQ29udGV4dCIsInN1c3BlbmQiLCJyZXN1bWUiLCJzZXRNZWRpYV8iLCJsb2ciLCJ2aWRlbyIsImF1ZGlvIiwic3RyZWFtIiwiY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UiLCJjcmVhdGVTY3JpcHRQcm9jZXNzb3IiLCJvbmF1ZGlvcHJvY2VzcyIsImV2ZW50IiwicHJvY2Vzc0lucHV0XyIsImNvbm5lY3QiLCJkZXN0aW5hdGlvbiIsImVyciIsIm9uSW5wdXQiLCJpbnB1dEJ1ZmZlciIsImdldENoYW5uZWxEYXRhIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxTQUNLLFNBQVVDLEdDR25CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FJLEVBQUFKLEVBQ0FLLEdBQUEsRUFDQUgsV0FVQSxPQU5BSixHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBNERBLE9BaENBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLFNBQUFQLEVBQUFRLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFWLEVBQUFRLElBQ0FHLE9BQUFDLGVBQUFaLEVBQUFRLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBZixHQUNBLEdBQUFRLEdBQUFSLEtBQUFnQixXQUNBLFdBQTJCLE1BQUFoQixHQUFBLFNBQzNCLFdBQWlDLE1BQUFBLEdBRWpDLE9BREFKLEdBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBUSxFQUFBQyxHQUFzRCxNQUFBUixRQUFBUyxVQUFBQyxlQUFBakIsS0FBQWMsRUFBQUMsSUFHdER0QixFQUFBeUIsRUFBQSxHQUdBekIsSUFBQTBCLEVBQUEsS0RPTSxTQUFVdEIsRUFBUUQsRUFBU0gsR0FFakMsWUFHQSxJQUFJMkIsR0FBNEIsa0JBQVhDLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVUMsR0FBTyxhQUFjQSxJQUFTLFNBQVVBLEdBQU8sTUFBT0EsSUFBeUIsa0JB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TixpQkFBbUJyTixFQUFLbU4sU0FBU2tCLHNCQUFzQnJPLEVBQUtrTixXQUFZLEVBQUcsR0FDaEZsTixFQUFLcU4saUJBQWlCaUIsZUFBaUIsU0FBQUMsR0FBQSxNQUFTdk8sR0FBS3dPLGNBQWNELElBQ25Fdk8sRUFBS29OLFFBQVFxQixRQUFRek8sRUFBS3FOLGtCQUMxQnJOLEVBQUtxTixpQkFBaUJvQixRQUFRek8sRUFBS21OLFNBQVN1QixhQUM1QzFPLEVBQUttTixTQUFTVSxVQUNkL1MsS0FFRixTQUFBNlQsR0FDRXhFLFFBQVE2RCxJQUFJLHlDQUEyQ1csR0FDdkQ1VCxFQUFPNFQsVVg0MkRmbFYsSUFBSyxVQUNMaUcsTUFBTyxTV3YyREMxRixHQUNObVEsUUFBUTZELElBQUksbUJYMDJEZHZVLElBQUssZ0JBQ0xpRyxNQUFPLFNXeDJETzZPLEdBQ1ovUyxLQUFLb1QsUUFBUUwsRUFBTU0sWUFBWUMsZUFBZSxRWDQyRDNDN0IiLCJmaWxlIjoicmVjYWl1cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBSZWNhaXVzID1cbi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgZXhjZXB0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgLy8vIGpvaW4gdHdvIHBhdGggd2l0aCBzbGFzaFxuICAgIHVybEpvaW46IGZ1bmN0aW9uIHVybEpvaW4ocDEsIHAyKSB7XG4gICAgICAgIHJldHVybiBwMS5yZXBsYWNlKC9cXC97MSx9JC8sIFwiXCIpICsgXCIvXCIgKyBwMi5yZXBsYWNlKC9eXFwvezEsfS8sIFwiXCIpO1xuICAgIH0sXG5cbiAgICBnZXRSZWNhaXVzVXJsOiBmdW5jdGlvbiBnZXRSZWNhaXVzVXJsKGJhc2UsIHZlcnNpb24sIGtpbmQpIHtcbiAgICAgICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzLnVybEpvaW4oYmFzZSwga2luZCkgKyAoJy8nICsgdmVyc2lvbik7XG4gICAgfSxcblxuICAgIC8vLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEyMjEwMi93aGF0LWlzLXRoZS1tb3N0LWVmZmljaWVudC13YXktdG8tZGVlcC1jbG9uZS1hbi1vYmplY3QtaW4tamF2YXNjcmlwdFxuICAgIGNsb25lOiBmdW5jdGlvbiBjbG9uZShvYmopIHtcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCAodHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yob2JqKSkgIT09ICdvYmplY3QnIHx8ICdpc0FjdGl2ZUNsb25lJyBpbiBvYmopIHJldHVybiBvYmo7XG5cbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIERhdGUpIHZhciB0ZW1wID0gbmV3IG9iai5jb25zdHJ1Y3RvcigpOyAvL29yIG5ldyBEYXRlKG9iaik7XG4gICAgICAgIGVsc2UgdmFyIHRlbXAgPSBvYmouY29uc3RydWN0b3IoKTtcblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgICAgICAgIG9ialsnaXNBY3RpdmVDbG9uZSddID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0ZW1wW2tleV0gPSBtb2R1bGUuZXhwb3J0cy5jbG9uZShvYmpba2V5XSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9ialsnaXNBY3RpdmVDbG9uZSddO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgIH0sXG5cbiAgICB0aHJvd0Vycm9yOiBmdW5jdGlvbiB0aHJvd0Vycm9yKG9iaikge1xuICAgICAgICB0aHJvdyBvYmo7XG4gICAgfSxcblxuICAgIC8vLyB0eXBlZEFycmF544Gu44OQ44OD44OV44Kh44KS5YWx5pyJ44GZ44KL5paw44GX44GEVmlld+OCkui/lOOBmeOAglxuICAgIHR5cGVkQXJyYXlWaWV3OiBmdW5jdGlvbiB0eXBlZEFycmF5VmlldyhhcnIsIHN0YXJ0LCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGFyci5jb25zdHJ1Y3RvcihhcnIuYnVmZmVyLCBhcnIuQllURVNfUEVSX0VMRU1FTlQgKiBzdGFydCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGFyci5jb25zdHJ1Y3RvcihhcnIuYnVmZmVyLCBhcnIuQllURVNfUEVSX0VMRU1FTlQgKiBzdGFydCwgbGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLy8gcmV0dXJuIHRydWUgaWYgY29waWVkXG4gICAgY29weUl0ZW1JZlByZXNlbnQ6IGZ1bmN0aW9uIGNvcHlJdGVtSWZQcmVzZW50KGZyb21PYmosIHRvT2JqLCBrZXkpIHtcbiAgICAgICAgaWYgKGZyb21PYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgdG9PYmpba2V5XSA9IGZyb21PYmpba2V5XTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgd2FpdEZvcjogZnVuY3Rpb24gd2FpdEZvcihjb25kaXRpb24pIHtcbiAgICAgICAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7XG5cbiAgICAgICAgdmFyIHdhaXRJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24oKSkge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwod2FpdElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgbik7XG4gICAgfSxcblxuICAgIHNsZWVwOiBmdW5jdGlvbiBzbGVlcChpbnRlcnZhbCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sIGludGVydmFsKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHdpdGhUaW1lb3V0OiBmdW5jdGlvbiB3aXRoVGltZW91dChwcm9taXNlLCBtc2VjKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW3Byb21pc2UsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBleGNlcHRpb24uVGltZW91dEVycm9yKG1zZWMpKTtcbiAgICAgICAgICAgIH0sIG1zZWMpO1xuICAgICAgICB9KV0pO1xuICAgIH0sXG5cbiAgICBkb3dubG9hZEJ1ZmZlcjogZnVuY3Rpb24gZG93bmxvYWRCdWZmZXIoYnVmZmVyKSB7XG4gICAgICAgIHZhciBlbmNvZGVkRGF0YSA9IHRoaXMuZW5jb2RlV0FWKGJ1ZmZlcik7XG4gICAgICAgIC8vIGxldCBlbmNvZGVkRGF0YSA9IHRoaXMuZW5jb2RlV0FWKG5ldyBJbnQxNkFycmF5KGRhdGEpKVxuICAgICAgICB2YXIgd2F2QmxvYiA9IG5ldyBCbG9iKFtlbmNvZGVkRGF0YV0sIHtcbiAgICAgICAgICAgIHR5cGU6ICdhdWRpby93YXYnXG4gICAgICAgIH0pO1xuICAgICAgICBmb3JjZURvd25sb2FkKHdhdkJsb2IsIFwib3V0LndhdlwiKTtcbiAgICB9LFxuXG4gICAgZm9yY2VEb3dubG9hZDogZnVuY3Rpb24gZm9yY2VEb3dubG9hZChibG9iLCBmaWxlbmFtZSkge1xuICAgICAgICB2YXIgdXJsID0gKHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICB2YXIgbGluayA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVuYW1lIHx8ICdvdXRwdXQud2F2JztcbiAgICAgICAgdmFyIGNsaWNrID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICAgICAgY2xpY2suaW5pdEV2ZW50KFwiY2xpY2tcIiwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIGxpbmsuZGlzcGF0Y2hFdmVudChjbGljayk7XG4gICAgfSxcblxuICAgIGZsb2F0VG8xNkJpdFBDTTogZnVuY3Rpb24gZmxvYXRUbzE2Qml0UENNKG91dHB1dCwgb2Zmc2V0LCBpbnB1dCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrLCBvZmZzZXQgKz0gMikge1xuICAgICAgICAgICAgdmFyIHMgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgaW5wdXRbaV0pKTtcbiAgICAgICAgICAgIG91dHB1dC5zZXRJbnQxNihvZmZzZXQsIHMgPCAwID8gcyAqIDB4ODAwMCA6IHMgKiAweDdGRkYsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHdyaXRlU3RyaW5nOiBmdW5jdGlvbiB3cml0ZVN0cmluZyh2aWV3LCBvZmZzZXQsIHN0cmluZykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHJpbmcuY2hhckNvZGVBdChpKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZW5jb2RlV2F2OiBmdW5jdGlvbiBlbmNvZGVXYXYoc2FtcGxlcykge1xuICAgICAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDQ0ICsgc2FtcGxlcy5sZW5ndGggKiAyKTtcbiAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICAgICAgdmFyIG51bUNoYW5uZWxzID0gMTtcbiAgICAgICAgdmFyIHNhbXBsZVJhdGUgPSAxNjAwMDtcblxuICAgICAgICAvLyBIZWFkZXIgMTIgYnl0ZXNcbiAgICAgICAgLyogUklGRiBpZGVudGlmaWVyICovXG4gICAgICAgIHRoaXMud3JpdGVTdHJpbmcodmlldywgMCwgJ1JJRkYnKTtcbiAgICAgICAgLyogUklGRiBjaHVuayBsZW5ndGggKi9cbiAgICAgICAgdmlldy5zZXRVaW50MzIoNCwgMzYgKyBzYW1wbGVzLmxlbmd0aCAqIDIsIHRydWUpO1xuICAgICAgICAvKiBSSUZGIHR5cGUgKi9cbiAgICAgICAgdGhpcy53cml0ZVN0cmluZyh2aWV3LCA4LCAnV0FWRScpO1xuXG4gICAgICAgIC8vIGZtdCAyNCBieXRlXG4gICAgICAgIC8qIGZvcm1hdCBjaHVuayBpZGVudGlmaWVyICovXG4gICAgICAgIHRoaXMud3JpdGVTdHJpbmcodmlldywgMTIsICdmbXQgJyk7XG4gICAgICAgIC8qIGZvcm1hdCBjaHVuayBsZW5ndGggKi9cbiAgICAgICAgdmlldy5zZXRVaW50MzIoMTYsIDE2LCB0cnVlKTtcbiAgICAgICAgLyogc2FtcGxlIGZvcm1hdCAocmF3KSAqL1xuICAgICAgICB2aWV3LnNldFVpbnQxNigyMCwgMSwgdHJ1ZSk7XG4gICAgICAgIC8qIGNoYW5uZWwgY291bnQgKi9cbiAgICAgICAgdmlldy5zZXRVaW50MTYoMjIsIG51bUNoYW5uZWxzLCB0cnVlKTtcbiAgICAgICAgLyogc2FtcGxlIHJhdGUgKi9cbiAgICAgICAgdmlldy5zZXRVaW50MzIoMjQsIHNhbXBsZVJhdGUsIHRydWUpO1xuICAgICAgICAvKiBieXRlIHJhdGUgKHNhbXBsZSByYXRlICogYmxvY2sgYWxpZ24pICovXG4gICAgICAgIHZpZXcuc2V0VWludDMyKDI4LCBzYW1wbGVSYXRlICogbnVtQ2hhbm5lbHMgKiAyLCB0cnVlKTtcbiAgICAgICAgLyogYmxvY2sgYWxpZ24gKGNoYW5uZWwgY291bnQgKiBieXRlcyBwZXIgc2FtcGxlKSAqL1xuICAgICAgICB2aWV3LnNldFVpbnQxNigzMiwgbnVtQ2hhbm5lbHMgKiAyLCB0cnVlKTtcbiAgICAgICAgLyogYml0cyBwZXIgc2FtcGxlICovXG4gICAgICAgIHZpZXcuc2V0VWludDE2KDM0LCAxNiwgdHJ1ZSk7XG5cbiAgICAgICAgLyogZGF0YSBjaHVuayBpZGVudGlmaWVyICovXG4gICAgICAgIHRoaXMud3JpdGVTdHJpbmcodmlldywgMzYsICdkYXRhJyk7XG4gICAgICAgIC8qIGRhdGEgY2h1bmsgbGVuZ3RoICovXG4gICAgICAgIHZpZXcuc2V0VWludDMyKDQwLCBzYW1wbGVzLmxlbmd0aCAqIDIsIHRydWUpO1xuXG4gICAgICAgIHRoaXMuZmxvYXRUbzE2Qml0UENNKHZpZXcsIDQ0LCBzYW1wbGVzKTtcblxuICAgICAgICByZXR1cm4gdmlldztcbiAgICB9LFxuXG4gICAgcGFyc2VXYXY6IGZ1bmN0aW9uIHBhcnNlV2F2KGRhdGEpIHtcbiAgICAgICAgdmFyIHZpZXcgPSB2b2lkIDA7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBIZWFkZXIgMTIgYnl0ZXNcbiAgICAgICAgLyogUklGRiBpZGVudGlmaWVyICovXG4gICAgICAgIGlmICh2aWV3LmdldFVpbnQzMigwLCB0cnVlKSAhPSAweDQ2NDY0OTUyKSB7XG4gICAgICAgICAgICAvLyA9PSAnUklGRidcbiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcignTm90IGEgd2F2ZSBmb3JtYXQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFJJRkYgdHlwZSAqL1xuICAgICAgICBpZiAodmlldy5nZXRVaW50MzIoOCwgdHJ1ZSkgIT0gMHg0NTU2NDE1Nykge1xuICAgICAgICAgICAgLy8gPT0gJ1dBVkUnXG4gICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ05vdCBhIHdhdmUgZm9ybWF0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmbXQgMjQgYnl0ZVxuICAgICAgICAvKiBmb3JtYXQgY2h1bmsgaWRlbnRpZmllciAqL1xuICAgICAgICBpZiAodmlldy5nZXRVaW50MzIoMTIsIHRydWUpICE9IDB4MjA3NDZkNjYpIHtcbiAgICAgICAgICAgIC8vID09ICdmbXQgJ1xuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdOb3QgYSB3YXZlIGZvcm1hdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogZm9ybWF0IGNodW5rIGxlbmd0aCAqL1xuICAgICAgICB2YXIgY2h1bmtTaXplID0gdmlldy5nZXRVaW50MzIoMTYsIHRydWUpO1xuICAgICAgICAvKiBjaGFubmVsIGNvdW50ICovXG4gICAgICAgIHZhciBjaGFubmVsTnVtID0gdmlldy5nZXRVaW50MTYoMjIsIHRydWUpO1xuICAgICAgICAvKiBzYW1wbGUgcmF0ZSAqL1xuICAgICAgICB2YXIgc2FtcGxlUmF0ZSA9IHZpZXcuZ2V0VWludDMyKDI0LCB0cnVlKTtcbiAgICAgICAgLyogYnl0ZSByYXRlIHBlciBzZWMgKi9cbiAgICAgICAgdmFyIGJ5dGVQZXJTZWMgPSB2aWV3LmdldFVpbnQzMigyOCwgdHJ1ZSk7XG4gICAgICAgIC8qIGJsb2NrIGFsaWduIChjaGFubmVsIGNvdW50ICogYnl0ZXMgcGVyIHNhbXBsZSkgKi9cbiAgICAgICAgdmFyIGJsb2NrQWxpZ24gPSB2aWV3LmdldFVpbnQxNigzMiwgdHJ1ZSk7XG4gICAgICAgIC8qIGJpdHMgcGVyIHNhbXBsZSAqL1xuICAgICAgICB2YXIgYml0c1dpZHRoID0gdmlldy5nZXRVaW50MTYoMzQsIHRydWUpO1xuXG4gICAgICAgIHZhciBkYXRhU3RhcnQgPSAxNiArIGNodW5rU2l6ZSArIDg7XG5cbiAgICAgICAgdmFyIHJvYmogPSB7IGNoYW5uZWxOdW06IGNoYW5uZWxOdW0sIHNhbXBsZVJhdGU6IHNhbXBsZVJhdGUgfTtcblxuICAgICAgICByb2JqLmRhdGEgPSBuZXcgSW50MTZBcnJheSh2aWV3LmJ1ZmZlciwgZGF0YVN0YXJ0KTtcblxuICAgICAgICBpZiAoYml0c1dpZHRoID09IDE2KSB7XG4gICAgICAgICAgICByb2JqLnR5cGUgPSAnbGluZWFyJztcbiAgICAgICAgICAgIGlmIChjaGFubmVsTnVtID09IDIpIHtcbiAgICAgICAgICAgICAgICByb2JqLmRhdGEgPSBtb2R1bGUuZXhwb3J0cy5jb252ZXJ0U3RlcmVvVG9Nb25vcmFsKHJvYmouZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYml0c1dpZHRoID09IDQpIHtcbiAgICAgICAgICAgIHJvYmoudHlwZSA9PSAnYWRwY20nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcm9iai50eXBlID09ICd1bmtub3duJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByb2JqO1xuICAgIH0sXG4gICAgY29udmVydFN0ZXJlb1RvTW9ub3JhbDogZnVuY3Rpb24gY29udmVydFN0ZXJlb1RvTW9ub3JhbChkYXRhKSB7XG4gICAgICAgIHZhciBuZXdCdWZmZXIgPSBuZXcgSW50MTZBcnJheShkYXRhLmxlbmd0aCAvIDIpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIG5ld0J1ZmZlcltpXSA9IGRhdGFbaV0gKyBkYXRhW2kgKyAxXSAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0J1ZmZlcjtcbiAgICB9XG59O1xuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgTmVlZExvZ2luRXJyb3IgPSBmdW5jdGlvbiAoX0Vycm9yKSB7XG4gICAgX2luaGVyaXRzKE5lZWRMb2dpbkVycm9yLCBfRXJyb3IpO1xuXG4gICAgZnVuY3Rpb24gTmVlZExvZ2luRXJyb3IoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOZWVkTG9naW5FcnJvcik7XG5cbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnTmVlZCBsb2dpbic7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE5lZWRMb2dpbkVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTmVlZExvZ2luRXJyb3IpKS5jYWxsKHRoaXMsIG1lc3NhZ2UpKTtcblxuICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgX3RoaXMubmFtZSA9ICdOZWVkTG9naW5FcnJvcic7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICByZXR1cm4gTmVlZExvZ2luRXJyb3I7XG59KEVycm9yKTtcblxudmFyIFJlcXVpcmVBcmd1bWVudEVycm9yID0gZnVuY3Rpb24gKF9FcnJvcjIpIHtcbiAgICBfaW5oZXJpdHMoUmVxdWlyZUFyZ3VtZW50RXJyb3IsIF9FcnJvcjIpO1xuXG4gICAgZnVuY3Rpb24gUmVxdWlyZUFyZ3VtZW50RXJyb3IobXNnKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXF1aXJlQXJndW1lbnRFcnJvcik7XG5cbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnUmVxdWlyZSBhcmd1bWVudDogJyArIG1zZztcblxuICAgICAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFJlcXVpcmVBcmd1bWVudEVycm9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUmVxdWlyZUFyZ3VtZW50RXJyb3IpKS5jYWxsKHRoaXMsIG1lc3NhZ2UpKTtcblxuICAgICAgICBfdGhpczIubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIF90aGlzMi5uYW1lID0gJ1JlcXVpcmVBcmd1bWVudEVycm9yJztcbiAgICAgICAgcmV0dXJuIF90aGlzMjtcbiAgICB9XG5cbiAgICByZXR1cm4gUmVxdWlyZUFyZ3VtZW50RXJyb3I7XG59KEVycm9yKTtcblxudmFyIE5vdFN0YXJ0ZWRFcnJvciA9IGZ1bmN0aW9uIChfRXJyb3IzKSB7XG4gICAgX2luaGVyaXRzKE5vdFN0YXJ0ZWRFcnJvciwgX0Vycm9yMyk7XG5cbiAgICBmdW5jdGlvbiBOb3RTdGFydGVkRXJyb3IoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOb3RTdGFydGVkRXJyb3IpO1xuXG4gICAgICAgIHZhciBtZXNzYWdlID0gJ0FTUiBub3Qgc3RhcnRlZCc7XG5cbiAgICAgICAgdmFyIF90aGlzMyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChOb3RTdGFydGVkRXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihOb3RTdGFydGVkRXJyb3IpKS5jYWxsKHRoaXMsIG1lc3NhZ2UpKTtcblxuICAgICAgICBfdGhpczMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIF90aGlzMy5uYW1lID0gJ05vdFN0YXJ0ZWRFcnJvcic7XG4gICAgICAgIHJldHVybiBfdGhpczM7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5vdFN0YXJ0ZWRFcnJvcjtcbn0oRXJyb3IpO1xuXG52YXIgVGltZW91dEVycm9yID0gZnVuY3Rpb24gKF9FcnJvcjQpIHtcbiAgICBfaW5oZXJpdHMoVGltZW91dEVycm9yLCBfRXJyb3I0KTtcblxuICAgIGZ1bmN0aW9uIFRpbWVvdXRFcnJvcigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRpbWVvdXRFcnJvcik7XG5cbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnVGltZW91dCc7XG5cbiAgICAgICAgdmFyIF90aGlzNCA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUaW1lb3V0RXJyb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUaW1lb3V0RXJyb3IpKS5jYWxsKHRoaXMsIG1lc3NhZ2UpKTtcblxuICAgICAgICBfdGhpczQubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIF90aGlzNC5uYW1lID0gJ1RpbWVvdXRFcnJvcic7XG4gICAgICAgIHJldHVybiBfdGhpczQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIFRpbWVvdXRFcnJvcjtcbn0oRXJyb3IpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBOZWVkTG9naW5FcnJvcjogTmVlZExvZ2luRXJyb3IsXG4gICAgUmVxdWlyZUFyZ3VtZW50RXJyb3I6IFJlcXVpcmVBcmd1bWVudEVycm9yLFxuICAgIE5vdFN0YXJ0ZWRFcnJvcjogTm90U3RhcnRlZEVycm9yLFxuICAgIFRpbWVvdXRFcnJvcjogVGltZW91dEVycm9yXG59O1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLy8gSWYgTm9kZS5qcywgd2UganVzdCB1c2UgcmVxdWVzdCBsaWJyYXJ5XG52YXIgVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgcmVxdWVzdExpYiA9IHVuZGVmaW5lZDtcblxudHJ5IHtcbiAgICB2YXIgX3JlcXVlc3RMaWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKCEoZnVuY3Rpb24gd2VicGFja01pc3NpbmdNb2R1bGUoKSB7IHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlIFxcXCJyZXF1ZXN0XFxcIlwiKTsgZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnOyB0aHJvdyBlOyB9KCkpKTtcbn0gY2F0Y2ggKGUpIHtcbiAgICAnJztcbn1cblxuZnVuY3Rpb24gcmVxdWVzdEJyb3dzZXIodXJsLCBtZXRob2QsIGlzX2JpbmFyeSwgb3B0aW9ucykge1xuICAgIHZhciBwYXJhbXMgPSB7IG1ldGhvZDogbWV0aG9kLCBoZWFkZXJzOiB7fSB9O1xuICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdoZWFkZXJzJykpIHBhcmFtcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdqc29uJykpIHtcbiAgICAgICAgcGFyYW1zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLmpzb24pO1xuICAgICAgICBwYXJhbXMuaGVhZGVyc1snQ29udGVudC10eXBlJ10gPSAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCc7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdib2R5JykpIHtcbiAgICAgICAgcGFyYW1zLmJvZHkgPSBvcHRpb25zLmJvZHk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdmb3JtRGF0YScpKSB7XG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zLmZvcm1EYXRhKS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5mb3JtRGF0YVt4XSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoeCwgbmV3IEJsb2IoW29wdGlvbnMuZm9ybURhdGFbeF1dKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCh4LCBvcHRpb25zLmZvcm1EYXRhW3hdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHBhcmFtcy5ib2R5ID0gZm9ybURhdGE7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdxcycpKSB7XG4gICAgICAgIHZhciBfdXJsID0gbmV3IFVSTChfdXJsKTtcbiAgICAgICAgT2JqZWN0LmtleXMob3B0aW9ucy5xcykuZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIF91cmwuc2VhcmNoUGFyYW1zLmFwcGVuZCh4LCBvcHRpb25zLnFzW3hdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3RpbWVvdXQnKSkge1xuICAgICAgICByZXR1cm4gVXRpbC53aXRoVGltZW91dChmZXRjaCh1cmwsIHBhcmFtcyksIG9wdGlvbnMudGltZW91dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCkudGhlbihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cywgZGF0YTogZCB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNfYmluYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCkudGhlbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLCBkYXRhOiBkIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICByZXF1ZXN0SnNvbjogZnVuY3Rpb24gcmVxdWVzdEpzb24odXJsLCBtZXRob2QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzLnJlcXVlc3QodXJsLCBtZXRob2QsIGZhbHNlLCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICByZXR1cm4gci5kYXRhO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVxdWVzdFJhdzogZnVuY3Rpb24gcmVxdWVzdFJhdyh1cmwsIG1ldGhvZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHMucmVxdWVzdCh1cmwsIG1ldGhvZCwgdHJ1ZSwgb3B0aW9ucykudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIHJlcXVlc3QodXJsLCBtZXRob2QsIGlzX2JpbmFyeSwgb3B0aW9ucykge1xuICAgICAgICBpZiAocmVxdWVzdExpYiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdEJyb3dzZXIodXJsLCBtZXRob2QsIGlzX2JpbmFyeSwgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7IHVybDogdXJsLCBtZXRob2Q6IG1ldGhvZCB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zW2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNfYmluYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5lbmNvZGluZyA9IG51bGw7IC8vIHJlc3BvbnNlIGJvZHkgYmVjb21lcyBCdWZmZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVxdWVzdExpYihwYXJhbXMsIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByb2JqID0geyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1c0NvZGUgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvYmouc3RhdHVzID49IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2JqLmRldGFpbCA9IEpTT04ucGFyc2UoYm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9iai5kZXRhaWwgPSBib2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJvYmopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc19iaW5hcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvYmouZGF0YSA9IGJvZHk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYm9keS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9iai5kYXRhID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXS5pbmRleE9mKCd0ZXh0JykgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9iai5kYXRhID0gYm9keTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvYmouZGF0YSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyb2JqKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gbW9kdWxlc1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgQXV0aCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG52YXIgQXNyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcbnZhciBUdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xudmFyIE10ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcbnZhciBJaXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xudmFyIE1pYyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXG4vLyBvdGhlcnNcbnZhciBVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBleGNlcHRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgZGVmYXVsdENvbmZpZyA9IHtcbiAgICAvLyB1cmwgZ2xvYmFsbHkgc2V0XG4gICAgdXJsOiAnaHR0cHM6Ly9hcGkucmVjYWl1cy5qcC8nLFxuICAgIHZlcnNpb246ICd2MicsXG4gICAgcHJveHk6IHVuZGVmaW5lZCxcbiAgICBhdXRoOiB7fSxcbiAgICBhc3I6IHt9LFxuICAgIHR0czoge30sXG4gICAgbXQ6IHt9LFxuICAgIGlpcDoge31cbn07XG5cbnZhciBSZWNhaXVzID0gZnVuY3Rpb24gKCkge1xuICAgIC8vLyDjgojjgY/kvb/jgYbpoIXnm67jga/jgqrjg5fjgrfjg6fjg7PlvJXmlbDjgafmjIflrprjgafjgY3jgovjgojjgYbjgavjgZnjgotcbiAgICBmdW5jdGlvbiBSZWNhaXVzKCkge1xuICAgICAgICB2YXIgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICAgICAgdmFyIGFkZGl0aW9uYWxfY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYWl1cyk7XG5cbiAgICAgICAgLy8gVE9ETzogdmFsaWRhdGlvblxuICAgICAgICB0aGlzLl9jb25maWcgPSB0aGlzLnJlYWRDb25maWcoY29uZmlnLCBhZGRpdGlvbmFsX2NvbmZpZyk7XG5cbiAgICAgICAgLy8gZGVsZWdhdGVkIG9iamVjdHNcbiAgICAgICAgdGhpcy5hdXRoID0gbmV3IEF1dGgodGhpcy5fY29uZmlnKTtcblxuICAgICAgICAvLyB0aGlzLnNwZWVjaCA9IG5ldyBTcGVlY2godGhpcy5fY29uZmlnLnNwZWVjaCwgdGhpcy5hdXRoKVxuICAgICAgICB0aGlzLnR0cyA9IG5ldyBUdHModGhpcy5fY29uZmlnLCB0aGlzLmF1dGgpO1xuICAgICAgICB0aGlzLm10ID0gbmV3IE10KHRoaXMuX2NvbmZpZywgdGhpcy5hdXRoKTtcbiAgICAgICAgdGhpcy5hc3IgPSBuZXcgQXNyKHRoaXMuX2NvbmZpZywgdGhpcy5hdXRoKTtcbiAgICAgICAgdGhpcy5paXAgPSBuZXcgSWlwKHRoaXMuX2NvbmZpZywgdGhpcy5hdXRoKTtcblxuICAgICAgICB0aGlzLmdldE1pYyA9IE1pYy5nZXRNaWM7XG5cbiAgICAgICAgLy8gcHVibGljIGV4Y2VwdGlvblxuICAgICAgICB0aGlzLmV4Y2VwdGlvbnMgPSBleGNlcHRpb247XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFJlY2FpdXMsIFt7XG4gICAgICAgIGtleTogJ3JlYWRDb25maWcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZENvbmZpZyhjLCBhYykge1xuICAgICAgICAgICAgdmFyIGNvbmZpZyA9IFV0aWwuY2xvbmUoZGVmYXVsdENvbmZpZyk7XG4gICAgICAgICAgICAvLyDjgb7jgovjgZTjgajkuIrmm7jjgY3jgILntLDjgYvjgYToqr/mlbTjga/nhKHjgZdcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGNvbmZpZykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb25maWdba2V5XSA9IFV0aWwuY2xvbmUoY1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGFjLmV4cGlyZV9zZWMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5hdXRoLmV4cGlyeV9zZWMgPSBhYy5leHBpcmVfc2VjO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFJlY2FpdXM7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVjYWl1cztcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBDb25uZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcbnZhciBleGMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgQXV0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBdXRoKGNvbmZpZykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXV0aCk7XG5cbiAgICAgICAgdGhpcy5fdG9rZW4gPSBudWxsO1xuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuX3VybCA9IFV0aWwuZ2V0UmVjYWl1c1VybChjb25maWcudXJsLCBjb25maWcudmVyc2lvbiwgJ2F1dGgnKTtcbiAgICAgICAgdGhpcy5fbGFzdExvZ2luID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZXhwaXJlID0gbnVsbDtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQXV0aCwgW3tcbiAgICAgICAga2V5OiAnc2V0Q29uZmlnJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmFtcyA9IGNvbmZpZztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbG9naW4nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbG9naW4oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gVXRpbC51cmxKb2luKHRoaXMuX3VybCwgJ3Rva2VucycpO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMuX2NvbmZpZy5hdXRoO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdEpzb24odXJsLCAnUE9TVCcsIEpTT04uc3RyaW5naWZ5KHBhcmFtcykpLnRoZW4oZnVuY3Rpb24gKGopIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fdG9rZW4gPSBqLnRva2VuO1xuICAgICAgICAgICAgICAgIF90aGlzLl9sYXN0TG9naW4gPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIF90aGlzLl9leHBpcmUgPSBqLmV4cGlyeV9zZWMgKiAxMDAwOyAvLyB0byBtc2VjXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbG9nb3V0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gVXRpbC51cmxKb2luKHRoaXMuX3VybCwgJ3Rva2VucycpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3RKc29uKHVybCwgJ0RFTEVURScsIG51bGwsIHRoaXMudG9rZW4oZmFsc2UpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpczIuX3Rva2VuID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3RyaWN0PWZhbHNlOiBfdG9rZW7jga7lrZjlnKjjga7jgb/jgpLjg4Hjgqfjg4Pjgq/jgZnjgotcbiAgICAgICAgLy8gc3RyaWN0PXRydWU6IOacieWKueacn+mZkOOBjOWIh+OCjOOBneOBhuOBquWgtOWQiOOBp+OCguOCqOODqeODvOOBq+OBmeOCi1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0b2tlbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b2tlbigpIHtcbiAgICAgICAgICAgIHZhciBzdHJpY3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRydWU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl90b2tlbiA9PT0gbnVsbCB8fCBzdHJpY3QgJiYgdGhpcy5uZWVkTG9naW4oKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGMuTmVlZExvZ2luRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90b2tlbjtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbmVlZExvZ2luJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5lZWRMb2dpbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fdG9rZW4gfHwgIXRoaXMuX2xhc3RMb2dpbikgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIC8vIE5vdGlmeSAzMFtzZWNdIGJlZm9yZSBleHBpcmluZ1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xhc3RMb2dpbiArIHRoaXMuX2V4cGlyZSA8IG5vdyArIDMwMDAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19yZXF1ZXN0SnNvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVxdWVzdEpzb24odXJsLCBtZXRob2QpIHtcbiAgICAgICAgICAgIHZhciBib2R5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuICAgICAgICAgICAgdmFyIHRva2VuID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBudWxsO1xuXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgICAgICAgICBwcm94eTogdGhpcy5fY29uZmlnLnByb3h5XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRva2VuICE9IG51bGwpIHBhcmFtcy5oZWFkZXJzWydYLVRva2VuJ10gPSB0b2tlbjtcbiAgICAgICAgICAgIHJldHVybiBDb25uZWN0LnJlcXVlc3RKc29uKHVybCwgbWV0aG9kLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEF1dGg7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXV0aDtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBDb25uZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcbnZhciBleGMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG4vLyBjb25zdGFudHMgZm9yIHVwc2FtcGxpbmcuIGxlbmd0aD05MVxudmFyIGZpckNvZSA9IFstNy40MTM3MDM3ZS00LCAtMS4xNTMxMjgzZS0zLCAtMi4xNzQwNjYyZS00LCAxLjI3OTA2OThlLTMsIDEuNTkyMjAwMGUtMywgLTMuNDQzMzk3NGUtMTgsIC0yLjAwMTMwNjVlLTMsIC0yLjAyMzM4ODdlLTMsIDQuMzM5NzA5OGUtNCwgMi45MTYzNjYzZS0zLCAyLjM4OTQwMDhlLTMsIC0xLjE0NzUxMDNlLTMsIC00LjAyMDYxOTJlLTMsIC0yLjYxNzE4MTZlLTMsIDIuMjA2NzUwNGUtMywgNS4yOTcxODg3ZS0zLCAyLjYxNjgxMDdlLTMsIC0zLjY4MTc1NjNlLTMsIC02LjcxNTYwNTRlLTMsIC0yLjI3ODY2NzdlLTMsIDUuNjUwNzc5OWUtMywgOC4yMzI1NTEyZS0zLCAxLjQ2NjM0ODFlLTMsIC04LjIxMTIxMjVlLTMsIC05Ljc5MzcxMDFlLTMsIDEuMDIwODgyM2UtMTcsIDEuMTUwNDE2NmUtMiwgMS4xMzM2NjMzZS0yLCAtMi4zODIzODQ2ZS0zLCAtMS41NzY5NTQyZS0yLCAtMS4yNzk0NDMxZS0yLCA2LjExODk5MjBlLTMsIDIuMTQ3OTEzNGUtMiwgMS40MTAwMDI0ZS0yLCAtMS4yMDc4NTk1ZS0yLCAtMi45NzA5MDc3ZS0yLCAtMS41MTkwNjExZS0yLCAyLjIzOTQ2MjJlLTIsIDQuMzQ2NTk5MGUtMiwgMS42MDEyMDAwZS0yLCAtNC40MzA5MzE2ZS0yLCAtNy40OTY3Nzk4ZS0yLCAtMS42NTIyNDMxZS0yLCAxLjI4NjIxMzllLTEsIDIuODM5MDkxNWUtMSwgMy41MDYwNzA0ZS0xLCAyLjgzOTA5MTVlLTEsIDEuMjg2MjEzOWUtMSwgLTEuNjUyMjQzMWUtMiwgLTcuNDk2Nzc5OGUtMiwgLTQuNDMwOTMxNmUtMiwgMS42MDEyMDAwZS0yLCA0LjM0NjU5OTBlLTIsIDIuMjM5NDYyMmUtMiwgLTEuNTE5MDYxMWUtMiwgLTIuOTcwOTA3N2UtMiwgLTEuMjA3ODU5NWUtMiwgMS40MTAwMDI0ZS0yLCAyLjE0NzkxMzRlLTIsIDYuMTE4OTkyMGUtMywgLTEuMjc5NDQzMWUtMiwgLTEuNTc2OTU0MmUtMiwgLTIuMzgyMzg0NmUtMywgMS4xMzM2NjMzZS0yLCAxLjE1MDQxNjZlLTIsIDEuMDIwODgyM2UtMTcsIC05Ljc5MzcxMDFlLTMsIC04LjIxMTIxMjVlLTMsIDEuNDY2MzQ4MWUtMywgOC4yMzI1NTEyZS0zLCA1LjY1MDc3OTllLTMsIC0yLjI3ODY2NzdlLTMsIC02LjcxNTYwNTRlLTMsIC0zLjY4MTc1NjNlLTMsIDIuNjE2ODEwN2UtMywgNS4yOTcxODg3ZS0zLCAyLjIwNjc1MDRlLTMsIC0yLjYxNzE4MTZlLTMsIC00LjAyMDYxOTJlLTMsIC0xLjE0NzUxMDNlLTMsIDIuMzg5NDAwOGUtMywgMi45MTYzNjYzZS0zLCA0LjMzOTcwOThlLTQsIC0yLjAyMzM4ODdlLTMsIC0yLjAwMTMwNjVlLTMsIC0zLjQ0MzM5NzRlLTE4LCAxLjU5MjIwMDBlLTMsIDEuMjc5MDY5OGUtMywgLTIuMTc0MDY2MmUtNCwgLTEuMTUzMTI4M2UtMywgLTcuNDEzNzAzN2UtNF07XG5cbnZhciBBc3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXNyKGNvbmZpZywgYXV0aCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXNyKTtcblxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuX2F1dGggPSBhdXRoO1xuICAgICAgICB0aGlzLl91cmwgPSBVdGlsLmdldFJlY2FpdXNVcmwoY29uZmlnLnVybCwgY29uZmlnLnZlcnNpb24sICdhc3InKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQXNyLCBbe1xuICAgICAgICBrZXk6ICduZXdTZXNzaW9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5ld1Nlc3Npb24oKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgICAgICAgICAgdmFyIGlucHV0VHlwZSA9IHBhcmFtcy5pbnB1dFR5cGUgfHwgJ2xpbmVhci9pbnQxNic7XG4gICAgICAgICAgICB2YXIgc2FtcGxlUmF0ZSA9IHBhcmFtcy5zYW1wbGVSYXRlIHx8IDE2MDAwO1xuICAgICAgICAgICAgdmFyIHNlbmRJbnRlcnZhbCA9IHBhcmFtcy5zZW5kSW50ZXJ2YWwgfHwgNTEyO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXNzaW9uKHRoaXMuX2NvbmZpZywgdGhpcy5fYXV0aCwgdGhpcy5fdXJsLCBpbnB1dFR5cGUsIHNhbXBsZVJhdGUsIHNlbmRJbnRlcnZhbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBiYXRjaOWHpueQhuODouODvOODiVxuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZWNvZ25pemUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVjb2duaXplKGRhdGEsIHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG4gICAgICAgICAgICB2YXIgc2VzcyA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBzZW5kQnVmID0gZGF0YTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdpbnB1dFR5cGUnKSkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmlucHV0VHlwZSA9PSAnd2F2ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZCA9IFV0aWwucGFyc2VXYXYoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHNlc3MgPSB0aGlzLm5ld1Nlc3Npb24oeyBzYW1wbGVSYXRlOiBwYXJzZWQuc2FtcGxlUmF0ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEJ1ZiA9IHBhcnNlZC5kYXRhO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3MgPSB0aGlzLm5ld1Nlc3Npb24oeyBpbnB1dFR5cGU6IG9wdGlvbnMuaW5wdXRUeXBlLCBzYW1wbGVSYXRlOiBvcHRvaW5zLnNhbXBsZVJhdGUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXNzID0gdGhpcy5uZXdTZXNzaW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB3YWl0ID0gMzAwMDA7IC8vIDMwIHNlY1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3dhaXQnKSkge1xuICAgICAgICAgICAgICAgIHdhaXQgPSBvcHRpb25zLndhaXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107XG4gICAgICAgICAgICBzZXNzLnNldENhbGxiYWNrKCdSZXN1bHQnLCBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKG9iaik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gc2Vzcy5zZXRDYWxsYmFjaygnVG1wUmVzdWx0JywgKCkgPT4gY29uc29sZS5sb2coJ1RtcFJlc3VsdCcpKVxuICAgICAgICAgICAgLy8gc2Vzcy5zZXRDYWxsYmFjaygnU2VuZCcsICgpID0+IGNvbnNvbGUubG9nKCdTZW5kJykpXG4gICAgICAgICAgICAvLyBzZXNzLnNldENhbGxiYWNrKCdSZWplY3QnLCAoKSA9PiBjb25zb2xlLmxvZygnUmVqZWN0JykpXG4gICAgICAgICAgICAvLyBzZXNzLnNldENhbGxiYWNrKCdGYWlsdXJlJywgKCkgPT4gY29uc29sZS5sb2coJ0ZhaWx1cmUnKSlcbiAgICAgICAgICAgIC8vIHNlc3Muc2V0Q2FsbGJhY2soJ1NPUycsICgpID0+IGNvbnNvbGUubG9nKCdTT1MnKSlcbiAgICAgICAgICAgIC8vIHNlc3Muc2V0Q2FsbGJhY2soJ1RpbWVvdXQnLCAoKSA9PiBjb25zb2xlLmxvZygnVGltZW91dCcpKVxuICAgICAgICAgICAgLy8gc2Vzcy5zZXRDYWxsYmFjaygnVG9vTG9uZycsICgpID0+IGNvbnNvbGUubG9nKCdUb29Mb25nJykpXG5cbiAgICAgICAgICAgIHJldHVybiBzZXNzLnN0YXJ0KHBhcmFtcykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlc3Muc2VuZERhdGEoc2VuZEJ1Zik7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vzcy5mbHVzaCgpO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlc3MuY2hlY2tSZXN1bHRGb3IoJ05vRGF0YScsIHdhaXQpO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEl0IGFzc3VtZXMgVWludDhBcnJheVxuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRSYXdGcm9tV2F2ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSYXdGcm9tV2F2ZShkYXRhKSB7XG4gICAgICAgICAgICB2YXIgcGFyc2VkV2F2ID0gVXRpbC5wYXJzZVdhdihkYXRhKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWRXYXYuZGF0YTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBBc3I7XG59KCk7XG5cbi8vLyDpn7Plo7Doqo3orZjjga7vvJHjgrvjg4Pjgrfjg6fjg7PjgpLooajjgZlcblxuXG52YXIgU2Vzc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTZXNzaW9uKGNvbmZpZywgYXV0aCwgdXJsLCBpbnB1dFR5cGUsIHNhbXBsZVJhdGUsIHNlbmRJbnRlcnZhbCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2Vzc2lvbik7XG5cbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLl9hdXRoID0gYXV0aDtcbiAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xuXG4gICAgICAgIHRoaXMuX3V1aWQgPSBudWxsO1xuICAgICAgICB0aGlzLl9hc3JQYXJhbXMgPSBudWxsOyAvLyBzdGFydOaZguOBruioreWumlxuXG4gICAgICAgIHRoaXMuX3NhbXBsZVJhdGUgPSBzYW1wbGVSYXRlO1xuICAgICAgICB0aGlzLl90YXJnZXRSYXRlID0gMTYwMDA7XG4gICAgICAgIHRoaXMuX3JhdGVSYXRpbyA9IHRoaXMuX3NhbXBsZVJhdGUgLyB0aGlzLl90YXJnZXRSYXRlO1xuICAgICAgICB0aGlzLl92b2ljZUlkID0gMDtcblxuICAgICAgICB0aGlzLl9zZXRJbnB1dFR5cGUoaW5wdXRUeXBlKTtcbiAgICAgICAgdGhpcy5fc2V0U2VuZEludGVydmFsKHNlbmRJbnRlcnZhbCk7XG5cbiAgICAgICAgaWYgKHRoaXMuX3NhbXBsZVJhdGUgPCB0aGlzLl90YXJnZXRSYXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVcHNhbXBsaW5nIGlzIG5vdCBzdXBwb3J0ZWQgeWV0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6YCU5Lit44Gu44OQ44OD44OV44KhXG4gICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuX3B1c2hlZERhdGFTdGFjayA9IFtdO1xuICAgICAgICB0aGlzLl9wdXNoZWRCdWZmZXJDb3VudCA9IDA7XG5cbiAgICAgICAgdGhpcy5fZXZlbnRDYWxsYmFja3MgPSB7fTtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxFdmVudENhbGxiYWNrcyA9IHt9O1xuXG4gICAgICAgIC8vIHN0YXRlIGhhbmRsaW5nXG4gICAgICAgIHRoaXMuX2NhblJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5faXNTdGFydGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gUmVzdWx0L05vRGF0YS9UbXBSZXN1bHQvU2VuZC9SZWplY3QvRmFpbHVyZS9TT1MvVGltZW91dC9Ub29Mb25nXG5cblxuICAgIF9jcmVhdGVDbGFzcyhTZXNzaW9uLCBbe1xuICAgICAgICBrZXk6ICdzZXRDYWxsYmFjaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDYWxsYmFjayhuYW1lLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2V2ZW50Q2FsbGJhY2tzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRDYWxsYmFja3NbbmFtZV0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50Q2FsbGJhY2tzW25hbWVdID0gW2NhbGxiYWNrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndW5zZXRDYWxsYmFjaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1bnNldENhbGxiYWNrKG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZXZlbnRDYWxsYmFja3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2V2ZW50Q2FsbGJhY2tzW25hbWVdLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayA9PT0gdGhpcy5fZXZlbnRDYWxsYmFja3NbbmFtZVtpXV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50Q2FsbGJhY2tzW25hbWVdLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc3RhcnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQocGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnbW9kZWxfaWQnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ21vZGVsX2lkJykpO1xuICAgICAgICAgICAgdGhpcy5fY2FuUmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndm9pY2VzJywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChqKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3V1aWQgPSBqLnV1aWQ7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3ZvaWNlSWQgPSAxO1xuICAgICAgICAgICAgICAgIF90aGlzLl9hc3JQYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLl9pbnB1dFR5cGUgIT0gJ3NwZWV4Jykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcHVzaGVkQnVmZmVyID0gbmV3IF90aGlzLl9JbnB1dFR5cGVDbGFzcyhfdGhpcy5fc3RvcmVTaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuX3B1c2hlZERhdGFTdGFjayA9IFtdO1xuICAgICAgICAgICAgICAgIF90aGlzLl9wdXNoZWRCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2lzU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGo7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc3RvcCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3V1aWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5Ob3RTdGFydGVkRXJyb3IoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdXVpZCA9IHRoaXMuX3V1aWQ7XG4gICAgICAgICAgICB0aGlzLl91dWlkID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3ZvaWNlSWQgPSAwO1xuICAgICAgICAgICAgdGhpcy5fYXNyUGFyYW1zID0gbnVsbDsgLy8gc3RhcnTmmYLjga7oqK3lrppcbiAgICAgICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9wdXNoZWREYXRhU3RhY2sgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50ID0gMDtcblxuICAgICAgICAgICAgdmFyIHIgPSB0aGlzLl9yZXF1ZXN0KCd2b2ljZXMvJyArIHV1aWQsIHsgbWV0aG9kOiAnREVMRVRFJyB9KTtcbiAgICAgICAgICAgIHRoaXMuX2NhblJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2lzU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwdXNo44GZ44KL6KaB57Sg44Gr44KI44Gj44Gm5a++5b+c44KS5aSJ44GI44KL44CCXG4gICAgICAgIC8vXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3B1c2gnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHVzaChidWZmZXIpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNTdGFydGVkKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5fdXVpZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLk5vdFN0YXJ0ZWRFcnJvcigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9yYXRlUmF0aW8gPCAxKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZG93bnNhbXBsaW5nIHJhdGUgc2hvdWxkIGJlIHNtYWxsZXIgdGhhbiBvcmlnaW5hbCBzYW1wbGUgcmF0ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKGJ1ZmZlciBpbnN0YW5jZW9mIHRoaXMuX0lucHV0VHlwZUNsYXNzKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IGNhbiBvbmx5IHB1c2ggJyArIHRoaXMuX0lucHV0VHlwZUNsYXNzICsgJywgb3IgdXNlIHNldElucHV0VHlwZSgpJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9pbnB1dFR5cGUgPT0gJ3NwZWV4Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NlbmQoYnVmZmVyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHVzaGVkRGF0YVN0YWNrLnB1c2goYnVmZmVyLnNsaWNlKDApKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wdXNoKCk7IC8vIGNoZWNrIHRvIHNlbmRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZmx1c2gnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3V1aWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5Ob3RTdGFydGVkRXJyb3IoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjgavmrovjgaPjgabjgYTjgovjg4fjg7zjgr/jgpLlvLfliLbpgIHkv6FcbiAgICAgICAgICAgIHRoaXMuX3B1c2hlZERhdGFTdGFjay5wdXNoKG51bGwpO1xuICAgICAgICAgICAgdGhpcy5fcHVzaCgpO1xuXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHsgbWV0aG9kOiAnUFVUJywgcGFyYW1zOiB7IHZvaWNlX2lkOiB0aGlzLl92b2ljZUlkIH0gfTtcbiAgICAgICAgICAgIHRoaXMuX3ZvaWNlSWQgKz0gMTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd2b2ljZXMvJyArIHRoaXMuX3V1aWQgKyAnL2ZsdXNoJywgb3B0aW9ucykudGhlbihmdW5jdGlvbiAoaikge1xuICAgICAgICAgICAgICAgIF90aGlzMi5fcGFyc2VBc3JSZXN1bHQoaik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGo7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2hlY2tSZXN1bHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tSZXN1bHQoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ3ZvaWNlcy8nICsgdGhpcy5fdXVpZCArICcvcmVzdWx0cycsIHsgbWV0aG9kOiAnR0VUJyB9KS50aGVuKGZ1bmN0aW9uIChqKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMzLl9wYXJzZUFzclJlc3VsdChqKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gajtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjaGVja1Jlc3VsdEZvcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja1Jlc3VsdEZvcihuYW1lKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDEwMDAwO1xuICAgICAgICAgICAgdmFyIGludGVydmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiA1MDA7XG5cbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBkb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXM0Ll9zZXRDYWxsYmFjayhuYW1lLCBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG9iaik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfdGhpczQuY2hlY2tSZXN1bHQoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmUtY2hlY2tcbiAgICAgICAgICAgICAgICAgICAgVXRpbC5zbGVlcChpbnRlcnZhbCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmNoZWNrUmVzdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gVXRpbC53aXRoVGltZW91dChwcm9taXNlLCB0aW1lb3V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEl0IHNlbmRzIHZvaWNlIGRhdGEgaW1tZWRpYXRlbHlcblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2VuZERhdGEnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZERhdGEoYnVmKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHZvaWNlSWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG5cbiAgICAgICAgICAgIGlmICh2b2ljZUlkID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2b2ljZUlkID0gdGhpcy5fdm9pY2VJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZW5kQnVmID0gdGhpcy5fcHJlcHJvY2Vzc0JlZm9yZVNlbmQoYnVmKTtcbiAgICAgICAgICAgIHZhciB2b2ljZSA9IG5ldyBVaW50OEFycmF5KHNlbmRCdWYuYnVmZmVyKTtcbiAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9IHtcbiAgICAgICAgICAgICAgICB2b2ljZV9pZDogdm9pY2VJZCxcbiAgICAgICAgICAgICAgICB2b2ljZTogdm9pY2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLl92b2ljZUlkICs9IDE7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndm9pY2VzLycgKyB0aGlzLl91dWlkLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICBmb3JtRGF0YTogZm9ybURhdGFcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGopIHtcbiAgICAgICAgICAgICAgICBfdGhpczUuX2VtaXQoJ1NlbmQnLCBqKTtcbiAgICAgICAgICAgICAgICBfdGhpczUuX3BhcnNlQXNyUmVzdWx0KGopO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEJhc2VNb2RlbHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QmFzZU1vZGVscygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdtb2RlbHMnLCB7IG1ldGhvZDogJ0dFVCcgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEJhc2VNb2RlbENvbmYnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QmFzZU1vZGVsQ29uZihtb2RlbElkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnbW9kZWxzLycgKyBtb2RlbElkICsgJy9jb25maWd1cmF0aW9uJywgeyBtZXRob2Q6ICdHRVQnIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGVCYXNlTW9kZWxDb25mJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUJhc2VNb2RlbENvbmYobW9kZWxJZCwgY29uZikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ21vZGVscy8nICsgbW9kZWxJZCArICcvY29uZmlndXJhdGlvbicsIHsgbWV0aG9kOiAnUFVUJywgcGFyYW1zOiBjb25mIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRVc2VyTW9kZWxzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVzZXJNb2RlbHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndXNlcmxleGljb25zJywgeyBtZXRob2Q6ICdHRVQnIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVVc2VyTW9kZWwnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlVXNlck1vZGVsKGJhc2VJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ3VzZXJsZXhpY29ucycsIHsgbWV0aG9kOiAnUE9TVCcsIHBhcmFtczogeyBiYXNlX21vZGVsX2lkOiBiYXNlSWQgfSB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGVsZXRlVXNlck1vZGVsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlbGV0ZVVzZXJNb2RlbChtb2RlbElkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndXNlcmxleGljb25zLycgKyBtb2RlbElkLCB7IG1ldGhvZDogJ0RFTEVURScgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZVVzZXJNb2RlbERlc2NyaXB0aW9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVVzZXJNb2RlbERlc2NyaXB0aW9uKG1vZGVsSWQsIGRlc2MpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd1c2VybGV4aWNvbnMvJyArIG1vZGVsSWQsIHsgbWV0aG9kOiAnUFVUJywgcGFyYW1zOiB7IGRlc2NyaXB0aW9uOiBkZXNjIH0gfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFVzZXJNb2RlbENvbmYnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXNlck1vZGVsQ29uZihtb2RlbElkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndXNlcmxleGljb25zLycgKyBtb2RlbElkICsgJy9jb25maWd1cmF0aW9uJywgeyBtZXRob2Q6ICdHRVQnIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGVVc2VyTW9kZWxDb25mJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVVzZXJNb2RlbENvbmYobW9kZWxJZCwgY29uZikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ3VzZXJsZXhpY29ucy8nICsgbW9kZWxJZCArICcvY29uZmlndXJhdGlvbicsIHsgbWV0aG9kOiAnUFVUJywgcGFyYW1zOiBjb25mIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRMZXhpY29uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldExleGljb24obW9kZWxJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ3VzZXJsZXhpY29ucy8nICsgbW9kZWxJZCArICcvY29udGVudHMnLCB7IG1ldGhvZDogJ0dFVCcgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZUxleGljb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTGV4aWNvbihtb2RlbElkLCBsZXhpY29ucykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ3VzZXJsZXhpY29ucy8nICsgbW9kZWxJZCArICcvY29udGVudHMnLCB7IG1ldGhvZDogJ1BVVCcsIHBhcmFtczogeyB1bGV4OiBsZXhpY29ucyB9IH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXREb21haW5UeXBlcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREb21haW5UeXBlcygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdkb21haW5sZXhpY29ucycsIHsgbWV0aG9kOiAnR0VUJyB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX3NldENhbGxiYWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRDYWxsYmFjayhuYW1lLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9pbnRlcm5hbEV2ZW50Q2FsbGJhY2tzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJuYWxFdmVudENhbGxiYWNrc1tuYW1lXSA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdfdW5zZXRDYWxsYmFjaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdW5zZXRDYWxsYmFjayhuYW1lKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2ludGVybmFsRXZlbnRDYWxsYmFja3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faW50ZXJuYWxFdmVudENhbGxiYWNrc1tuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX2VtaXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2VtaXQobmFtZSwgb2JqKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZXZlbnRDYWxsYmFja3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudENhbGxiYWNrc1tuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhvYmopO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX2ludGVybmFsRXZlbnRDYWxsYmFja3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnRlcm5hbEV2ZW50Q2FsbGJhY2tzW25hbWVdKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtc2VjICjlpInmm7TkuI3lj68pXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19zZXRTZW5kSW50ZXJ2YWwnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFNlbmRJbnRlcnZhbChuKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faW5wdXRUeXBlID09ICdsaW5lYXIvZmxvYXQzMicgfHwgdGhpcy5faW5wdXRUeXBlID09ICdsaW5lYXIvaW50MTYnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RvcmVTaXplID0gbiAqIHRoaXMuX3NhbXBsZVJhdGUgLyAxMDAwO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zYW1wbGVSYXRlICE9IHRoaXMuX3RhcmdldFJhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RvcmVTaXplID0gbiAqIHRoaXMuX3NhbXBsZVJhdGUgLyAxMDAwICsgZmlyQ29lLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9pbnB1dFR5cGUgPT0gJ2FkcGNtJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0b3JlU2l6ZSA9IG4gKiB0aGlzLl9zYW1wbGVSYXRlIC8gMTAwMCAvIDI7IC8vIOS4gOOBpOOBruODkOOCpOODiOOBq++8kuOBpOOBruimgee0oFxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9pbnB1dFR5cGUgPT0gJ3NwZWV4Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0b3JlU2l6ZSA9IG51bGw7IC8vIG5vdCBzdXBwb3J0ZWQuIEFsd2F5cyBzZW5kIGlmIHB1c2hlZFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGluZWFyL2ludDE2LCBsaW5lYXIvZmxvYXQzMiwgYWRwY20sIHNwZWV45Lul5aSW44Gv6KqN44KB44Gq44GEXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19zZXRJbnB1dFR5cGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldElucHV0VHlwZSh0cCkge1xuICAgICAgICAgICAgdGhpcy5faW5wdXRUeXBlID0gdHA7XG4gICAgICAgICAgICBpZiAodHAgPT0gJ2xpbmVhci9pbnQxNicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9JbnB1dFR5cGVDbGFzcyA9IEludDE2QXJyYXk7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5wdXRUeXBlQ2xhc3NOYW1lID0gJ2kxNic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCdsaW5lYXIvZmxvYXQzMicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9JbnB1dFR5cGVDbGFzcyA9IEZsb2F0MzJBcnJheTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnB1dFR5cGVDbGFzc05hbWUgPSAnZjMyJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJ2FkcGNtJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX0lucHV0VHlwZUNsYXNzID0gVWludDhBcnJheTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnB1dFR5cGVDbGFzc05hbWUgPSAndTgnO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zYW1wbGVSYXRlICE9IHRoaXMuX3RhcmdldFJhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignV2Ugb25seSBzdXBwb3J0IGFkcGNtIHdpdGggMTYwMDBIeiBzYW1wbGluZy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCdzcGVleCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9JbnB1dFR5cGVDbGFzcyA9IFVpbnQ4QXJyYXk7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5wdXRUeXBlQ2xhc3NOYW1lID0gJ3U4JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignU2VsZWN0IGxpbmVhci9pbnQxNiwgbGluZWFyL2Zsb2F0MzIsIGFkcGNtLCBvciBzcGVleCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdfcHVzaCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHVzaCgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9wdXNoZWREYXRhU3RhY2subGVuZ3RoID09IDApIHJldHVybjtcblxuICAgICAgICAgICAgLy8gbnVsbCBlbGVtZW50IGluZGljYXRlcyB0byBiZSBmbHVzaGVkXG4gICAgICAgICAgICBpZiAodGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcmVwYXJlVG9TZW5kKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5faW5wdXRUeXBlID09ICdzcGVleCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdObyBzcGVleCBoZXJlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmFzc2VydCh0aGlzLl9zdG9yZVNpemUgPT09IHRoaXMuX3B1c2hlZEJ1ZmZlci5sZW5ndGgsIFwiZXJyb3IgMVwiKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50ICsgdGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLmxlbmd0aCA8IHRoaXMuX3N0b3JlU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlci5zZXQodGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLCB0aGlzLl9wdXNoZWRCdWZmZXJDb3VudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHVzaGVkQnVmZmVyQ291bnQgKz0gdGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWREYXRhU3RhY2suc2hpZnQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fcHVzaGVkQnVmZmVyQ291bnQgKyB0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0ubGVuZ3RoID09IHRoaXMuX3N0b3JlU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlci5zZXQodGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLCB0aGlzLl9wdXNoZWRCdWZmZXJDb3VudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHVzaGVkQnVmZmVyQ291bnQgKz0gdGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmFzc2VydCh0aGlzLl9zdG9yZVNpemUgPT09IHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50LCBcImVycm9yIDJcIik7XG4gICAgICAgICAgICAgICAgLy8gRklS44GZ44KL44Go44GN44Gv44OV44Kj44Or44K/5YiG44KS5o2o44Gm44Gm44GX44G+44GG44Gu44Gn44CB44GT44Gu6YOo5YiG44Gv5qyh44Gu44OH44O844K/44Gn6YCB44KL44Gu44Gn5q6L44GZ5b+F6KaB44GC44KKXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NhbXBsZVJhdGUgIT0gdGhpcy5fdGFyZ2V0UmF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0gPSBVdGlsLnR5cGVkQXJyYXlWaWV3KHRoaXMuX3B1c2hlZEJ1ZmZlciwgeWhpcy5fcHVzaGVkQnVmZmVyLmxlbmd0aCAtIChmaXJDb2UubGVuZ3RoIC0gMSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3B1c2hlZERhdGFTdGFjay5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9wcmVwYXJlVG9TZW5kKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gVXRpbC50eXBlZEFycmF5Vmlldyh0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0sIDAsIHRoaXMuX3N0b3JlU2l6ZSAtIHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWRCdWZmZXIuc2V0KHZpZXcsIHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWRCdWZmZXJDb3VudCArPSB2aWV3Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmFzc2VydCh0aGlzLl9zdG9yZVNpemUgPT09IHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50KTtcbiAgICAgICAgICAgICAgICAvLyBGSVLjgZnjgovjgajjgY3jga/jg5XjgqPjg6vjgr/liIbjgpLmjajjgabjgabjgZfjgb7jgYbjga7jgafjgIHjgZPjga7pg6jliIbjga/mrKHjga7jg4fjg7zjgr/jgafpgIHjgovjga7jgafmrovjgZnlv4XopoHjgYLjgopcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2FtcGxlUmF0ZSAhPSB0aGlzLl90YXJnZXRSYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2aWV3Lmxlbmd0aCA8IGZpckNvZS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0gPSBVdGlsLnR5cGVkQXJyYXlWaWV3KHRoaXMuX3B1c2hlZERhdGFTdGFja1swXSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWREYXRhU3RhY2sudW5zaGlmdChVdGlsLnR5cGVkQXJyYXlWaWV3KHRoaXMuX3B1c2hlZEJ1ZmZlciwgdGhpcy5fcHVzaGVkQnVmZmVyLmxlbmd0aCAtIChmaXJDb2UubGVuZ3RoIC0gMSAtIHZpZXcubGVuZ3RoKSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdID0gVXRpbC50eXBlZEFycmF5Vmlldyh0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0sIHZpZXcubGVuZ3RoIC0gKGZpckNvZS5sZW5ndGggLSAxKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0gPSBVdGlsLnR5cGVkQXJyYXlWaWV3KHRoaXMuX3B1c2hlZERhdGFTdGFja1swXSwgdmlldy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9wcmVwYXJlVG9TZW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9wdXNoKCk7IC8vIOmAgeOCi+OCguOBruOBjOOBquOBj+OBquOCi+OBvuOBp+e5sOOCiui/lOOBmVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdfcmVxdWVzdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVxdWVzdChuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcmV0dXJuSnNvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdHJ1ZTtcblxuICAgICAgICAgICAgLy8gc2Vzc2lvbiBoYXMgc3RvcGVkLiBubyBtb3JlIHJlcXVlc3QgdG8uXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2NhblJlcXVlc3QpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBVdGlsLnVybEpvaW4odGhpcy5fdXJsLCBuYW1lKTtcbiAgICAgICAgICAgIHZhciBzZW5kT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICdYLVRva2VuJzogdGhpcy5fYXV0aC50b2tlbigpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm94eTogdGhpcy5fY29uZmlnLnByb3h5XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgbWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgJ1BPU1QnO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3BhcmFtcycpKSB7XG4gICAgICAgICAgICAgICAgc2VuZE9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMucGFyYW1zKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnYm9keScpKSB7XG4gICAgICAgICAgICAgICAgc2VuZE9wdGlvbnMuYm9keSA9IG9wdGlvbnMuYm9keTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnZm9ybURhdGEnKSkge1xuICAgICAgICAgICAgICAgIHNlbmRPcHRpb25zLmZvcm1EYXRhID0gb3B0aW9ucy5mb3JtRGF0YTtcbiAgICAgICAgICAgICAgICBzZW5kT3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2hlYWRlcnMnKSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICBzZW5kT3B0aW9ucy5oZWFkZXJzW3hdID0gb3B0aW9ucy5oZWFkZXJzW3hdO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmV0dXJuSnNvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBDb25uZWN0LnJlcXVlc3RKc29uKHVybCwgbWV0aG9kLCBzZW5kT3B0aW9ucyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBDb25uZWN0LnJlcXVlc3RSYXcodXJsLCBtZXRob2QsIHNlbmRPcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX3ByZXBhcmVUb1NlbmQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3ByZXBhcmVUb1NlbmQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcHVzaGVkQnVmZmVyQ291bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZW5kQnVmID0gdGhpcy5fcHVzaGVkQnVmZmVyO1xuICAgICAgICAgICAgdmFyIHZvaWNlSWQgPSB0aGlzLl92b2ljZUlkO1xuICAgICAgICAgICAgdGhpcy5fcHVzaGVkQnVmZmVyID0gbmV3IHRoaXMuX0lucHV0VHlwZUNsYXNzKHRoaXMuX3N0b3JlU2l6ZSk7XG4gICAgICAgICAgICB0aGlzLl9wdXNoZWRCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLnNlbmREYXRhKHNlbmRCdWYsIHZvaWNlSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYnVm44Gu5YaF5a6544KS6YCB44KLXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19wcmVwcm9jZXNzQmVmb3JlU2VuZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJlcHJvY2Vzc0JlZm9yZVNlbmQoYnVmKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fc2FtcGxlUmF0ZSAhPSB0aGlzLl90YXJnZXRSYXRlKSB7XG4gICAgICAgICAgICAgICAgYnVmID0gdGhpcy5fZmlsdGVyRklSQW5kRG93blNhbXBsaW5nKGJ1Zik7IC8vIEZJUuODleOCo+ODq+OCv+OCkuOBi+OBvuOBmVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNlbmRCdWYgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAodGhpcy5faW5wdXRUeXBlQ2xhc3NOYW1lID09PSAnZjMyJykge1xuICAgICAgICAgICAgICAgIHNlbmRCdWYgPSBuZXcgSW50MTZBcnJheShidWYubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1Zi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBidWZbaV0pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ICo9IDB4ODAwMDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgKj0gMHg3RkZGO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNlbmRCdWZbaV0gPSB2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VuZEJ1ZiA9IGJ1ZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZW5kQnVmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRklSIGZpbHRlcuOBp+ijnOWujCjlvozjgavjg4Djgqbjg7PjgrXjg7Pjg5fjg6spXG4gICAgICAgIC8vIOWFg+OBruODh+ODvOOCvyAgICBbb29vb29vb11cbiAgICAgICAgLy8gICAgICAgICAgICAgICBbfHx8XSA8LSDnlbPjgb/ovrzjgpPjgafjgYTjgotcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgfFxuICAgICAgICAvLyBGSVLlvozjga7jg4fjg7zjgr8gW29vb29vb29dXG5cbiAgICAgICAgLy8g5YWD44Gu44OH44O844K/ICAgIFtvb29vb29vXVxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICBbfHx8XSAgICAgPC0g44GT44GT44G+44Gn44CC44Gk44G+44KKRmlsdGVy6YWN5YiX44Gu6ZW344GVLTHjga7opoHntKDjga/mjajjgabjgonjgozjgotcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgLy8gRklS5b6M44Gu44OH44O844K/IFtvb29vb29vXVxuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdfZmlsdGVyRklSQW5kRG93blNhbXBsaW5nJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXJGSVJBbmREb3duU2FtcGxpbmcoaWJ1Zikge1xuICAgICAgICAgICAgLy8g44OA44Km44Oz44K144Oz44OX44Or44KS6KGM44GG44Gu44Gn44CB5b+F6KaB44Gq6KaB57Sg5pWw44Gv5bCP44GV44GP44Gq44KLXG4gICAgICAgICAgICB2YXIgY29udmVydGVkU2l6ZSA9IE1hdGguY2VpbCgoaWJ1Zi5sZW5ndGggLSAoZmlyQ29lLmxlbmd0aCAtIDEpKSAvIHRoaXMuX3JhdGVSYXRpbyk7XG4gICAgICAgICAgICB2YXIgb2J1ZiA9IG5ldyB0aGlzLl9JbnB1dFR5cGVDbGFzcyhjb252ZXJ0ZWRTaXplKTtcbiAgICAgICAgICAgIHZhciBjc3IgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7OyBpICs9IHRoaXMuX3JhdGVSYXRpbykge1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSBNYXRoLmZsb29yKGkpO1xuICAgICAgICAgICAgICAgIGlmIChwb3MgKyBmaXJDb2UubGVuZ3RoIC0gMSA+PSBpYnVmLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHYgPSAwLjA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBmaXJDb2UubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmlyQ29l44Gv5bem5Y+z5a++56ew44Gu6YWN5YiXKDkx6KaB57SgKeOBquOBruOBp+OCs+ODrOOBp+iJr+OBhFxuICAgICAgICAgICAgICAgICAgICB2ICs9IGZpckNvZVtqXSAqIGlidWZbcG9zICsgal07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIOOBk+OBk+OBp+OAgUlucHV0VHlwZeOBjGludOWei+OBruWgtOWQiOOBq+OBr+Wei+WkieaPm+OBjOW/heimgeOBq+OBquOCi1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pbnB1dFR5cGVDbGFzc05hbWUgPT09ICdpMTYnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9idWZbY3NyXSA9IE1hdGgucm91bmQodik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2J1Zltjc3JdID0gdjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKytjc3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2J1Zi5sZW5ndGggPCBjc3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29udmVyc2lvbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g5pyA5b6M44Gr44KC44GX44OQ44OD44OV44Kh44GM5L2Z44Gj44Gm44GE44Gf44KJdmlld+OCkuOBmeOBkuabv+OBiOOCi1xuICAgICAgICAgICAgaWYgKG9idWYubGVuZ3RoICE9IGNzcikge1xuICAgICAgICAgICAgICAgIG9idWYgPSBVdGlsLnR5cGVkQXJyYXlWaWV3KG9idWYsIDAsIGNzcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2J1ZjtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX3BhcnNlQXNyUmVzdWx0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9wYXJzZUFzclJlc3VsdChvYmopIHtcbiAgICAgICAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoIW9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb2JqLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IHZvaWQgMCxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGdW5jID0gdm9pZCAwLFxuICAgICAgICAgICAgICAgICAgICBleHRyYWN0VG1wID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXM2Ll9hc3JQYXJhbXMuaGFzT3duUHJvcGVydHkoJ3Jlc3VsdF90eXBlJykgfHwgX3RoaXM2Ll9hc3JQYXJhbXMucmVzdWx0X3R5cGUgPT0gJ29uZV9iZXN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0eXBlID0gdlswXTtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGdW5jID0gX3RoaXM2Ll9wYXJzZU9uZWJlc3Q7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RUbXAgPSBmdW5jdGlvbiBleHRyYWN0VG1wKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2WzFdO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXM2Ll9hc3JQYXJhbXMucmVzdWx0X3R5cGUgPT0gJ25iZXN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0eXBlID0gdi50eXBlO1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUZ1bmMgPSBfdGhpczYuX3BhcnNlTmJlc3Q7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RUbXAgPSBmdW5jdGlvbiBleHRyYWN0VG1wKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2LnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzNi5fYXNyUGFyYW1zLnJlc3VsdF90eXBlID09ICdjb25mbmV0Jykge1xuICAgICAgICAgICAgICAgICAgICB0eXBlID0gdi50eXBlO1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUZ1bmMgPSBfdGhpczYuX3BhcnNlQ29uZm5ldDtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdFRtcCA9IGZ1bmN0aW9uIGV4dHJhY3RUbXAodikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdSRVNVTFQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb2JqID0gcGFyc2VGdW5jKHYpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczYuX2VtaXQoJ1Jlc3VsdCcsIHJvYmopO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnVE1QX1JFU1VMVCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9yb2JqID0gZXh0cmFjdFRtcCh2KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM2Ll9lbWl0KCdUbXBSZXN1bHQnLCBfcm9iaik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdTT1MnKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5fZW1pdCgnU09TJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdOT19EQVRBJykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczYuX2NhblJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM2Ll9lbWl0KCdOb0RhdGEnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ1JFSkVDVCcpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM2Ll9lbWl0KCdSZWplY3QnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ1RJTUVPVVQnKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5fZW1pdCgnVGltZW91dCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnVE9PX0xPTkcnKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5fZW1pdCgnVG9vTG9uZycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX3BhcnNlT25lYmVzdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcGFyc2VPbmViZXN0KG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9ialsxXTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX3BhcnNlTmJlc3QnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3BhcnNlTmJlc3Qob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqLnJlc3VsdDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX3BhcnNlQ29uZm5ldCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcGFyc2VDb25mbmV0KG9iaikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNlc3Npb247XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXNyO1xuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xudmFyIENvbm5lY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xudmFyIGV4YyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBUdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVHRzKGNvbmZpZywgYXV0aCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHRzKTtcblxuICAgICAgICB0aGlzLl9hdXRoID0gYXV0aDtcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLl91cmwgPSBVdGlsLmdldFJlY2FpdXNVcmwoY29uZmlnLnVybCwgY29uZmlnLnZlcnNpb24sICd0dHMnKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVHRzLCBbe1xuICAgICAgICBrZXk6ICdnZXRTb3VuZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTb3VuZChwYXJhbXMpIHtcbiAgICAgICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KCdsYW5nJykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCdsYW5nJykpO1xuICAgICAgICAgICAgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkoJ3NwZWFrZXJfaWQnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3NwZWFrZXJfaWQnKSk7XG5cbiAgICAgICAgICAgIGlmIChwYXJhbXMuaGFzT3duUHJvcGVydHkoJ3Bob25ldGljX3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdwaG9uZXRpY3RleHQyc3BlZWNod2F2ZScsIHsgcGFyYW1zOiBwYXJhbXMgfSwgZmFsc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgncGxhaW50ZXh0MnNwZWVjaHdhdmUnLCB7IHBhcmFtczogcGFyYW1zIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0UGhvbmV0aWNUZXh0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBob25ldGljVGV4dChwYXJhbXMpIHtcbiAgICAgICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KCdwbGFpbl90ZXh0JykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCdwbGFpbl90ZXh0JykpO1xuICAgICAgICAgICAgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkoJ2xhbmcnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ2xhbmcnKSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdwbGFpbnRleHQycGhvbmV0aWN0ZXh0JywgeyBwYXJhbXM6IHBhcmFtcyB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0U3BlYWtlcnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3BlYWtlcnMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnc3BlYWtlcnMnLCB7IG1ldGhvZDogJ0dFVCcgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldExleGljb25EaWN0TGlzdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMZXhpY29uRGljdExpc3QobGV4aWNvbklkKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndXNlcmxleGljb25zLyR7bGV4aWNvbklkfScsIHsgbWV0aG9kOiAnR0VUJywgcGFyYW1zOiBwYXJhbXMgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZUxleGljb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTGV4aWNvbihsZXhpY29uSWQpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd1c2VybGV4aWNvbnMvJHtsZXhpY29uSWR9JywgeyBtZXRob2Q6ICdQVVQnLCBwYXJhbXM6IHBhcmFtcyB9LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvcHlMZWNpeG9uV29yZHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29weUxlY2l4b25Xb3JkcyhsZXhpY29uSWQsIHBhcmFtcykge1xuICAgICAgICAgICAgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkoJ3VzZXJfbGFuZ19kaWNfaWQnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3VzZXJfbGFuZ19kaWNfaWQnKSk7XG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnZGVzdF91c2VyX2xhbmdfZGljX2lkJykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCdkZXN0X3VzZXJfbGFuZ19kaWNfaWQnKSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd1c2VybGV4aWNvbnMvY29weScsIHsgcGFyYW1zOiBwYXJhbXMgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldExleGljb25Xb3JkcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMZXhpY29uV29yZHMobGV4aWNvbklkKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsO1xuXG4gICAgICAgICAgICB2YXIgaXNKc29uID0gcGFyYW1zLnJlc3BvbnNlX3RpbWUgPT0gJ2JpbmFyeSc7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndXNlcmxleGljb25zLyR7bGV4aWNvbklkfS93b3JkcycsIHsgbWV0aG9kOiAnR0VUJywgcGFybWFzOiBwYXJhbXMgfSwgaXNKc29uKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGVsZXRlQWxsTGV4aWNvbldvcmRzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlbGV0ZUFsbExleGljb25Xb3JkcyhsZXhpY29uSWQpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd1c2VybGV4aWNvbnMvJHtsZXhpY29uSWR9L3dvcmRzJywgeyBtZXRob2Q6ICdERUxFVEUnLCBwYXJhbXM6IHBhcmFtcyB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYWRkV29yZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRXb3JkKGxleGljb25JZCwgcGFyYW1zKSB7XG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgndWxleCcpKSBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5SZXF1aXJlQXJndW1lbnRFcnJvcigndWxleCcpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ3VzZXJsZXhpY29ucy8ke2xleGljb25JZH0vd29yZHMnLCB7IG1ldGhvZDogJ1BVVCcsIHBhcmFtczogcGFyYW1zIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkZWxldGVXb3JkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlbGV0ZVdvcmQobGV4aWNvbklkLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KCd1bGV4JykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCd1bGV4JykpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndXNlcmxleGljb25zLyR7bGV4aWNvbklkfS93b3JkcycsIHsgbWV0aG9kOiAnUE9TVCcsIHBhcmFtczogcGFyYW1zIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRQcm9ncmVzcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQcm9ncmVzcyhsZXhpY29uSWQsIHBpZCkge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ3VzZXJsZXhpY29ucy8ke2xleGljb25JZH0vJHtwaWR9JywgeyBtZXRob2Q6ICdHRVQnLCBwYXJhbXM6IHBhcmFtcyB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX3JlcXVlc3QnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlcXVlc3QobmFtZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHJldHVybkpzb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHRydWU7XG5cbiAgICAgICAgICAgIHZhciB1cmwgPSBVdGlsLnVybEpvaW4odGhpcy5fdXJsLCBuYW1lKTtcbiAgICAgICAgICAgIHZhciBzZW5kT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICdYLVRva2VuJzogdGhpcy5fYXV0aC50b2tlbigpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm94eTogdGhpcy5fY29uZmlnLnByb3h5XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgbWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgJ1BPU1QnO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3BhcmFtcycpKSB7XG4gICAgICAgICAgICAgICAgc2VuZE9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMucGFyYW1zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJldHVybkpzb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29ubmVjdC5yZXF1ZXN0SnNvbih1cmwsIG1ldGhvZCwgc2VuZE9wdGlvbnMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29ubmVjdC5yZXF1ZXN0UmF3KHVybCwgbWV0aG9kLCBzZW5kT3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVHRzO1xufSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFR0cztcblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBDb25uZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcbnZhciBleGMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgTXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTXQoY29uZmlnLCBhdXRoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNdCk7XG5cbiAgICAgICAgdGhpcy5fYXV0aCA9IGF1dGg7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5fdXJsID0gVXRpbC5nZXRSZWNhaXVzVXJsKGNvbmZpZy51cmwsIGNvbmZpZy52ZXJzaW9uLCAnbXQnKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoTXQsIFt7XG4gICAgICAgIGtleTogJ3RyYW5zbGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFuc2xhdGUocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNsYXRlKHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FycmFuZ2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXJyYW5nZShwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcnJhbmdlKHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ190cmFuc2xhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3RyYW5zbGF0ZShwYXJhbXMpIHtcblxuICAgICAgICAgICAgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkoJ3F1ZXJ5JykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCdxdWVyeScpKTtcbiAgICAgICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KCdzcmNfbGFuZycpKSBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5SZXF1aXJlQXJndW1lbnRFcnJvcignc3JjX2xhbmcnKSk7XG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgndGd0X2xhbmcnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3RndF9sYW5nJykpO1xuICAgICAgICAgICAgLy8gb3B0aW9uYWxzXG4gICAgICAgICAgICBwYXJhbXMubW9kZSA9IHBhcmFtcy5tb2RlIHx8ICdzcG9rZW5fbGFuZ3VhZ2UnO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdEpzb24oJ3RyYW5zbGF0ZScsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19hcnJhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hcnJhbmdlKHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIHNyY19sYW5nID0gcGFyYW1zLnNyY19sYW5nIHx8IFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCdzcmNfbGFuZycpKTtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IHBhcmFtcy5xdWVyeSB8fCBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5SZXF1aXJlQXJndW1lbnRFcnJvcigncXVlcnknKSk7XG4gICAgICAgICAgICB2YXIgc2VuZFBhcmFtcyA9IHsgc3JjX2xhbmc6IHNyY19sYW5nLCBxdWVyeTogcXVlcnkgfTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3RKc29uKCdhcnJhbmdlJywgc2VuZFBhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19yZXF1ZXN0SnNvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVxdWVzdEpzb24obmFtZSwgcGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gVXRpbC51cmxKb2luKHRoaXMuX3VybCwgbmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gQ29ubmVjdC5yZXF1ZXN0SnNvbih1cmwsICdQT1NUJywge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgJ1gtVG9rZW4nOiB0aGlzLl9hdXRoLnRva2VuKClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBhcmFtcyksXG4gICAgICAgICAgICAgICAgcHJveHk6IHRoaXMuX2NvbmZpZy5wcm94eVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTXQ7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gTXQ7XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgQ29ubmVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG52YXIgZXhjID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIElpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJaXAoY29uZmlnLCBhdXRoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJaXApO1xuXG4gICAgICAgIHRoaXMuX2F1dGggPSBhdXRoO1xuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuX3VybCA9IFV0aWwuZ2V0UmVjYWl1c1VybChjb25maWcudXJsLCBjb25maWcudmVyc2lvbiwgJ2lpcCcpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhJaXAsIFt7XG4gICAgICAgIGtleTogJ2FkZERhdGFiYXNlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZERhdGFiYXNlKHVzZXIsIG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdkYXRhYmFzZXMnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnWC1Vc2VyJzogdXNlciB9LFxuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBkYm5hbWU6IG5hbWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0RGF0YWJhc2VzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGFiYXNlcyh1c2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnZGF0YWJhc2VzJywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnWC1Vc2VyJzogdXNlciB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGVsZXRlRGF0YWJhc2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlRGF0YWJhc2UodXNlciwgZGJpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ2RhdGFiYXNlcy8nICsgZGJpZCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnWC1Vc2VyJzogdXNlciB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0RGF0YWJhc2VQcm9wZXJ0eScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREYXRhYmFzZVByb3BlcnR5KHVzZXIsIGRiaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdkYXRhYmFzZXMvJyArIGRiaWQgKyAnL3Byb3BlcnRpZXMnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGVWb2NhYnVsYXJ5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVZvY2FidWxhcnkodXNlciwgZGJpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ2RhdGFiYXNlcy8nICsgZGJpZCArICcvZGljdGlvbmFyaWVzJywge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcnMnOiB1c2VyIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXREYXRhYmFzZUtleXdvcmRzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGFiYXNlS2V5d29yZHModXNlciwgZGJpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ2RhdGFiYXNlcy8nICsgZGJpZCArICcva2V5d29yZHMnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhZGREb2N1bWVudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGREb2N1bWVudCh1c2VyLCBkYmlkLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICAgICAgICBpZiAoIVV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnbmFtZScpKSBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5SZXF1aXJlQXJndW1lbnRFcnJvcignbmFtZScpKTtcblxuICAgICAgICAgICAgVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICd0ZXh0Jyk7XG4gICAgICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ2ZpbGUnKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2ZpbGUnKSkge1xuICAgICAgICAgICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnZmlsZW5hbWUnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIW9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCd0ZXh0IG9yIGZpbGUnKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnbGVuZ3RoJyk7XG4gICAgICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ3RhZ3MnKTtcbiAgICAgICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAndXJpJyk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdkYXRhYmFzZXMvJyArIGRiaWQsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyIH0sXG4gICAgICAgICAgICAgICAgZm9ybURhdGE6IG9wdGlvbnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmaW5kRG9jdW1lbnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmluZERvY3VtZW50KHVzZXIsIGRiaWQsIHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIGlmICghVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICdxdWVyeScpKSBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5SZXF1aXJlQXJndW1lbnRFcnJvcigncXVlcnknKSk7XG4gICAgICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ3R5cGUnKTtcbiAgICAgICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnY291bnQnKTtcbiAgICAgICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnbGVuZ3RoJyk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdkYXRhYmFzZXMvJyArIGRiaWQsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXIgfSxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IG9wdGlvbnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXREb2N1bWVudFByb3BlcnR5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERvY3VtZW50UHJvcGVydHkodXNlciwgZGJpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ2RhdGFiYXNlcy8nICsgZGJpZCArICcvcHJvcGVydGllcycsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXIgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RlbGV0ZURvY3VtZW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlbGV0ZURvY3VtZW50KHVzZXIsIGRiaWQsIGRvY2lkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnZGF0YWJhc2VzLycgKyBkYmlkICsgJy8nICsgZG9jaWQgKyAnLycsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXIgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZURvY3VtZW50UHJvcGVydHknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRG9jdW1lbnRQcm9wZXJ0eSh1c2VyLCBkYmlkLCBkb2NpZCwgcGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICduYW1lJyk7XG4gICAgICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ3RhZ3MnKTtcbiAgICAgICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAndXJpJyk7XG4gICAgICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ2xlbmd0aCcpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnZGF0YWJhc2VzLycgKyBkYmlkICsgJy8nICsgZG9jaWQgKyAnL3Byb3BlcnRpZXMnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyIH0sXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBvcHRpb25zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0RG9jdW1lbnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RG9jdW1lbnQodXNlciwgZGJpZCwgZG9jaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdkYXRhYmFzZXMvJyArIGRiaWQgKyAnLycgKyBkb2NpZCArICcvZmlsZScsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXIgfVxuICAgICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdleHRyYWN0RGF0YWJhc2VLZXl3b3JkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGV4dHJhY3REYXRhYmFzZUtleXdvcmQodXNlciwgZGJpZCwgcGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgaWYgKCFVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ3RleHQnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ25hbWUnKSk7XG4gICAgICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ2NvdW50Jyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnZGF0YWJhc2VzLycgKyBkYmlkICsgJy9zZWFyY2hfd29yZHMnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyIH0sXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBvcHRpb25zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0RG9jdW1lbnRLZXl3b3JkcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREb2N1bWVudEtleXdvcmRzKHVzZXIsIGRiaWQsIHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIGlmICghVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICdkb2NpZHMnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ2RvY2lkcycpKTtcbiAgICAgICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnY291bnQnKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCcvZGF0YWJhc2VzLycgKyBkYmlkICsgJy9kb2N1bWVudHMvc3BlY2lmaWNfd29yZHMnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyIH0sXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBvcHRpb25zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndG9rZW5pemVUZXh0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRva2VuaXplVGV4dCh1c2VyLCB0ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnL3RleHRzL3Rva2VucycsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXIgfSxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRUZXh0SW1wb3J0YW5jZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUZXh0SW1wb3J0YW5jZSh1c2VyLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ3RleHQnKTtcbiAgICAgICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnc2VudGVuY2VzJyk7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3RleHQnKSAmJiAhb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnc2VudGVuY2VzJykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCd0ZXh0IG9yIHNlbnRlbmNlcycpKTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCd0ZXh0JykgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnc2VudGVuY2VzJykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCdzZXQganVzdCBvbmUgcGFyYW1ldGVyOiB0ZXh0IG9yIHNlbnRlbmNlcycpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCcvdGV4dHMvcmFua3MnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyIH0sXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBvcHRpb25zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZXh0cmFjdEtleXdvcmQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXh0cmFjdEtleXdvcmQodXNlciwgcGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgaWYgKCFVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ3RleHQnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3RleHQnKSk7XG4gICAgICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ2NvdW50Jyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnL3RleHRzL2tleXdvcmRzJywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnWC1Vc2VyJzogdXNlciB9LFxuICAgICAgICAgICAgICAgIHBhcmFtczogb3B0aW9uc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19yZXF1ZXN0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXF1ZXN0KG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciByZXR1cm5Kc29uID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gVXRpbC51cmxKb2luKHRoaXMuX3VybCwgbmFtZSk7XG4gICAgICAgICAgICB2YXIgc2VuZE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAnWC1Ub2tlbic6IHRoaXMuX2F1dGgudG9rZW4oKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJveHk6IHRoaXMuX2NvbmZpZy5wcm94eVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSBvcHRpb25zLm1ldGhvZCB8fCAnUE9TVCc7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgncGFyYW1zJykpIHtcbiAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09ICdQT1NUJyB8fCBtZXRob2QgPT0gJ1BVVCcpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZE9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMucGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZW5kT3B0aW9ucy5xcyA9IG9wdGlvbnMucGFyYW1zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnZm9ybURhdGEnKSkge1xuICAgICAgICAgICAgICAgIHNlbmRPcHRpb25zLmZvcm1EYXRhID0gb3B0aW9ucy5mb3JtRGF0YTtcbiAgICAgICAgICAgICAgICBzZW5kT3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2hlYWRlcnMnKSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICBzZW5kT3B0aW9ucy5oZWFkZXJzW3hdID0gb3B0aW9ucy5oZWFkZXJzW3hdO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmV0dXJuSnNvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBDb25uZWN0LnJlcXVlc3RKc29uKHVybCwgbWV0aG9kLCBzZW5kT3B0aW9ucyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBDb25uZWN0LnJlcXVlc3RSYXcodXJsLCBtZXRob2QsIHNlbmRPcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBJaXA7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gSWlwO1xuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fd2VicGFja19leHBvcnRzX18sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGltbXV0YWJsZSkgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImdldE1pY1wiXSA9IGdldE1pYztcbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBNaWNyb3Bob25lID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBNaWNyb3Bob25lKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNaWNyb3Bob25lKTtcblxuICAgIHRoaXMuYnVmZmVyU2l6ZSA9IDA7XG4gICAgdGhpcy5jb250ZXh0XyA9IG51bGw7XG4gICAgdGhpcy5zb3VyY2VfID0gbnVsbDtcbiAgICB0aGlzLnNjcmlwdFByb2Nlc3Nvcl8gPSBudWxsO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE1pY3JvcGhvbmUsIFt7XG4gICAga2V5OiBcInNldE1lZGlhX1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRNZWRpYV8oKSB7XG4gICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLmdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLm1zR2V0VXNlck1lZGlhO1xuICAgICAgd2luZG93LkF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3RvcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGV4dF8uc3VzcGVuZCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzdGFydFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRleHRfLnJlc3VtZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzYW1wbGVSYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNhbXBsZVJhdGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0Xy5zYW1wbGVSYXRlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRNaWNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWljKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdGhpcy5zZXRNZWRpYV8oKTtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmICghbmF2aWdhdG9yLmdldFVzZXJNZWRpYSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwibm8gbWVkaWFcIik7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoXCJZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBtZWRpYSBBUElcIikpO1xuICAgICAgICB9XG4gICAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEoe1xuICAgICAgICAgIHZpZGVvOiBmYWxzZSxcbiAgICAgICAgICBhdWRpbzogdHJ1ZVxuICAgICAgICB9LCBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJnb3QgYXVkaW9cIik7XG4gICAgICAgICAgX3RoaXMuY29udGV4dF8gPSBuZXcgQXVkaW9Db250ZXh0KCk7XG4gICAgICAgICAgX3RoaXMuc291cmNlXyA9IF90aGlzLmNvbnRleHRfLmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHN0cmVhbSk7XG4gICAgICAgICAgX3RoaXMuc2NyaXB0UHJvY2Vzc29yXyA9IF90aGlzLmNvbnRleHRfLmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihfdGhpcy5idWZmZXJTaXplLCAxLCAxKTtcbiAgICAgICAgICBfdGhpcy5zY3JpcHRQcm9jZXNzb3JfLm9uYXVkaW9wcm9jZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucHJvY2Vzc0lucHV0XyhldmVudCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBfdGhpcy5zb3VyY2VfLmNvbm5lY3QoX3RoaXMuc2NyaXB0UHJvY2Vzc29yXyk7XG4gICAgICAgICAgX3RoaXMuc2NyaXB0UHJvY2Vzc29yXy5jb25uZWN0KF90aGlzLmNvbnRleHRfLmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICBfdGhpcy5jb250ZXh0Xy5zdXNwZW5kKCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJHZXQgbWljOiB0aGUgZm9sbG93aW5nIGVycm9yIG9jY3VyZWQ6IFwiICsgZXJyKTtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25JbnB1dFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KGJ1ZmZlcikge1xuICAgICAgY29uc29sZS5sb2coXCJjYWxsIG9uSW5wdXRcIik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInByb2Nlc3NJbnB1dF9cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc0lucHV0XyhldmVudCkge1xuICAgICAgdGhpcy5vbklucHV0KGV2ZW50LmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKDApKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTWljcm9waG9uZTtcbn0oKTtcblxuZnVuY3Rpb24gZ2V0TWljKCkge1xuICB2YXIgbWljID0gbmV3IE1pY3JvcGhvbmUoKTtcbiAgcmV0dXJuIG1pYy5nZXRNaWMoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbWljO1xuICB9KTtcbn1cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyByZWNhaXVzLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMzIxYjdkZjMzYTc1M2MzMTEyMjQiLCIndXNlIHN0cmljdCdcblxuY29uc3QgZXhjZXB0aW9uID0gcmVxdWlyZSgnLi9leGNlcHRpb24nKTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAvLy8gam9pbiB0d28gcGF0aCB3aXRoIHNsYXNoXG4gICAgdXJsSm9pbjogZnVuY3Rpb24ocDEsIHAyKSB7XG4gICAgICAgIHJldHVybiBwMS5yZXBsYWNlKC9cXC97MSx9JC8sIFwiXCIpICsgXCIvXCIgKyBwMi5yZXBsYWNlKC9eXFwvezEsfS8sIFwiXCIpXG4gICAgfSxcblxuICAgIGdldFJlY2FpdXNVcmw6IGZ1bmN0aW9uKGJhc2UsIHZlcnNpb24sIGtpbmQpIHtcbiAgICAgICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzLnVybEpvaW4oYmFzZSwga2luZCkgKyBgLyR7dmVyc2lvbn1gXG4gICAgfSxcblxuICAgIC8vLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEyMjEwMi93aGF0LWlzLXRoZS1tb3N0LWVmZmljaWVudC13YXktdG8tZGVlcC1jbG9uZS1hbi1vYmplY3QtaW4tamF2YXNjcmlwdFxuICAgIGNsb25lOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Yob2JqKSAhPT0gJ29iamVjdCcgfHwgJ2lzQWN0aXZlQ2xvbmUnIGluIG9iailcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG5cbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIERhdGUpXG4gICAgICAgICAgICB2YXIgdGVtcCA9IG5ldyBvYmouY29uc3RydWN0b3IoKTsgLy9vciBuZXcgRGF0ZShvYmopO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB2YXIgdGVtcCA9IG9iai5jb25zdHJ1Y3RvcigpO1xuXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgb2JqWydpc0FjdGl2ZUNsb25lJ10gPSBudWxsO1xuICAgICAgICAgICAgICAgIHRlbXBba2V5XSA9IG1vZHVsZS5leHBvcnRzLmNsb25lKG9ialtrZXldKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgb2JqWydpc0FjdGl2ZUNsb25lJ107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgfSxcblxuICAgIHRocm93RXJyb3I6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICB0aHJvdyBvYmpcbiAgICB9LFxuXG4gICAgLy8vIHR5cGVkQXJyYXnjga7jg5Djg4Pjg5XjgqHjgpLlhbHmnInjgZnjgovmlrDjgZfjgYRWaWV344KS6L+U44GZ44CCXG4gICAgdHlwZWRBcnJheVZpZXc6IGZ1bmN0aW9uKGFyciwgc3RhcnQsIGxlbmd0aCkge1xuICAgICAgICBpZihsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBhcnIuY29uc3RydWN0b3IoYXJyLmJ1ZmZlciwgYXJyLkJZVEVTX1BFUl9FTEVNRU5UICogc3RhcnQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGFyci5jb25zdHJ1Y3RvcihhcnIuYnVmZmVyLCBhcnIuQllURVNfUEVSX0VMRU1FTlQgKiBzdGFydCwgbGVuZ3RoKVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8vLyByZXR1cm4gdHJ1ZSBpZiBjb3BpZWRcbiAgICBjb3B5SXRlbUlmUHJlc2VudDogZnVuY3Rpb24oZnJvbU9iaiwgdG9PYmosIGtleSkge1xuICAgICAgICBpZihmcm9tT2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHRvT2JqW2tleV0gPSBmcm9tT2JqW2tleV1cbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSxcblxuICAgIHdhaXRGb3I6IGZ1bmN0aW9uKGNvbmRpdGlvbiwgbj0wKSB7XG4gICAgICAgIGxldCB3YWl0SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29uZGl0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHdhaXRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIG4pXG4gICAgfSxcblxuICAgIHNsZWVwOiBmdW5jdGlvbihpbnRlcnZhbCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKCksIGludGVydmFsKVxuICAgICAgICB9KVxuICAgIH0sXG5cbiAgICB3aXRoVGltZW91dDogZnVuY3Rpb24ocHJvbWlzZSwgbXNlYykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgIHByb21pc2UsXG4gICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgZXhjZXB0aW9uLlRpbWVvdXRFcnJvcihtc2VjKSksIG1zZWMpKVxuICAgICAgICBdKTtcbiAgICB9LFxuXG4gICAgZG93bmxvYWRCdWZmZXI6IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgICBsZXQgZW5jb2RlZERhdGEgPSB0aGlzLmVuY29kZVdBVihidWZmZXIpXG4gICAgICAgICAgICAvLyBsZXQgZW5jb2RlZERhdGEgPSB0aGlzLmVuY29kZVdBVihuZXcgSW50MTZBcnJheShkYXRhKSlcbiAgICAgICAgbGV0IHdhdkJsb2IgPSBuZXcgQmxvYihbZW5jb2RlZERhdGFdLCB7XG4gICAgICAgICAgICB0eXBlOiAnYXVkaW8vd2F2J1xuICAgICAgICB9KVxuICAgICAgICBmb3JjZURvd25sb2FkKHdhdkJsb2IsIFwib3V0LndhdlwiKVxuICAgIH0sXG5cbiAgICBmb3JjZURvd25sb2FkOiBmdW5jdGlvbihibG9iLCBmaWxlbmFtZSkge1xuICAgICAgICBsZXQgdXJsID0gKHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTClcbiAgICAgICAgICAgIC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgIGxldCBsaW5rID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgbGluay5ocmVmID0gdXJsO1xuICAgICAgICBsaW5rLmRvd25sb2FkID0gZmlsZW5hbWUgfHwgJ291dHB1dC53YXYnO1xuICAgICAgICBsZXQgY2xpY2sgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO1xuICAgICAgICBjbGljay5pbml0RXZlbnQoXCJjbGlja1wiLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgbGluay5kaXNwYXRjaEV2ZW50KGNsaWNrKTtcbiAgICB9LFxuXG4gICAgZmxvYXRUbzE2Qml0UENNOiBmdW5jdGlvbihvdXRwdXQsIG9mZnNldCwgaW5wdXQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKywgb2Zmc2V0ICs9IDIpIHtcbiAgICAgICAgICAgIGxldCBzID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKDEsIGlucHV0W2ldKSk7XG4gICAgICAgICAgICBvdXRwdXQuc2V0SW50MTYob2Zmc2V0LCBzIDwgMCA/IHMgKiAweDgwMDAgOiBzICogMHg3RkZGLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB3cml0ZVN0cmluZzogZnVuY3Rpb24odmlldywgb2Zmc2V0LCBzdHJpbmcpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0ICsgaSwgc3RyaW5nLmNoYXJDb2RlQXQoaSkpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGVuY29kZVdhdjogZnVuY3Rpb24oc2FtcGxlcykge1xuICAgICAgICBsZXQgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDQ0ICsgc2FtcGxlcy5sZW5ndGggKiAyKTtcbiAgICAgICAgbGV0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICAgICAgbGV0IG51bUNoYW5uZWxzID0gMVxuICAgICAgICBsZXQgc2FtcGxlUmF0ZSA9IDE2MDAwXG5cbiAgICAgICAgLy8gSGVhZGVyIDEyIGJ5dGVzXG4gICAgICAgIC8qIFJJRkYgaWRlbnRpZmllciAqL1xuICAgICAgICB0aGlzLndyaXRlU3RyaW5nKHZpZXcsIDAsICdSSUZGJyk7XG4gICAgICAgIC8qIFJJRkYgY2h1bmsgbGVuZ3RoICovXG4gICAgICAgIHZpZXcuc2V0VWludDMyKDQsIDM2ICsgc2FtcGxlcy5sZW5ndGggKiAyLCB0cnVlKTtcbiAgICAgICAgLyogUklGRiB0eXBlICovXG4gICAgICAgIHRoaXMud3JpdGVTdHJpbmcodmlldywgOCwgJ1dBVkUnKTtcblxuICAgICAgICAvLyBmbXQgMjQgYnl0ZVxuICAgICAgICAvKiBmb3JtYXQgY2h1bmsgaWRlbnRpZmllciAqL1xuICAgICAgICB0aGlzLndyaXRlU3RyaW5nKHZpZXcsIDEyLCAnZm10ICcpO1xuICAgICAgICAvKiBmb3JtYXQgY2h1bmsgbGVuZ3RoICovXG4gICAgICAgIHZpZXcuc2V0VWludDMyKDE2LCAxNiwgdHJ1ZSk7XG4gICAgICAgIC8qIHNhbXBsZSBmb3JtYXQgKHJhdykgKi9cbiAgICAgICAgdmlldy5zZXRVaW50MTYoMjAsIDEsIHRydWUpO1xuICAgICAgICAvKiBjaGFubmVsIGNvdW50ICovXG4gICAgICAgIHZpZXcuc2V0VWludDE2KDIyLCBudW1DaGFubmVscywgdHJ1ZSk7XG4gICAgICAgIC8qIHNhbXBsZSByYXRlICovXG4gICAgICAgIHZpZXcuc2V0VWludDMyKDI0LCBzYW1wbGVSYXRlLCB0cnVlKTtcbiAgICAgICAgLyogYnl0ZSByYXRlIChzYW1wbGUgcmF0ZSAqIGJsb2NrIGFsaWduKSAqL1xuICAgICAgICB2aWV3LnNldFVpbnQzMigyOCwgc2FtcGxlUmF0ZSAqIG51bUNoYW5uZWxzICogMiwgdHJ1ZSk7XG4gICAgICAgIC8qIGJsb2NrIGFsaWduIChjaGFubmVsIGNvdW50ICogYnl0ZXMgcGVyIHNhbXBsZSkgKi9cbiAgICAgICAgdmlldy5zZXRVaW50MTYoMzIsIG51bUNoYW5uZWxzICogMiwgdHJ1ZSk7XG4gICAgICAgIC8qIGJpdHMgcGVyIHNhbXBsZSAqL1xuICAgICAgICB2aWV3LnNldFVpbnQxNigzNCwgMTYsIHRydWUpO1xuXG4gICAgICAgIC8qIGRhdGEgY2h1bmsgaWRlbnRpZmllciAqL1xuICAgICAgICB0aGlzLndyaXRlU3RyaW5nKHZpZXcsIDM2LCAnZGF0YScpO1xuICAgICAgICAvKiBkYXRhIGNodW5rIGxlbmd0aCAqL1xuICAgICAgICB2aWV3LnNldFVpbnQzMig0MCwgc2FtcGxlcy5sZW5ndGggKiAyLCB0cnVlKTtcblxuICAgICAgICB0aGlzLmZsb2F0VG8xNkJpdFBDTSh2aWV3LCA0NCwgc2FtcGxlcyk7XG5cbiAgICAgICAgcmV0dXJuIHZpZXc7XG4gICAgfSxcblxuICAgIHBhcnNlV2F2KGRhdGEpIHtcbiAgICAgICAgbGV0IHZpZXdcbiAgICAgICAgaWYoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyKVxuICAgICAgICB9XG4gICAgICAgIC8vIEhlYWRlciAxMiBieXRlc1xuICAgICAgICAvKiBSSUZGIGlkZW50aWZpZXIgKi9cbiAgICAgICAgaWYodmlldy5nZXRVaW50MzIoMCwgdHJ1ZSkgIT0gMHg0NjQ2NDk1MikgeyAgLy8gPT0gJ1JJRkYnXG4gICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ05vdCBhIHdhdmUgZm9ybWF0JylcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFJJRkYgdHlwZSAqL1xuICAgICAgICBpZih2aWV3LmdldFVpbnQzMig4LCB0cnVlKSAhPSAweDQ1NTY0MTU3KSB7ICAvLyA9PSAnV0FWRSdcbiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcignTm90IGEgd2F2ZSBmb3JtYXQnKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZm10IDI0IGJ5dGVcbiAgICAgICAgLyogZm9ybWF0IGNodW5rIGlkZW50aWZpZXIgKi9cbiAgICAgICAgaWYodmlldy5nZXRVaW50MzIoMTIsIHRydWUpICE9IDB4MjA3NDZkNjYpIHsgIC8vID09ICdmbXQgJ1xuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdOb3QgYSB3YXZlIGZvcm1hdCcpXG4gICAgICAgIH1cblxuICAgICAgICAvKiBmb3JtYXQgY2h1bmsgbGVuZ3RoICovXG4gICAgICAgIGxldCBjaHVua1NpemUgPSB2aWV3LmdldFVpbnQzMigxNiwgdHJ1ZSlcbiAgICAgICAgLyogY2hhbm5lbCBjb3VudCAqL1xuICAgICAgICBsZXQgY2hhbm5lbE51bSA9IHZpZXcuZ2V0VWludDE2KDIyLCB0cnVlKVxuICAgICAgICAvKiBzYW1wbGUgcmF0ZSAqL1xuICAgICAgICBsZXQgc2FtcGxlUmF0ZSA9IHZpZXcuZ2V0VWludDMyKDI0LCB0cnVlKVxuICAgICAgICAvKiBieXRlIHJhdGUgcGVyIHNlYyAqL1xuICAgICAgICBsZXQgYnl0ZVBlclNlYyA9IHZpZXcuZ2V0VWludDMyKDI4LCB0cnVlKVxuICAgICAgICAvKiBibG9jayBhbGlnbiAoY2hhbm5lbCBjb3VudCAqIGJ5dGVzIHBlciBzYW1wbGUpICovXG4gICAgICAgIGxldCBibG9ja0FsaWduID0gdmlldy5nZXRVaW50MTYoMzIsIHRydWUpXG4gICAgICAgIC8qIGJpdHMgcGVyIHNhbXBsZSAqL1xuICAgICAgICBsZXQgYml0c1dpZHRoID0gdmlldy5nZXRVaW50MTYoMzQsIHRydWUpXG5cbiAgICAgICAgbGV0IGRhdGFTdGFydCA9IDE2ICsgY2h1bmtTaXplICsgOFxuXG4gICAgICAgIGxldCByb2JqID0ge2NoYW5uZWxOdW06IGNoYW5uZWxOdW0sIHNhbXBsZVJhdGU6IHNhbXBsZVJhdGV9XG5cbiAgICAgICAgcm9iai5kYXRhID0gbmV3IEludDE2QXJyYXkodmlldy5idWZmZXIsIGRhdGFTdGFydClcblxuICAgICAgICBpZihiaXRzV2lkdGggPT0gMTYpIHtcbiAgICAgICAgICAgIHJvYmoudHlwZSA9ICdsaW5lYXInXG4gICAgICAgICAgICBpZihjaGFubmVsTnVtID09IDIpIHtcbiAgICAgICAgICAgICAgICByb2JqLmRhdGEgPSBtb2R1bGUuZXhwb3J0cy5jb252ZXJ0U3RlcmVvVG9Nb25vcmFsKHJvYmouZGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmKGJpdHNXaWR0aCA9PSA0KSB7XG4gICAgICAgICAgICByb2JqLnR5cGUgPT0gJ2FkcGNtJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcm9iai50eXBlID09ICd1bmtub3duJ1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvYmpcbiAgICB9LFxuXG4gICAgY29udmVydFN0ZXJlb1RvTW9ub3JhbChkYXRhKSB7XG4gICAgICAgIGxldCBuZXdCdWZmZXIgPSBuZXcgSW50MTZBcnJheShkYXRhLmxlbmd0aCAvIDIpXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBuZXdCdWZmZXJbaV0gPSBkYXRhW2ldICsgZGF0YVtpICsgMV0gLyAyXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0J1ZmZlclxuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2xpYi91dGlsLmpzIiwiJ3VzZSBzdHJpY3QnXG5cbmNsYXNzIE5lZWRMb2dpbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdOZWVkIGxvZ2luJ1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ05lZWRMb2dpbkVycm9yJztcbiAgICB9XG59XG5jbGFzcyBSZXF1aXJlQXJndW1lbnRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcihtc2cpIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBgUmVxdWlyZSBhcmd1bWVudDogJHttc2d9YFxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ1JlcXVpcmVBcmd1bWVudEVycm9yJztcbiAgICB9XG59XG5cbmNsYXNzIE5vdFN0YXJ0ZWRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnQVNSIG5vdCBzdGFydGVkJ1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdFN0YXJ0ZWRFcnJvcic7XG4gICAgfVxufVxuXG5jbGFzcyBUaW1lb3V0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gJ1RpbWVvdXQnXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLm5hbWUgPSAnVGltZW91dEVycm9yJztcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIE5lZWRMb2dpbkVycm9yOiBOZWVkTG9naW5FcnJvcixcbiAgICBSZXF1aXJlQXJndW1lbnRFcnJvcjogUmVxdWlyZUFyZ3VtZW50RXJyb3IsXG4gICAgTm90U3RhcnRlZEVycm9yOiBOb3RTdGFydGVkRXJyb3IsXG4gICAgVGltZW91dEVycm9yOiBUaW1lb3V0RXJyb3Jcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2xpYi9leGNlcHRpb24uanMiLCIvLyBJZiBOb2RlLmpzLCB3ZSBqdXN0IHVzZSByZXF1ZXN0IGxpYnJhcnlcbmNvbnN0IFV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKVxubGV0IHJlcXVlc3RMaWIgPSB1bmRlZmluZWRcblxudHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0TGliID0gcmVxdWlyZSgncmVxdWVzdCcpXG59IGNhdGNoKGUpIHtcbmBgfVxuXG5mdW5jdGlvbiByZXF1ZXN0QnJvd3Nlcih1cmwsIG1ldGhvZCwgaXNfYmluYXJ5LCBvcHRpb25zKSB7XG4gICAgbGV0IHBhcmFtcyA9IHttZXRob2Q6IG1ldGhvZCwgaGVhZGVyczoge319XG4gICAgaWYob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaGVhZGVycycpKSBwYXJhbXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVyc1xuICAgIGlmKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2pzb24nKSkge1xuICAgICAgICBwYXJhbXMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuanNvbilcbiAgICAgICAgcGFyYW1zLmhlYWRlcnNbJ0NvbnRlbnQtdHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnXG4gICAgfSBlbHNlIGlmKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2JvZHknKSkge1xuICAgICAgICBwYXJhbXMuYm9keSA9IG9wdGlvbnMuYm9keVxuICAgIH0gZWxzZSBpZihvcHRpb25zLmhhc093blByb3BlcnR5KCdmb3JtRGF0YScpKSB7XG4gICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpXG4gICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMuZm9ybURhdGEpLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICBpZihvcHRpb25zLmZvcm1EYXRhW3hdIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCh4LCBuZXcgQmxvYihbb3B0aW9ucy5mb3JtRGF0YVt4XV0pKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoeCwgb3B0aW9ucy5mb3JtRGF0YVt4XSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcGFyYW1zLmJvZHkgPSBmb3JtRGF0YVxuICAgIH0gZWxzZSBpZihvcHRpb25zLmhhc093blByb3BlcnR5KCdxcycpKSB7XG4gICAgICAgIGxldCB1cmwgPSBuZXcgVVJMKHVybClcbiAgICAgICAgT2JqZWN0LmtleXMob3B0aW9ucy5xcykuZm9yRWFjaCh4ID0+IHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKHgsIG9wdGlvbnMucXNbeF0pKVxuICAgIH1cblxuICAgIGlmKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3RpbWVvdXQnKSkge1xuICAgICAgICByZXR1cm4gVXRpbC53aXRoVGltZW91dChmZXRjaCh1cmwsIHBhcmFtcyksIG9wdGlvbnMudGltZW91dClcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmV0Y2godXJsLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZCA9PiBQcm9taXNlLnJlamVjdCh7c3RhdHVzOiByZXNwb25zZS5zdGF0dXMsIGRhdGE6IGR9KSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKGlzX2JpbmFyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuYXJyYXlCdWZmZXIoKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4odCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHQpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihkID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge3N0YXR1czogcmVzcG9uc2Uuc3RhdHVzLCBkYXRhOiBkfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIHJlcXVlc3RKc29uOiBmdW5jdGlvbih1cmwsIG1ldGhvZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHMucmVxdWVzdCh1cmwsIG1ldGhvZCwgZmFsc2UsIG9wdGlvbnMpLnRoZW4ociA9PiByLmRhdGEpXG4gICAgfSxcblxuICAgIHJlcXVlc3RSYXc6IGZ1bmN0aW9uKHVybCwgbWV0aG9kLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBtb2R1bGUuZXhwb3J0cy5yZXF1ZXN0KHVybCwgbWV0aG9kLCB0cnVlLCBvcHRpb25zKS50aGVuKHIgPT4gci5kYXRhKVxuICAgIH0sXG5cbiAgICByZXF1ZXN0OiBmdW5jdGlvbih1cmwsIG1ldGhvZCwgaXNfYmluYXJ5LCBvcHRpb25zKSB7XG4gICAgICAgIGlmKHJlcXVlc3RMaWIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RCcm93c2VyKHVybCwgbWV0aG9kLCBpc19iaW5hcnksIG9wdGlvbnMpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7IHVybDogdXJsLCBtZXRob2Q6IG1ldGhvZCB9XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChrZXkgPT4gcGFyYW1zW2tleV0gPSBvcHRpb25zW2tleV0pXG5cbiAgICAgICAgICAgICAgICBpZihpc19iaW5hcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmVuY29kaW5nID0gbnVsbCAvLyByZXNwb25zZSBib2R5IGJlY29tZXMgQnVmZmVyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcXVlc3RMaWIocGFyYW1zLCAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCByb2JqID0ge3N0YXR1czogcmVzcG9uc2Uuc3RhdHVzQ29kZX1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvYmouc3RhdHVzID49IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2JqLmRldGFpbCA9IEpTT04ucGFyc2UoYm9keSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvYmouZGV0YWlsID0gYm9keVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJvYmopXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoaXNfYmluYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb2JqLmRhdGEgPSBib2R5XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihib2R5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2JqLmRhdGEgPSBKU09OLnBhcnNlKGJvZHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddLmluZGV4T2YoJ3RleHQnKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2JqLmRhdGEgPSBib2R5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvYmouZGF0YSA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJvYmopXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbGliL2Nvbm5lY3QuanMiLCIndXNlIHN0cmljdCdcblxuLy8gbW9kdWxlc1xuY29uc3QgQXV0aCA9IHJlcXVpcmUoJy4vYXV0aCcpXG5jb25zdCBBc3IgPSByZXF1aXJlKCcuL2FzcicpXG5jb25zdCBUdHMgPSByZXF1aXJlKCcuL3R0cycpXG5jb25zdCBNdCA9IHJlcXVpcmUoJy4vbXQnKVxuY29uc3QgSWlwID0gcmVxdWlyZSgnLi9paXAnKVxuY29uc3QgTWljID0gcmVxdWlyZSgnLi9taWMnKVxuXG4vLyBvdGhlcnNcbmNvbnN0IFV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKVxuY29uc3QgZXhjZXB0aW9uID0gcmVxdWlyZSgnLi9leGNlcHRpb24nKVxuXG5jb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICAgIC8vIHVybCBnbG9iYWxseSBzZXRcbiAgICB1cmw6ICdodHRwczovL2FwaS5yZWNhaXVzLmpwLycsXG4gICAgdmVyc2lvbjogJ3YyJyxcbiAgICBwcm94eTogdW5kZWZpbmVkLFxuICAgIGF1dGg6IHt9LFxuICAgIGFzcjoge30sXG4gICAgdHRzOiB7fSxcbiAgICBtdDoge30sXG4gICAgaWlwOiB7fSxcbn1cblxuY2xhc3MgUmVjYWl1cyB7XG4gICAgLy8vIOOCiOOBj+S9v+OBhumgheebruOBr+OCquODl+OCt+ODp+ODs+W8leaVsOOBp+aMh+WumuOBp+OBjeOCi+OCiOOBhuOBq+OBmeOCi1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZz17fSwgYWRkaXRpb25hbF9jb25maWc9e30pIHtcbiAgICAgICAgLy8gVE9ETzogdmFsaWRhdGlvblxuICAgICAgICB0aGlzLl9jb25maWcgPSB0aGlzLnJlYWRDb25maWcoY29uZmlnLCBhZGRpdGlvbmFsX2NvbmZpZylcblxuICAgICAgICAvLyBkZWxlZ2F0ZWQgb2JqZWN0c1xuICAgICAgICB0aGlzLmF1dGggPSBuZXcgQXV0aCh0aGlzLl9jb25maWcpXG5cbiAgICAgICAgLy8gdGhpcy5zcGVlY2ggPSBuZXcgU3BlZWNoKHRoaXMuX2NvbmZpZy5zcGVlY2gsIHRoaXMuYXV0aClcbiAgICAgICAgdGhpcy50dHMgPSBuZXcgVHRzKHRoaXMuX2NvbmZpZywgdGhpcy5hdXRoKVxuICAgICAgICB0aGlzLm10ID0gbmV3IE10KHRoaXMuX2NvbmZpZywgdGhpcy5hdXRoKVxuICAgICAgICB0aGlzLmFzciA9IG5ldyBBc3IodGhpcy5fY29uZmlnLCB0aGlzLmF1dGgpXG4gICAgICAgIHRoaXMuaWlwID0gbmV3IElpcCh0aGlzLl9jb25maWcsIHRoaXMuYXV0aClcblxuICAgICAgICB0aGlzLmdldE1pYyA9IE1pYy5nZXRNaWNcblxuICAgICAgICAvLyBwdWJsaWMgZXhjZXB0aW9uXG4gICAgICAgIHRoaXMuZXhjZXB0aW9ucyA9IGV4Y2VwdGlvblxuICAgIH1cblxuXG4gICAgcmVhZENvbmZpZyhjLCBhYykge1xuICAgICAgICBsZXQgY29uZmlnID0gVXRpbC5jbG9uZShkZWZhdWx0Q29uZmlnKVxuICAgICAgICAvLyDjgb7jgovjgZTjgajkuIrmm7jjgY3jgILntLDjgYvjgYToqr/mlbTjga/nhKHjgZdcbiAgICAgICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBpZihjLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBjb25maWdba2V5XSA9IFV0aWwuY2xvbmUoY1trZXldKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmKGFjLmV4cGlyZV9zZWMgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uZmlnLmF1dGguZXhwaXJ5X3NlYyA9IGFjLmV4cGlyZV9zZWM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29uZmlnXG4gICAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVjYWl1c1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbGliL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IFV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKVxuY29uc3QgQ29ubmVjdCA9IHJlcXVpcmUoJy4vY29ubmVjdCcpXG5jb25zdCBleGMgPSByZXF1aXJlKCcuL2V4Y2VwdGlvbicpXG5cbmNsYXNzIEF1dGgge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB0aGlzLl90b2tlbiA9IG51bGxcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnXG4gICAgICAgIHRoaXMuX3VybCA9IFV0aWwuZ2V0UmVjYWl1c1VybChjb25maWcudXJsLCBjb25maWcudmVyc2lvbiwgJ2F1dGgnKVxuICAgICAgICB0aGlzLl9sYXN0TG9naW4gPSBudWxsXG4gICAgICAgIHRoaXMuX2V4cGlyZSA9IG51bGxcbiAgICB9XG5cbiAgICBzZXRDb25maWcoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuX3BhcmFtcyA9IGNvbmZpZ1xuICAgIH1cblxuICAgIGxvZ2luKCkge1xuICAgICAgICBsZXQgdXJsID0gVXRpbC51cmxKb2luKHRoaXMuX3VybCwgJ3Rva2VucycpXG4gICAgICAgIGxldCBwYXJhbXMgPSB0aGlzLl9jb25maWcuYXV0aFxuXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0SnNvbih1cmwsICdQT1NUJywgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSlcbiAgICAgICAgICAgIC50aGVuKGogPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Rva2VuID0gai50b2tlblxuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RMb2dpbiA9IERhdGUubm93KClcbiAgICAgICAgICAgICAgICB0aGlzLl9leHBpcmUgPSBqLmV4cGlyeV9zZWMgKiAxMDAwIC8vIHRvIG1zZWNcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgbG9nb3V0KCkge1xuICAgICAgICBsZXQgdXJsID0gVXRpbC51cmxKb2luKHRoaXMuX3VybCwgJ3Rva2VucycpXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0SnNvbih1cmwsICdERUxFVEUnLCBudWxsLCB0aGlzLnRva2VuKGZhbHNlKSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl90b2tlbiA9IG51bGxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBzdHJpY3Q9ZmFsc2U6IF90b2tlbuOBruWtmOWcqOOBruOBv+OCkuODgeOCp+ODg+OCr+OBmeOCi1xuICAgIC8vIHN0cmljdD10cnVlOiDmnInlirnmnJ/pmZDjgYzliIfjgozjgZ3jgYbjgarloLTlkIjjgafjgoLjgqjjg6njg7zjgavjgZnjgotcbiAgICB0b2tlbihzdHJpY3Q9dHJ1ZSkge1xuICAgICAgICBpZiAodGhpcy5fdG9rZW4gPT09IG51bGwgfHwgKHN0cmljdCAmJiB0aGlzLm5lZWRMb2dpbigpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGV4Yy5OZWVkTG9naW5FcnJvcigpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rva2VuXG4gICAgfVxuXG4gICAgbmVlZExvZ2luKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3Rva2VuIHx8ICF0aGlzLl9sYXN0TG9naW4pIHJldHVybiB0cnVlO1xuICAgICAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgLy8gTm90aWZ5IDMwW3NlY10gYmVmb3JlIGV4cGlyaW5nXG4gICAgICAgIGlmICh0aGlzLl9sYXN0TG9naW4gKyB0aGlzLl9leHBpcmUgPCBub3cgKyAzMDAwMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIF9yZXF1ZXN0SnNvbih1cmwsIG1ldGhvZCwgYm9keSA9IG51bGwsIHRva2VuID0gbnVsbCkge1xuICAgICAgICBsZXQgcGFyYW1zID0ge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBib2R5LFxuICAgICAgICAgICAgcHJveHk6IHRoaXMuX2NvbmZpZy5wcm94eVxuICAgICAgICB9XG4gICAgICAgIGlmKHRva2VuICE9IG51bGwpIHBhcmFtcy5oZWFkZXJzWydYLVRva2VuJ10gPSB0b2tlblxuICAgICAgICByZXR1cm4gQ29ubmVjdC5yZXF1ZXN0SnNvbih1cmwsIG1ldGhvZCwgcGFyYW1zKVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBdXRoXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9saWIvYXV0aC5qcyIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgVXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpXG5jb25zdCBDb25uZWN0ID0gcmVxdWlyZSgnLi9jb25uZWN0JylcbmNvbnN0IGV4YyA9IHJlcXVpcmUoJy4vZXhjZXB0aW9uJylcblxuLy8gY29uc3RhbnRzIGZvciB1cHNhbXBsaW5nLiBsZW5ndGg9OTFcbmNvbnN0IGZpckNvZSA9IFstNy40MTM3MDM3ZS00LCAtMS4xNTMxMjgzZS0zLCAtMi4xNzQwNjYyZS00LCAxLjI3OTA2OThlLTMsIDEuNTkyMjAwMGUtMywgLTMuNDQzMzk3NGUtMTgsIC0yLjAwMTMwNjVlLTMsIC0yLjAyMzM4ODdlLTMsIDQuMzM5NzA5OGUtNCwgMi45MTYzNjYzZS0zLFxuICAgIDIuMzg5NDAwOGUtMywgLTEuMTQ3NTEwM2UtMywgLTQuMDIwNjE5MmUtMywgLTIuNjE3MTgxNmUtMywgMi4yMDY3NTA0ZS0zLFxuICAgIDUuMjk3MTg4N2UtMywgMi42MTY4MTA3ZS0zLCAtMy42ODE3NTYzZS0zLCAtNi43MTU2MDU0ZS0zLCAtMi4yNzg2Njc3ZS0zLFxuICAgIDUuNjUwNzc5OWUtMywgOC4yMzI1NTEyZS0zLCAxLjQ2NjM0ODFlLTMsIC04LjIxMTIxMjVlLTMsIC05Ljc5MzcxMDFlLTMsXG4gICAgMS4wMjA4ODIzZS0xNywgMS4xNTA0MTY2ZS0yLCAxLjEzMzY2MzNlLTIsIC0yLjM4MjM4NDZlLTMsIC0xLjU3Njk1NDJlLTIsIC0xLjI3OTQ0MzFlLTIsIDYuMTE4OTkyMGUtMywgMi4xNDc5MTM0ZS0yLCAxLjQxMDAwMjRlLTIsIC0xLjIwNzg1OTVlLTIsIC0yLjk3MDkwNzdlLTIsIC0xLjUxOTA2MTFlLTIsIDIuMjM5NDYyMmUtMiwgNC4zNDY1OTkwZS0yLCAxLjYwMTIwMDBlLTIsIC00LjQzMDkzMTZlLTIsIC03LjQ5Njc3OThlLTIsIC0xLjY1MjI0MzFlLTIsIDEuMjg2MjEzOWUtMSwgMi44MzkwOTE1ZS0xLFxuICAgIDMuNTA2MDcwNGUtMSwgMi44MzkwOTE1ZS0xLCAxLjI4NjIxMzllLTEsIC0xLjY1MjI0MzFlLTIsIC03LjQ5Njc3OThlLTIsIC00LjQzMDkzMTZlLTIsIDEuNjAxMjAwMGUtMiwgNC4zNDY1OTkwZS0yLCAyLjIzOTQ2MjJlLTIsIC0xLjUxOTA2MTFlLTIsIC0yLjk3MDkwNzdlLTIsIC0xLjIwNzg1OTVlLTIsIDEuNDEwMDAyNGUtMiwgMi4xNDc5MTM0ZS0yLCA2LjExODk5MjBlLTMsIC0xLjI3OTQ0MzFlLTIsIC0xLjU3Njk1NDJlLTIsIC0yLjM4MjM4NDZlLTMsIDEuMTMzNjYzM2UtMiwgMS4xNTA0MTY2ZS0yLFxuICAgIDEuMDIwODgyM2UtMTcsIC05Ljc5MzcxMDFlLTMsIC04LjIxMTIxMjVlLTMsIDEuNDY2MzQ4MWUtMywgOC4yMzI1NTEyZS0zLFxuICAgIDUuNjUwNzc5OWUtMywgLTIuMjc4NjY3N2UtMywgLTYuNzE1NjA1NGUtMywgLTMuNjgxNzU2M2UtMywgMi42MTY4MTA3ZS0zLFxuICAgIDUuMjk3MTg4N2UtMywgMi4yMDY3NTA0ZS0zLCAtMi42MTcxODE2ZS0zLCAtNC4wMjA2MTkyZS0zLCAtMS4xNDc1MTAzZS0zLFxuICAgIDIuMzg5NDAwOGUtMywgMi45MTYzNjYzZS0zLCA0LjMzOTcwOThlLTQsIC0yLjAyMzM4ODdlLTMsIC0yLjAwMTMwNjVlLTMsIC0zLjQ0MzM5NzRlLTE4LCAxLjU5MjIwMDBlLTMsIDEuMjc5MDY5OGUtMywgLTIuMTc0MDY2MmUtNCwgLTEuMTUzMTI4M2UtMywgLTcuNDEzNzAzN2UtNFxuXVxuXG5cbmNsYXNzIEFzciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBhdXRoKSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZ1xuICAgICAgICB0aGlzLl9hdXRoID0gYXV0aFxuICAgICAgICB0aGlzLl91cmwgPSBVdGlsLmdldFJlY2FpdXNVcmwoY29uZmlnLnVybCwgY29uZmlnLnZlcnNpb24sICdhc3InKVxuICAgIH1cblxuICAgIG5ld1Nlc3Npb24ocGFyYW1zPXt9KSB7XG4gICAgICAgIGxldCBpbnB1dFR5cGUgPSBwYXJhbXMuaW5wdXRUeXBlIHx8ICdsaW5lYXIvaW50MTYnXG4gICAgICAgIGxldCBzYW1wbGVSYXRlID0gcGFyYW1zLnNhbXBsZVJhdGUgfHwgMTYwMDBcbiAgICAgICAgbGV0IHNlbmRJbnRlcnZhbCA9IHBhcmFtcy5zZW5kSW50ZXJ2YWwgfHwgNTEyXG4gICAgICAgIHJldHVybiBuZXcgU2Vzc2lvbih0aGlzLl9jb25maWcsIHRoaXMuX2F1dGgsIHRoaXMuX3VybCwgaW5wdXRUeXBlLCBzYW1wbGVSYXRlLCBzZW5kSW50ZXJ2YWwpXG4gICAgfVxuXG4gICAgLy8gYmF0Y2jlh6bnkIbjg6Ljg7zjg4lcbiAgICByZWNvZ25pemUoZGF0YSwgcGFyYW1zLCBvcHRpb25zPXt9KSB7XG4gICAgICAgIGxldCBzZXNzXG4gICAgICAgIGxldCBzZW5kQnVmID0gZGF0YVxuICAgICAgICBpZihvcHRpb25zLmhhc093blByb3BlcnR5KCdpbnB1dFR5cGUnKSkge1xuICAgICAgICAgICAgaWYob3B0aW9ucy5pbnB1dFR5cGUgPT0gJ3dhdmUnKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IFV0aWwucGFyc2VXYXYoZGF0YSlcbiAgICAgICAgICAgICAgICBzZXNzID0gdGhpcy5uZXdTZXNzaW9uKHtzYW1wbGVSYXRlOiBwYXJzZWQuc2FtcGxlUmF0ZX0pXG4gICAgICAgICAgICAgICAgc2VuZEJ1ZiA9IHBhcnNlZC5kYXRhXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlc3MgPSB0aGlzLm5ld1Nlc3Npb24oe2lucHV0VHlwZTogb3B0aW9ucy5pbnB1dFR5cGUsIHNhbXBsZVJhdGU6IG9wdG9pbnMuc2FtcGxlUmF0ZX0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXNzID0gdGhpcy5uZXdTZXNzaW9uKClcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB3YWl0ID0gMzAwMDAgIC8vIDMwIHNlY1xuICAgICAgICBpZihvcHRpb25zLmhhc093blByb3BlcnR5KCd3YWl0JykpIHtcbiAgICAgICAgICAgIHdhaXQgPSBvcHRpb25zLndhaXRcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXN1bHRzID0gW11cbiAgICAgICAgc2Vzcy5zZXRDYWxsYmFjaygnUmVzdWx0Jywgb2JqID0+IHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChvYmopXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gc2Vzcy5zZXRDYWxsYmFjaygnVG1wUmVzdWx0JywgKCkgPT4gY29uc29sZS5sb2coJ1RtcFJlc3VsdCcpKVxuICAgICAgICAvLyBzZXNzLnNldENhbGxiYWNrKCdTZW5kJywgKCkgPT4gY29uc29sZS5sb2coJ1NlbmQnKSlcbiAgICAgICAgLy8gc2Vzcy5zZXRDYWxsYmFjaygnUmVqZWN0JywgKCkgPT4gY29uc29sZS5sb2coJ1JlamVjdCcpKVxuICAgICAgICAvLyBzZXNzLnNldENhbGxiYWNrKCdGYWlsdXJlJywgKCkgPT4gY29uc29sZS5sb2coJ0ZhaWx1cmUnKSlcbiAgICAgICAgLy8gc2Vzcy5zZXRDYWxsYmFjaygnU09TJywgKCkgPT4gY29uc29sZS5sb2coJ1NPUycpKVxuICAgICAgICAvLyBzZXNzLnNldENhbGxiYWNrKCdUaW1lb3V0JywgKCkgPT4gY29uc29sZS5sb2coJ1RpbWVvdXQnKSlcbiAgICAgICAgLy8gc2Vzcy5zZXRDYWxsYmFjaygnVG9vTG9uZycsICgpID0+IGNvbnNvbGUubG9nKCdUb29Mb25nJykpXG5cbiAgICAgICAgcmV0dXJuIHNlc3Muc3RhcnQocGFyYW1zKVxuICAgICAgICAudGhlbigoKSA9PiBzZXNzLnNlbmREYXRhKHNlbmRCdWYpKVxuICAgICAgICAudGhlbigoKSA9PiBzZXNzLmZsdXNoKCkpXG4gICAgICAgIC50aGVuKCgpID0+IHNlc3MuY2hlY2tSZXN1bHRGb3IoJ05vRGF0YScsIHdhaXQpKVxuICAgICAgICAudGhlbigoKSA9PiByZXN1bHRzKVxuICAgIH1cblxuICAgIC8vIEl0IGFzc3VtZXMgVWludDhBcnJheVxuICAgIGdldFJhd0Zyb21XYXZlKGRhdGEpIHtcbiAgICAgICAgbGV0IHBhcnNlZFdhdiA9IFV0aWwucGFyc2VXYXYoZGF0YSlcbiAgICAgICAgcmV0dXJuIHBhcnNlZFdhdi5kYXRhXG4gICAgfVxufVxuXG4vLy8g6Z+z5aOw6KqN6K2Y44Gu77yR44K744OD44K344On44Oz44KS6KGo44GZXG5jbGFzcyBTZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIGF1dGgsIHVybCwgaW5wdXRUeXBlLCBzYW1wbGVSYXRlLCBzZW5kSW50ZXJ2YWwpIHtcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnXG4gICAgICAgIHRoaXMuX2F1dGggPSBhdXRoXG4gICAgICAgIHRoaXMuX3VybCA9IHVybFxuXG4gICAgICAgIHRoaXMuX3V1aWQgPSBudWxsXG4gICAgICAgIHRoaXMuX2FzclBhcmFtcyA9IG51bGwgLy8gc3RhcnTmmYLjga7oqK3lrppcblxuICAgICAgICB0aGlzLl9zYW1wbGVSYXRlID0gc2FtcGxlUmF0ZTtcbiAgICAgICAgdGhpcy5fdGFyZ2V0UmF0ZSA9IDE2MDAwO1xuICAgICAgICB0aGlzLl9yYXRlUmF0aW8gPSB0aGlzLl9zYW1wbGVSYXRlIC8gdGhpcy5fdGFyZ2V0UmF0ZTtcbiAgICAgICAgdGhpcy5fdm9pY2VJZCA9IDA7XG5cbiAgICAgICAgdGhpcy5fc2V0SW5wdXRUeXBlKGlucHV0VHlwZSlcbiAgICAgICAgdGhpcy5fc2V0U2VuZEludGVydmFsKHNlbmRJbnRlcnZhbClcblxuICAgICAgICBpZih0aGlzLl9zYW1wbGVSYXRlIDwgdGhpcy5fdGFyZ2V0UmF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVXBzYW1wbGluZyBpcyBub3Qgc3VwcG9ydGVkIHlldC4nKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g6YCU5Lit44Gu44OQ44OD44OV44KhXG4gICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlciA9IG51bGxcbiAgICAgICAgdGhpcy5fcHVzaGVkRGF0YVN0YWNrID0gW11cbiAgICAgICAgdGhpcy5fcHVzaGVkQnVmZmVyQ291bnQgPSAwXG5cbiAgICAgICAgdGhpcy5fZXZlbnRDYWxsYmFja3MgPSB7fVxuICAgICAgICB0aGlzLl9pbnRlcm5hbEV2ZW50Q2FsbGJhY2tzID0ge31cblxuICAgICAgICAvLyBzdGF0ZSBoYW5kbGluZ1xuICAgICAgICB0aGlzLl9jYW5SZXF1ZXN0ID0gZmFsc2VcbiAgICAgICAgdGhpcy5faXNTdGFydGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gUmVzdWx0L05vRGF0YS9UbXBSZXN1bHQvU2VuZC9SZWplY3QvRmFpbHVyZS9TT1MvVGltZW91dC9Ub29Mb25nXG4gICAgc2V0Q2FsbGJhY2sobmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYodGhpcy5fZXZlbnRDYWxsYmFja3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50Q2FsbGJhY2tzW25hbWVdLnB1c2goY2FsbGJhY2spXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9ldmVudENhbGxiYWNrc1tuYW1lXSA9IFtjYWxsYmFja11cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVuc2V0Q2FsbGJhY2sobmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYodGhpcy5fZXZlbnRDYWxsYmFja3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLl9ldmVudENhbGxiYWNrc1tuYW1lXS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmKGNhbGxiYWNrID09PSB0aGlzLl9ldmVudENhbGxiYWNrc1tuYW1lW2ldXSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudENhbGxiYWNrc1tuYW1lXS5zcGxpY2UoaSwgMSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhcnQocGFyYW1zKSB7XG4gICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KCdtb2RlbF9pZCcpKSBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5SZXF1aXJlQXJndW1lbnRFcnJvcignbW9kZWxfaWQnKSlcbiAgICAgICAgdGhpcy5fY2FuUmVxdWVzdCA9IHRydWVcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ3ZvaWNlcycsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGogPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3V1aWQgPSBqLnV1aWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5fdm9pY2VJZCA9IDE7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXNyUGFyYW1zID0gcGFyYW1zXG4gICAgICAgICAgICAgICAgaWYodGhpcy5faW5wdXRUeXBlICE9ICdzcGVleCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHVzaGVkQnVmZmVyID0gbmV3IHRoaXMuX0lucHV0VHlwZUNsYXNzKHRoaXMuX3N0b3JlU2l6ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fcHVzaGVkRGF0YVN0YWNrID0gW11cbiAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWRCdWZmZXJDb3VudCA9IDBcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1N0YXJ0ZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3V1aWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLk5vdFN0YXJ0ZWRFcnJvcilcbiAgICAgICAgfVxuICAgICAgICBsZXQgdXVpZCA9IHRoaXMuX3V1aWRcbiAgICAgICAgdGhpcy5fdXVpZCA9IG51bGxcbiAgICAgICAgdGhpcy5fdm9pY2VJZCA9IDBcbiAgICAgICAgdGhpcy5fYXNyUGFyYW1zID0gbnVsbCAvLyBzdGFydOaZguOBruioreWumlxuICAgICAgICB0aGlzLl9wdXNoZWRCdWZmZXIgPSBudWxsXG4gICAgICAgIHRoaXMuX3B1c2hlZERhdGFTdGFjayA9IFtdXG4gICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50ID0gMFxuXG4gICAgICAgIGxldCByID0gdGhpcy5fcmVxdWVzdChgdm9pY2VzLyR7dXVpZH1gLCB7IG1ldGhvZDogJ0RFTEVURScgfSlcbiAgICAgICAgdGhpcy5fY2FuUmVxdWVzdCA9IGZhbHNlXG4gICAgICAgIHRoaXMuX2lzU3RhcnRlZCA9IGZhbHNlXG4gICAgICAgIHJldHVybiByXG4gICAgfVxuXG5cbiAgICAvLyBwdXNo44GZ44KL6KaB57Sg44Gr44KI44Gj44Gm5a++5b+c44KS5aSJ44GI44KL44CCXG4gICAgLy9cbiAgICBwdXNoKGJ1ZmZlcikge1xuICAgICAgICBpZighdGhpcy5faXNTdGFydGVkKSByZXR1cm5cbiAgICAgICAgaWYgKHRoaXMuX3V1aWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLk5vdFN0YXJ0ZWRFcnJvcilcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fcmF0ZVJhdGlvIDwgMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZG93bnNhbXBsaW5nIHJhdGUgc2hvdWxkIGJlIHNtYWxsZXIgdGhhbiBvcmlnaW5hbCBzYW1wbGUgcmF0ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShidWZmZXIgaW5zdGFuY2VvZiB0aGlzLl9JbnB1dFR5cGVDbGFzcykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91IGNhbiBvbmx5IHB1c2ggJHt0aGlzLl9JbnB1dFR5cGVDbGFzc30sIG9yIHVzZSBzZXRJbnB1dFR5cGUoKWApXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5faW5wdXRUeXBlID09ICdzcGVleCcpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbmQoYnVmZmVyKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcHVzaGVkRGF0YVN0YWNrLnB1c2goYnVmZmVyLnNsaWNlKDApKVxuICAgICAgICAgICAgdGhpcy5fcHVzaCgpICAvLyBjaGVjayB0byBzZW5kXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3V1aWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLk5vdFN0YXJ0ZWRFcnJvcilcbiAgICAgICAgfVxuICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjgavmrovjgaPjgabjgYTjgovjg4fjg7zjgr/jgpLlvLfliLbpgIHkv6FcbiAgICAgICAgdGhpcy5fcHVzaGVkRGF0YVN0YWNrLnB1c2gobnVsbClcbiAgICAgICAgdGhpcy5fcHVzaCgpXG5cbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogJ1BVVCcsIHBhcmFtczogeyB2b2ljZV9pZDogdGhpcy5fdm9pY2VJZCB9IH1cbiAgICAgICAgdGhpcy5fdm9pY2VJZCArPSAxXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGB2b2ljZXMvJHt0aGlzLl91dWlkfS9mbHVzaGAsIG9wdGlvbnMpLnRoZW4oaiA9PiB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZUFzclJlc3VsdChqKVxuICAgICAgICAgICAgcmV0dXJuIGpcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBjaGVja1Jlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYHZvaWNlcy8ke3RoaXMuX3V1aWR9L3Jlc3VsdHNgLCB7IG1ldGhvZDogJ0dFVCcgfSkudGhlbihqID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3BhcnNlQXNyUmVzdWx0KGopXG4gICAgICAgICAgICByZXR1cm4galxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNoZWNrUmVzdWx0Rm9yKG5hbWUsIHRpbWVvdXQ9MTAwMDAsIGludGVydmFsPTUwMCkge1xuICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxldCBkb25lID0gZmFsc2VcbiAgICAgICAgICAgIHRoaXMuX3NldENhbGxiYWNrKG5hbWUsIG9iaiA9PiB7XG4gICAgICAgICAgICAgICAgZG9uZSA9IHRydWVcbiAgICAgICAgICAgICAgICByZXNvbHZlKG9iailcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHRoaXMuY2hlY2tSZXN1bHQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZihkb25lKSByZXR1cm5cbiAgICAgICAgICAgICAgICAvLyByZS1jaGVja1xuICAgICAgICAgICAgICAgIFV0aWwuc2xlZXAoaW50ZXJ2YWwpLnRoZW4oKCkgPT4gdGhpcy5jaGVja1Jlc3VsdCgpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIFV0aWwud2l0aFRpbWVvdXQocHJvbWlzZSwgdGltZW91dClcbiAgICB9XG5cbiAgICAvLyBJdCBzZW5kcyB2b2ljZSBkYXRhIGltbWVkaWF0ZWx5XG4gICAgc2VuZERhdGEoYnVmLCB2b2ljZUlkPW51bGwpIHtcbiAgICAgICAgaWYodm9pY2VJZCA9PSBudWxsKSB7XG4gICAgICAgICAgICB2b2ljZUlkID0gdGhpcy5fdm9pY2VJZFxuICAgICAgICB9XG4gICAgICAgIGxldCBzZW5kQnVmID0gdGhpcy5fcHJlcHJvY2Vzc0JlZm9yZVNlbmQoYnVmKVxuICAgICAgICBsZXQgdm9pY2UgPSBuZXcgVWludDhBcnJheShzZW5kQnVmLmJ1ZmZlcilcbiAgICAgICAgbGV0IGZvcm1EYXRhID0ge1xuICAgICAgICAgICAgdm9pY2VfaWQ6IHZvaWNlSWQsXG4gICAgICAgICAgICB2b2ljZTogdm9pY2VcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92b2ljZUlkICs9IDFcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYHZvaWNlcy8ke3RoaXMuX3V1aWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGZvcm1EYXRhOiBmb3JtRGF0YVxuICAgICAgICB9KS50aGVuKGogPT4ge1xuICAgICAgICAgICAgdGhpcy5fZW1pdCgnU2VuZCcsIGopXG4gICAgICAgICAgICB0aGlzLl9wYXJzZUFzclJlc3VsdChqKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldEJhc2VNb2RlbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdtb2RlbHMnLCB7IG1ldGhvZDogJ0dFVCcgfSlcbiAgICB9XG5cbiAgICBnZXRCYXNlTW9kZWxDb25mKG1vZGVsSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYG1vZGVscy8ke21vZGVsSWR9L2NvbmZpZ3VyYXRpb25gLCB7IG1ldGhvZDogJ0dFVCcgfSlcbiAgICB9XG5cbiAgICB1cGRhdGVCYXNlTW9kZWxDb25mKG1vZGVsSWQsIGNvbmYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYG1vZGVscy8ke21vZGVsSWR9L2NvbmZpZ3VyYXRpb25gLCB7IG1ldGhvZDogJ1BVVCcsIHBhcmFtczogY29uZiB9KVxuICAgIH1cblxuICAgIGdldFVzZXJNb2RlbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd1c2VybGV4aWNvbnMnLCB7IG1ldGhvZDogJ0dFVCcgfSlcbiAgICB9XG5cbiAgICBjcmVhdGVVc2VyTW9kZWwoYmFzZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd1c2VybGV4aWNvbnMnLCB7IG1ldGhvZDogJ1BPU1QnLCBwYXJhbXM6IHsgYmFzZV9tb2RlbF9pZDogYmFzZUlkIH0gfSlcbiAgICB9XG5cbiAgICBkZWxldGVVc2VyTW9kZWwobW9kZWxJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgdXNlcmxleGljb25zLyR7bW9kZWxJZH1gLCB7IG1ldGhvZDogJ0RFTEVURScgfSlcbiAgICB9XG5cbiAgICB1cGRhdGVVc2VyTW9kZWxEZXNjcmlwdGlvbihtb2RlbElkLCBkZXNjKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGB1c2VybGV4aWNvbnMvJHttb2RlbElkfWAsIHsgbWV0aG9kOiAnUFVUJywgcGFyYW1zOiB7IGRlc2NyaXB0aW9uOiBkZXNjIH0gfSlcbiAgICB9XG5cblxuICAgIGdldFVzZXJNb2RlbENvbmYobW9kZWxJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgdXNlcmxleGljb25zLyR7bW9kZWxJZH0vY29uZmlndXJhdGlvbmAsIHsgbWV0aG9kOiAnR0VUJyB9KVxuICAgIH1cblxuICAgIHVwZGF0ZVVzZXJNb2RlbENvbmYobW9kZWxJZCwgY29uZikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgdXNlcmxleGljb25zLyR7bW9kZWxJZH0vY29uZmlndXJhdGlvbmAsIHsgbWV0aG9kOiAnUFVUJywgcGFyYW1zOiBjb25mIH0pXG4gICAgfVxuXG4gICAgZ2V0TGV4aWNvbihtb2RlbElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGB1c2VybGV4aWNvbnMvJHttb2RlbElkfS9jb250ZW50c2AsIHsgbWV0aG9kOiAnR0VUJyB9KVxuICAgIH1cblxuICAgIHVwZGF0ZUxleGljb24obW9kZWxJZCwgbGV4aWNvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYHVzZXJsZXhpY29ucy8ke21vZGVsSWR9L2NvbnRlbnRzYCwgeyBtZXRob2Q6ICdQVVQnLCBwYXJhbXM6IHsgdWxleDogbGV4aWNvbnMgfSB9KVxuICAgIH1cblxuICAgIGdldERvbWFpblR5cGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgZG9tYWlubGV4aWNvbnNgLCB7IG1ldGhvZDogJ0dFVCcgfSlcbiAgICB9XG5cbiAgICBfc2V0Q2FsbGJhY2sobmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYoIXRoaXMuX2ludGVybmFsRXZlbnRDYWxsYmFja3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2ludGVybmFsRXZlbnRDYWxsYmFja3NbbmFtZV0gPSBjYWxsYmFja1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3Vuc2V0Q2FsbGJhY2sobmFtZSkge1xuICAgICAgICBpZighdGhpcy5faW50ZXJuYWxFdmVudENhbGxiYWNrcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2ludGVybmFsRXZlbnRDYWxsYmFja3NbbmFtZV1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9lbWl0KG5hbWUsIG9iaikge1xuICAgICAgICBpZih0aGlzLl9ldmVudENhbGxiYWNrcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRDYWxsYmFja3NbbmFtZV0uZm9yRWFjaChjYWxsYmFjayA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sob2JqKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLl9pbnRlcm5hbEV2ZW50Q2FsbGJhY2tzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnRlcm5hbEV2ZW50Q2FsbGJhY2tzW25hbWVdKG9iailcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIG1zZWMgKOWkieabtOS4jeWPrylcbiAgICBfc2V0U2VuZEludGVydmFsKG4pIHtcbiAgICAgICAgaWYgKHRoaXMuX2lucHV0VHlwZSA9PSAnbGluZWFyL2Zsb2F0MzInIHx8IHRoaXMuX2lucHV0VHlwZSA9PSAnbGluZWFyL2ludDE2Jykge1xuICAgICAgICAgICAgdGhpcy5fc3RvcmVTaXplID0gbiAqIHRoaXMuX3NhbXBsZVJhdGUgLyAxMDAwXG4gICAgICAgICAgICBpZih0aGlzLl9zYW1wbGVSYXRlICE9IHRoaXMuX3RhcmdldFJhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdG9yZVNpemUgPSBuICogdGhpcy5fc2FtcGxlUmF0ZSAvIDEwMDAgKyBmaXJDb2UubGVuZ3RoIC0gMVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2lucHV0VHlwZSA9PSAnYWRwY20nKSB7XG4gICAgICAgICAgICB0aGlzLl9zdG9yZVNpemUgPSBuICogdGhpcy5fc2FtcGxlUmF0ZSAvIDEwMDAgLyAyIC8vIOS4gOOBpOOBruODkOOCpOODiOOBq++8kuOBpOOBruimgee0oFxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2lucHV0VHlwZSA9PSAnc3BlZXgnKSB7XG4gICAgICAgICAgICB0aGlzLl9zdG9yZVNpemUgPSBudWxsIC8vIG5vdCBzdXBwb3J0ZWQuIEFsd2F5cyBzZW5kIGlmIHB1c2hlZFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gbGluZWFyL2ludDE2LCBsaW5lYXIvZmxvYXQzMiwgYWRwY20sIHNwZWV45Lul5aSW44Gv6KqN44KB44Gq44GEXG4gICAgX3NldElucHV0VHlwZSh0cCkge1xuICAgICAgICB0aGlzLl9pbnB1dFR5cGUgPSB0cDtcbiAgICAgICAgaWYgKHRwID09ICdsaW5lYXIvaW50MTYnKSB7XG4gICAgICAgICAgICB0aGlzLl9JbnB1dFR5cGVDbGFzcyA9IEludDE2QXJyYXlcbiAgICAgICAgICAgIHRoaXMuX2lucHV0VHlwZUNsYXNzTmFtZSA9ICdpMTYnXG4gICAgICAgIH0gZWxzZSBpZiAoJ2xpbmVhci9mbG9hdDMyJykge1xuICAgICAgICAgICAgdGhpcy5fSW5wdXRUeXBlQ2xhc3MgPSBGbG9hdDMyQXJyYXlcbiAgICAgICAgICAgIHRoaXMuX2lucHV0VHlwZUNsYXNzTmFtZSA9ICdmMzInXG4gICAgICAgIH0gZWxzZSBpZiAoJ2FkcGNtJykge1xuICAgICAgICAgICAgdGhpcy5fSW5wdXRUeXBlQ2xhc3MgPSBVaW50OEFycmF5XG4gICAgICAgICAgICB0aGlzLl9pbnB1dFR5cGVDbGFzc05hbWUgPSAndTgnXG4gICAgICAgICAgICBpZih0aGlzLl9zYW1wbGVSYXRlICE9IHRoaXMuX3RhcmdldFJhdGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdXZSBvbmx5IHN1cHBvcnQgYWRwY20gd2l0aCAxNjAwMEh6IHNhbXBsaW5nLicpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoJ3NwZWV4Jykge1xuICAgICAgICAgICAgdGhpcy5fSW5wdXRUeXBlQ2xhc3MgPSBVaW50OEFycmF5XG4gICAgICAgICAgICB0aGlzLl9pbnB1dFR5cGVDbGFzc05hbWUgPSAndTgnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTZWxlY3QgbGluZWFyL2ludDE2LCBsaW5lYXIvZmxvYXQzMiwgYWRwY20sIG9yIHNwZWV4JylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9wdXNoKCkge1xuICAgICAgICBpZih0aGlzLl9wdXNoZWREYXRhU3RhY2subGVuZ3RoID09IDApIHJldHVyblxuXG4gICAgICAgIC8vIG51bGwgZWxlbWVudCBpbmRpY2F0ZXMgdG8gYmUgZmx1c2hlZFxuICAgICAgICBpZih0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fcHJlcGFyZVRvU2VuZCgpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuX2lucHV0VHlwZSA9PSAnc3BlZXgnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdObyBzcGVleCBoZXJlJylcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmFzc2VydCh0aGlzLl9zdG9yZVNpemUgPT09IHRoaXMuX3B1c2hlZEJ1ZmZlci5sZW5ndGgsIFwiZXJyb3IgMVwiKVxuXG4gICAgICAgIGlmKHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50ICsgdGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLmxlbmd0aCA8IHRoaXMuX3N0b3JlU2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5fcHVzaGVkQnVmZmVyLnNldCh0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0sIHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50KVxuICAgICAgICAgICAgdGhpcy5fcHVzaGVkQnVmZmVyQ291bnQgKz0gdGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLmxlbmd0aFxuICAgICAgICAgICAgdGhpcy5fcHVzaGVkRGF0YVN0YWNrLnNoaWZ0KClcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50ICsgdGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLmxlbmd0aCA9PSB0aGlzLl9zdG9yZVNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlci5zZXQodGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLCB0aGlzLl9wdXNoZWRCdWZmZXJDb3VudClcbiAgICAgICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50ICs9IHRoaXMuX3B1c2hlZERhdGFTdGFja1swXS5sZW5ndGhcbiAgICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KHRoaXMuX3N0b3JlU2l6ZSA9PT0gdGhpcy5fcHVzaGVkQnVmZmVyQ291bnQsIFwiZXJyb3IgMlwiKVxuICAgICAgICAgICAgLy8gRklS44GZ44KL44Go44GN44Gv44OV44Kj44Or44K/5YiG44KS5o2o44Gm44Gm44GX44G+44GG44Gu44Gn44CB44GT44Gu6YOo5YiG44Gv5qyh44Gu44OH44O844K/44Gn6YCB44KL44Gu44Gn5q6L44GZ5b+F6KaB44GC44KKXG4gICAgICAgICAgICBpZih0aGlzLl9zYW1wbGVSYXRlICE9IHRoaXMuX3RhcmdldFJhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0gPSBVdGlsLnR5cGVkQXJyYXlWaWV3KHRoaXMuX3B1c2hlZEJ1ZmZlciwgeWhpcy5fcHVzaGVkQnVmZmVyLmxlbmd0aCAtIChmaXJDb2UubGVuZ3RoIC0gMSkpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3B1c2hlZERhdGFTdGFjay5zaGlmdCgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9wcmVwYXJlVG9TZW5kKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCB2aWV3ID0gVXRpbC50eXBlZEFycmF5Vmlldyh0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0sIDAsIHRoaXMuX3N0b3JlU2l6ZSAtIHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50KVxuICAgICAgICAgICAgdGhpcy5fcHVzaGVkQnVmZmVyLnNldCh2aWV3LCB0aGlzLl9wdXNoZWRCdWZmZXJDb3VudClcbiAgICAgICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50ICs9IHZpZXcubGVuZ3RoXG4gICAgICAgICAgICBjb25zb2xlLmFzc2VydCh0aGlzLl9zdG9yZVNpemUgPT09IHRoaXMuX3B1c2hlZEJ1ZmZlckNvdW50KVxuICAgICAgICAgICAgLy8gRklS44GZ44KL44Go44GN44Gv44OV44Kj44Or44K/5YiG44KS5o2o44Gm44Gm44GX44G+44GG44Gu44Gn44CB44GT44Gu6YOo5YiG44Gv5qyh44Gu44OH44O844K/44Gn6YCB44KL44Gu44Gn5q6L44GZ5b+F6KaB44GC44KKXG4gICAgICAgICAgICBpZih0aGlzLl9zYW1wbGVSYXRlICE9IHRoaXMuX3RhcmdldFJhdGUpIHtcbiAgICAgICAgICAgICAgICBpZih2aWV3Lmxlbmd0aCA8IGZpckNvZS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3B1c2hlZERhdGFTdGFja1swXSA9IFV0aWwudHlwZWRBcnJheVZpZXcodGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLCAwKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWREYXRhU3RhY2sudW5zaGlmdChcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWwudHlwZWRBcnJheVZpZXcodGhpcy5fcHVzaGVkQnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3B1c2hlZEJ1ZmZlci5sZW5ndGggLSAoZmlyQ29lLmxlbmd0aCAtIDEgLSB2aWV3Lmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0gPSBVdGlsLnR5cGVkQXJyYXlWaWV3KFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdLCB2aWV3Lmxlbmd0aCAtIChmaXJDb2UubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHVzaGVkRGF0YVN0YWNrWzBdID0gVXRpbC50eXBlZEFycmF5Vmlldyh0aGlzLl9wdXNoZWREYXRhU3RhY2tbMF0sIHZpZXcubGVuZ3RoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcHJlcGFyZVRvU2VuZCgpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHVzaCgpIC8vIOmAgeOCi+OCguOBruOBjOOBquOBj+OBquOCi+OBvuOBp+e5sOOCiui/lOOBmVxuICAgIH1cblxuICAgIF9yZXF1ZXN0KG5hbWUsIG9wdGlvbnMsIHJldHVybkpzb24gPSB0cnVlKSB7XG4gICAgICAgIC8vIHNlc3Npb24gaGFzIHN0b3BlZC4gbm8gbW9yZSByZXF1ZXN0IHRvLlxuICAgICAgICBpZighdGhpcy5fY2FuUmVxdWVzdCkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgIGxldCB1cmwgPSBVdGlsLnVybEpvaW4odGhpcy5fdXJsLCBuYW1lKVxuICAgICAgICBsZXQgc2VuZE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnWC1Ub2tlbic6IHRoaXMuX2F1dGgudG9rZW4oKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3h5OiB0aGlzLl9jb25maWcucHJveHlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtZXRob2QgPSBvcHRpb25zLm1ldGhvZCB8fCAnUE9TVCdcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3BhcmFtcycpKSB7XG4gICAgICAgICAgICBzZW5kT3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5wYXJhbXMpXG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnYm9keScpKSB7XG4gICAgICAgICAgICBzZW5kT3B0aW9ucy5ib2R5ID0gb3B0aW9ucy5ib2R5XG4gICAgICAgIH0gZWxzZSBpZihvcHRpb25zLmhhc093blByb3BlcnR5KCdmb3JtRGF0YScpKSB7XG4gICAgICAgICAgICBzZW5kT3B0aW9ucy5mb3JtRGF0YSA9IG9wdGlvbnMuZm9ybURhdGFcbiAgICAgICAgICAgIHNlbmRPcHRpb25zLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ211bHRpcGFydC9mb3JtLWRhdGEnXG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaGVhZGVycycpKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zLmhlYWRlcnMpLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICAgICAgc2VuZE9wdGlvbnMuaGVhZGVyc1t4XSA9IG9wdGlvbnMuaGVhZGVyc1t4XVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXR1cm5Kc29uKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29ubmVjdC5yZXF1ZXN0SnNvbih1cmwsIG1ldGhvZCwgc2VuZE9wdGlvbnMpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gQ29ubmVjdC5yZXF1ZXN0UmF3KHVybCwgbWV0aG9kLCBzZW5kT3B0aW9ucylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9wcmVwYXJlVG9TZW5kKCkge1xuICAgICAgICBpZih0aGlzLl9wdXNoZWRCdWZmZXJDb3VudCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBsZXQgc2VuZEJ1ZiA9IHRoaXMuX3B1c2hlZEJ1ZmZlclxuICAgICAgICBsZXQgdm9pY2VJZCA9IHRoaXMuX3ZvaWNlSWRcbiAgICAgICAgdGhpcy5fcHVzaGVkQnVmZmVyID0gbmV3IHRoaXMuX0lucHV0VHlwZUNsYXNzKHRoaXMuX3N0b3JlU2l6ZSlcbiAgICAgICAgdGhpcy5fcHVzaGVkQnVmZmVyQ291bnQgPSAwXG4gICAgICAgIHRoaXMuc2VuZERhdGEoc2VuZEJ1Ziwgdm9pY2VJZClcbiAgICB9XG5cbiAgICAvLyBidWbjga7lhoXlrrnjgpLpgIHjgotcbiAgICBfcHJlcHJvY2Vzc0JlZm9yZVNlbmQoYnVmKSB7XG4gICAgICAgIGlmKHRoaXMuX3NhbXBsZVJhdGUgIT0gdGhpcy5fdGFyZ2V0UmF0ZSkge1xuICAgICAgICAgICAgYnVmID0gdGhpcy5fZmlsdGVyRklSQW5kRG93blNhbXBsaW5nKGJ1ZikgIC8vIEZJUuODleOCo+ODq+OCv+OCkuOBi+OBvuOBmVxuICAgICAgICB9XG4gICAgICAgIGxldCBzZW5kQnVmXG4gICAgICAgIGlmICh0aGlzLl9pbnB1dFR5cGVDbGFzc05hbWUgPT09ICdmMzInKSB7XG4gICAgICAgICAgICBzZW5kQnVmID0gbmV3IEludDE2QXJyYXkoYnVmLmxlbmd0aClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHYgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgYnVmW2ldKSlcbiAgICAgICAgICAgICAgICBpZiAodiA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdiAqPSAweDgwMDA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdiAqPSAweDdGRkY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbmRCdWZbaV0gPSB2XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZW5kQnVmID0gYnVmXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlbmRCdWZcbiAgICB9XG5cblxuICAgIC8vIEZJUiBmaWx0ZXLjgafoo5zlrowo5b6M44Gr44OA44Km44Oz44K144Oz44OX44OrKVxuICAgIC8vIOWFg+OBruODh+ODvOOCvyAgICBbb29vb29vb11cbiAgICAvLyAgICAgICAgICAgICAgIFt8fHxdIDwtIOeVs+OBv+i+vOOCk+OBp+OBhOOCi1xuICAgIC8vICAgICAgICAgICAgICAgIHxcbiAgICAvLyBGSVLlvozjga7jg4fjg7zjgr8gW29vb29vb29dXG5cbiAgICAvLyDlhYPjga7jg4fjg7zjgr8gICAgW29vb29vb29dXG4gICAgLy8gICAgICAgICAgICAgICAgICAgW3x8fF0gICAgIDwtIOOBk+OBk+OBvuOBp+OAguOBpOOBvuOCikZpbHRlcumFjeWIl+OBrumVt+OBlS0x44Gu6KaB57Sg44Gv5o2o44Gm44KJ44KM44KLXG4gICAgLy8gICAgICAgICAgICAgICAgICAgIHxcbiAgICAvLyBGSVLlvozjga7jg4fjg7zjgr8gW29vb29vb29dXG4gICAgX2ZpbHRlckZJUkFuZERvd25TYW1wbGluZyhpYnVmKSB7XG4gICAgICAgIC8vIOODgOOCpuODs+OCteODs+ODl+ODq+OCkuihjOOBhuOBruOBp+OAgeW/heimgeOBquimgee0oOaVsOOBr+Wwj+OBleOBj+OBquOCi1xuICAgICAgICBsZXQgY29udmVydGVkU2l6ZSA9IE1hdGguY2VpbCgoaWJ1Zi5sZW5ndGggLSAoZmlyQ29lLmxlbmd0aCAtIDEpKSAvIHRoaXMuX3JhdGVSYXRpbylcbiAgICAgICAgbGV0IG9idWYgPSBuZXcgdGhpcy5fSW5wdXRUeXBlQ2xhc3MoY29udmVydGVkU2l6ZSk7XG4gICAgICAgIGxldCBjc3IgPSAwXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyA7IGkgKz0gdGhpcy5fcmF0ZVJhdGlvKSB7XG4gICAgICAgICAgICBsZXQgcG9zID0gTWF0aC5mbG9vcihpKVxuICAgICAgICAgICAgaWYocG9zICsgZmlyQ29lLmxlbmd0aCAtIDEgPj0gaWJ1Zi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHYgPSAwLjBcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZmlyQ29lLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgLy8gZmlyQ29l44Gv5bem5Y+z5a++56ew44Gu6YWN5YiXKDkx6KaB57SgKeOBquOBruOBp+OCs+ODrOOBp+iJr+OBhFxuICAgICAgICAgICAgICAgIHYgKz0gZmlyQ29lW2pdICogaWJ1Zltwb3MgKyBqXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g44GT44GT44Gn44CBSW5wdXRUeXBl44GMaW505Z6L44Gu5aC05ZCI44Gr44Gv5Z6L5aSJ5o+b44GM5b+F6KaB44Gr44Gq44KLXG4gICAgICAgICAgICBpZiAodGhpcy5faW5wdXRUeXBlQ2xhc3NOYW1lID09PSAnaTE2Jykge1xuICAgICAgICAgICAgICAgIG9idWZbY3NyXSA9IE1hdGgucm91bmQodilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2J1Zltjc3JdID0gdlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytjc3JcbiAgICAgICAgfVxuICAgICAgICBpZihvYnVmLmxlbmd0aCA8IGNzcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbnZlcnNpb24nKVxuICAgICAgICB9XG4gICAgICAgIC8vIOacgOW+jOOBq+OCguOBl+ODkOODg+ODleOCoeOBjOS9meOBo+OBpuOBhOOBn+OCiXZpZXfjgpLjgZnjgZLmm7/jgYjjgotcbiAgICAgICAgaWYgKG9idWYubGVuZ3RoICE9IGNzcikge1xuICAgICAgICAgICAgb2J1ZiA9IFV0aWwudHlwZWRBcnJheVZpZXcob2J1ZiwgMCwgY3NyKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYnVmXG4gICAgfVxuXG4gICAgX3BhcnNlQXNyUmVzdWx0KG9iaikge1xuICAgICAgICBpZiAoIW9iaikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgb2JqLmZvckVhY2godiA9PiB7XG4gICAgICAgICAgICBsZXQgdHlwZSwgcGFyc2VGdW5jLCBleHRyYWN0VG1wXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2FzclBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgncmVzdWx0X3R5cGUnKSB8fCB0aGlzLl9hc3JQYXJhbXMucmVzdWx0X3R5cGUgPT0gJ29uZV9iZXN0Jykge1xuICAgICAgICAgICAgICAgIHR5cGUgPSB2WzBdXG4gICAgICAgICAgICAgICAgcGFyc2VGdW5jID0gdGhpcy5fcGFyc2VPbmViZXN0XG4gICAgICAgICAgICAgICAgZXh0cmFjdFRtcCA9IHYgPT4gdlsxXVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9hc3JQYXJhbXMucmVzdWx0X3R5cGUgPT0gJ25iZXN0Jykge1xuICAgICAgICAgICAgICAgIHR5cGUgPSB2LnR5cGVcbiAgICAgICAgICAgICAgICBwYXJzZUZ1bmMgPSB0aGlzLl9wYXJzZU5iZXN0XG4gICAgICAgICAgICAgICAgZXh0cmFjdFRtcCA9IHYgPT4gdi5yZXN1bHRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYXNyUGFyYW1zLnJlc3VsdF90eXBlID09ICdjb25mbmV0Jykge1xuICAgICAgICAgICAgICAgIHR5cGUgPSB2LnR5cGVcbiAgICAgICAgICAgICAgICBwYXJzZUZ1bmMgPSB0aGlzLl9wYXJzZUNvbmZuZXRcbiAgICAgICAgICAgICAgICBleHRyYWN0VG1wID0gdiA9PiB2LnJlc3VsdFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZSA9PSAnUkVTVUxUJykge1xuICAgICAgICAgICAgICAgIGxldCByb2JqID0gcGFyc2VGdW5jKHYpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ1Jlc3VsdCcsIHJvYmopXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ1RNUF9SRVNVTFQnKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJvYmogPSBleHRyYWN0VG1wKHYpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ1RtcFJlc3VsdCcsIHJvYmopXG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZSA9PSAnU09TJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ1NPUycpXG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZSA9PSAnTk9fREFUQScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW5SZXF1ZXN0ID0gZmFsc2VcbiAgICAgICAgICAgICAgICB0aGlzLl9lbWl0KCdOb0RhdGEnKVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdSRUpFQ1QnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdCgnUmVqZWN0JylcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnVElNRU9VVCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbWl0KCdUaW1lb3V0JylcbiAgICAgICAgICAgIH0gZWxzZSBpZih0eXBlID09ICdUT09fTE9ORycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbWl0KCdUb29Mb25nJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfcGFyc2VPbmViZXN0KG9iaikge1xuICAgICAgICByZXR1cm4gb2JqWzFdXG4gICAgfVxuXG4gICAgX3BhcnNlTmJlc3Qob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmoucmVzdWx0XG4gICAgfVxuXG4gICAgX3BhcnNlQ29uZm5ldChvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpXG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEFzclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbGliL2Fzci5qcyIsIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBVdGlsID0gcmVxdWlyZSgnLi91dGlsJylcbmNvbnN0IENvbm5lY3QgPSByZXF1aXJlKCcuL2Nvbm5lY3QnKVxuY29uc3QgZXhjID0gcmVxdWlyZSgnLi9leGNlcHRpb24nKVxuXG5jbGFzcyBUdHMge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgYXV0aCkge1xuICAgICAgICB0aGlzLl9hdXRoID0gYXV0aFxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWdcbiAgICAgICAgdGhpcy5fdXJsID0gVXRpbC5nZXRSZWNhaXVzVXJsKGNvbmZpZy51cmwsIGNvbmZpZy52ZXJzaW9uLCAndHRzJylcbiAgICB9XG5cbiAgICBnZXRTb3VuZChwYXJhbXMpIHtcbiAgICAgICAgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkoJ2xhbmcnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ2xhbmcnKSlcbiAgICAgICAgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkoJ3NwZWFrZXJfaWQnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3NwZWFrZXJfaWQnKSlcblxuICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KCdwaG9uZXRpY190ZXh0JykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdwaG9uZXRpY3RleHQyc3BlZWNod2F2ZScsIHsgcGFyYW1zOiBwYXJhbXMgfSwgZmFsc2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgncGxhaW50ZXh0MnNwZWVjaHdhdmUnLCB7IHBhcmFtczogcGFyYW1zIH0sIGZhbHNlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0UGhvbmV0aWNUZXh0KHBhcmFtcykge1xuICAgICAgICBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgncGxhaW5fdGV4dCcpKSBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5SZXF1aXJlQXJndW1lbnRFcnJvcigncGxhaW5fdGV4dCcpKVxuICAgICAgICBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnbGFuZycpKSBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5SZXF1aXJlQXJndW1lbnRFcnJvcignbGFuZycpKVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdwbGFpbnRleHQycGhvbmV0aWN0ZXh0JywgeyBwYXJhbXM6IHBhcmFtcyB9KVxuICAgIH1cblxuICAgIGdldFNwZWFrZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnc3BlYWtlcnMnLCB7IG1ldGhvZDogJ0dFVCcgfSlcbiAgICB9XG5cbiAgICBnZXRMZXhpY29uRGljdExpc3QobGV4aWNvbklkLCBwYXJhbXMgPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd1c2VybGV4aWNvbnMvJHtsZXhpY29uSWR9JywgeyBtZXRob2Q6ICdHRVQnLCBwYXJhbXM6IHBhcmFtcyB9KVxuICAgIH1cblxuICAgIHVwZGF0ZUxleGljb24obGV4aWNvbklkLCBwYXJhbXMgPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd1c2VybGV4aWNvbnMvJHtsZXhpY29uSWR9JywgeyBtZXRob2Q6ICdQVVQnLCBwYXJhbXM6IHBhcmFtcyB9LCBmYWxzZSlcbiAgICB9XG5cbiAgICBjb3B5TGVjaXhvbldvcmRzKGxleGljb25JZCwgcGFyYW1zKSB7XG4gICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KCd1c2VyX2xhbmdfZGljX2lkJykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCd1c2VyX2xhbmdfZGljX2lkJykpXG4gICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KCdkZXN0X3VzZXJfbGFuZ19kaWNfaWQnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ2Rlc3RfdXNlcl9sYW5nX2RpY19pZCcpKVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd1c2VybGV4aWNvbnMvY29weScsIHsgcGFyYW1zOiBwYXJhbXMgfSlcbiAgICB9XG5cbiAgICBnZXRMZXhpY29uV29yZHMobGV4aWNvbklkLCBwYXJhbXMgPSBudWxsKSB7XG4gICAgICAgIGxldCBpc0pzb24gPSAocGFyYW1zLnJlc3BvbnNlX3RpbWUgPT0gJ2JpbmFyeScpXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCd1c2VybGV4aWNvbnMvJHtsZXhpY29uSWR9L3dvcmRzJywgeyBtZXRob2Q6ICdHRVQnLCBwYXJtYXM6IHBhcmFtcyB9LCBpc0pzb24pXG4gICAgfVxuXG4gICAgZGVsZXRlQWxsTGV4aWNvbldvcmRzKGxleGljb25JZCwgcGFyYW1zID0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndXNlcmxleGljb25zLyR7bGV4aWNvbklkfS93b3JkcycsIHsgbWV0aG9kOiAnREVMRVRFJywgcGFyYW1zOiBwYXJhbXMgfSlcbiAgICB9XG5cbiAgICBhZGRXb3JkKGxleGljb25JZCwgcGFyYW1zKSB7XG4gICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KCd1bGV4JykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCd1bGV4JykpXG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ3VzZXJsZXhpY29ucy8ke2xleGljb25JZH0vd29yZHMnLCB7bWV0aG9kOiAnUFVUJywgcGFyYW1zOiBwYXJhbXN9KVxuICAgIH1cblxuICAgIGRlbGV0ZVdvcmQobGV4aWNvbklkLCBwYXJhbXMpIHtcbiAgICAgICAgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkoJ3VsZXgnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3VsZXgnKSlcblxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndXNlcmxleGljb25zLyR7bGV4aWNvbklkfS93b3JkcycsIHttZXRob2Q6ICdQT1NUJywgcGFyYW1zOiBwYXJhbXN9KVxuICAgIH1cblxuICAgIGdldFByb2dyZXNzKGxleGljb25JZCwgcGlkLCBwYXJhbXM9bnVsbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgndXNlcmxleGljb25zLyR7bGV4aWNvbklkfS8ke3BpZH0nLCB7bWV0aG9kOiAnR0VUJywgcGFyYW1zOiBwYXJhbXN9KVxuICAgIH1cblxuICAgIF9yZXF1ZXN0KG5hbWUsIG9wdGlvbnMsIHJldHVybkpzb249dHJ1ZSkge1xuICAgICAgICBsZXQgdXJsID0gVXRpbC51cmxKb2luKHRoaXMuX3VybCwgbmFtZSlcbiAgICAgICAgbGV0IHNlbmRPcHRpb25zID0ge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ1gtVG9rZW4nOiB0aGlzLl9hdXRoLnRva2VuKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm94eTogdGhpcy5fY29uZmlnLnByb3h5XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgJ1BPU1QnXG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdwYXJhbXMnKSkge1xuICAgICAgICAgICAgc2VuZE9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMucGFyYW1zKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYocmV0dXJuSnNvbikge1xuICAgICAgICAgICAgcmV0dXJuIENvbm5lY3QucmVxdWVzdEpzb24odXJsLCBtZXRob2QsIHNlbmRPcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBDb25uZWN0LnJlcXVlc3RSYXcodXJsLCBtZXRob2QsIHNlbmRPcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUdHNcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2xpYi90dHMuanMiLCIndXNlIHN0cmljdCdcblxuY29uc3QgVXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpXG5jb25zdCBDb25uZWN0ID0gcmVxdWlyZSgnLi9jb25uZWN0JylcbmNvbnN0IGV4YyA9IHJlcXVpcmUoJy4vZXhjZXB0aW9uJylcblxuY2xhc3MgTXQge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgYXV0aCkge1xuICAgICAgICB0aGlzLl9hdXRoID0gYXV0aFxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWdcbiAgICAgICAgdGhpcy5fdXJsID0gVXRpbC5nZXRSZWNhaXVzVXJsKGNvbmZpZy51cmwsIGNvbmZpZy52ZXJzaW9uLCAnbXQnKVxuICAgIH1cblxuICAgIHRyYW5zbGF0ZShwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zbGF0ZShwYXJhbXMpXG4gICAgfVxuXG4gICAgYXJyYW5nZShwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FycmFuZ2UocGFyYW1zKVxuICAgIH1cblxuICAgIF90cmFuc2xhdGUocGFyYW1zKSB7XG5cbiAgICAgICAgaWYoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgncXVlcnknKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3F1ZXJ5JykpXG4gICAgICAgIGlmKCFwYXJhbXMuaGFzT3duUHJvcGVydHkoJ3NyY19sYW5nJykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCdzcmNfbGFuZycpKVxuICAgICAgICBpZighcGFyYW1zLmhhc093blByb3BlcnR5KCd0Z3RfbGFuZycpKSBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5SZXF1aXJlQXJndW1lbnRFcnJvcigndGd0X2xhbmcnKSlcbiAgICAgICAgLy8gb3B0aW9uYWxzXG4gICAgICAgIHBhcmFtcy5tb2RlID0gcGFyYW1zLm1vZGUgfHwgJ3Nwb2tlbl9sYW5ndWFnZSdcblxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdEpzb24oJ3RyYW5zbGF0ZScsIHBhcmFtcylcbiAgICB9XG5cbiAgICBfYXJyYW5nZShwYXJhbXMpIHtcbiAgICAgICAgbGV0IHNyY19sYW5nID0gcGFyYW1zLnNyY19sYW5nIHx8IFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCdzcmNfbGFuZycpKVxuICAgICAgICBsZXQgcXVlcnkgPSBwYXJhbXMucXVlcnkgfHwgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3F1ZXJ5JykpXG4gICAgICAgIGxldCBzZW5kUGFyYW1zID0ge3NyY19sYW5nOiBzcmNfbGFuZywgcXVlcnk6IHF1ZXJ5fVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0SnNvbignYXJyYW5nZScsIHNlbmRQYXJhbXMpXG4gICAgfVxuXG4gICAgX3JlcXVlc3RKc29uKG5hbWUsIHBhcmFtcykge1xuICAgICAgICBsZXQgdXJsID0gVXRpbC51cmxKb2luKHRoaXMuX3VybCwgbmFtZSlcbiAgICAgICAgcmV0dXJuIENvbm5lY3QucmVxdWVzdEpzb24odXJsLCAnUE9TVCcsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICdYLVRva2VuJzogdGhpcy5fYXV0aC50b2tlbigpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXJhbXMpLFxuICAgICAgICAgICAgICAgIHByb3h5OiB0aGlzLl9jb25maWcucHJveHlcbiAgICAgICAgICAgIH0pXG4gICAgfVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gTXRcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2xpYi9tdC5qcyIsIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBVdGlsID0gcmVxdWlyZSgnLi91dGlsJylcbmNvbnN0IENvbm5lY3QgPSByZXF1aXJlKCcuL2Nvbm5lY3QnKVxuY29uc3QgZXhjID0gcmVxdWlyZSgnLi9leGNlcHRpb24nKVxuXG5jbGFzcyBJaXAge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgYXV0aCkge1xuICAgICAgICB0aGlzLl9hdXRoID0gYXV0aFxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWdcbiAgICAgICAgdGhpcy5fdXJsID0gVXRpbC5nZXRSZWNhaXVzVXJsKGNvbmZpZy51cmwsIGNvbmZpZy52ZXJzaW9uLCAnaWlwJylcbiAgICB9XG5cbiAgICBhZGREYXRhYmFzZSh1c2VyLCBuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdkYXRhYmFzZXMnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXIgfSxcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIGRibmFtZTogbmFtZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBnZXREYXRhYmFzZXModXNlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnZGF0YWJhc2VzJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXIgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGRlbGV0ZURhdGFiYXNlKHVzZXIsIGRiaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYGRhdGFiYXNlcy8ke2RiaWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXIgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldERhdGFiYXNlUHJvcGVydHkodXNlciwgZGJpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgZGF0YWJhc2VzLyR7ZGJpZH0vcHJvcGVydGllc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB1cGRhdGVWb2NhYnVsYXJ5KHVzZXIsIGRiaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYGRhdGFiYXNlcy8ke2RiaWR9L2RpY3Rpb25hcmllc2AsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcnMnOiB1c2VyfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldERhdGFiYXNlS2V5d29yZHModXNlciwgZGJpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgZGF0YWJhc2VzLyR7ZGJpZH0va2V5d29yZHNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnWC1Vc2VyJzogdXNlcn1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBhZGREb2N1bWVudCh1c2VyLCBkYmlkLCBwYXJhbXMpIHtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7fVxuICAgICAgICBpZighVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICduYW1lJykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCduYW1lJykpXG5cbiAgICAgICAgVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICd0ZXh0JylcbiAgICAgICAgVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICdmaWxlJylcblxuICAgICAgICBpZihvcHRpb25zLmhhc093blByb3BlcnR5KCdmaWxlJykpIHtcbiAgICAgICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnZmlsZW5hbWUnKVxuICAgICAgICB9IGVsc2UgaWYoIW9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3RleHQnKSkge1xuICAgICAgICAgICAgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3RleHQgb3IgZmlsZScpKVxuICAgICAgICB9XG5cbiAgICAgICAgVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICdsZW5ndGgnKVxuICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ3RhZ3MnKVxuICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ3VyaScpXG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYGRhdGFiYXNlcy8ke2RiaWR9YCwge1xuICAgICAgICAgICAgaGVhZGVyczogeyAnWC1Vc2VyJzogdXNlciB9LFxuICAgICAgICAgICAgZm9ybURhdGE6IG9wdGlvbnNcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmaW5kRG9jdW1lbnQodXNlciwgZGJpZCwgcGFyYW1zKSB7XG4gICAgICAgIGxldCBvcHRpb25zID0ge31cbiAgICAgICAgaWYoIVV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAncXVlcnknKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3F1ZXJ5JykpXG4gICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAndHlwZScpXG4gICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnY291bnQnKVxuICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ2xlbmd0aCcpXG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYGRhdGFiYXNlcy8ke2RiaWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXIgfSxcbiAgICAgICAgICAgIHBhcmFtczogb3B0aW9uc1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldERvY3VtZW50UHJvcGVydHkodXNlciwgZGJpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgZGF0YWJhc2VzLyR7ZGJpZH0vcHJvcGVydGllc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGRlbGV0ZURvY3VtZW50KHVzZXIsIGRiaWQsIGRvY2lkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGBkYXRhYmFzZXMvJHtkYmlkfS8ke2RvY2lkfS9gLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnWC1Vc2VyJzogdXNlcn1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB1cGRhdGVEb2N1bWVudFByb3BlcnR5KHVzZXIsIGRiaWQsIGRvY2lkLCBwYXJhbXMpIHtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7fVxuICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ25hbWUnKVxuICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ3RhZ3MnKVxuICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ3VyaScpXG4gICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnbGVuZ3RoJylcblxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgZGF0YWJhc2VzLyR7ZGJpZH0vJHtkb2NpZH0vcHJvcGVydGllc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyfSxcbiAgICAgICAgICAgIHBhcmFtczogb3B0aW9uc1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldERvY3VtZW50KHVzZXIsIGRiaWQsIGRvY2lkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGBkYXRhYmFzZXMvJHtkYmlkfS8ke2RvY2lkfS9maWxlYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXJ9XG4gICAgICAgIH0sIGZhbHNlKVxuICAgIH1cblxuICAgIGV4dHJhY3REYXRhYmFzZUtleXdvcmQodXNlciwgZGJpZCwgcGFyYW1zKSB7XG4gICAgICAgIGxldCBvcHRpb25zID0ge31cbiAgICAgICAgaWYoIVV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAndGV4dCcpKSBVdGlsLnRocm93RXJyb3IobmV3IGV4Yy5SZXF1aXJlQXJndW1lbnRFcnJvcignbmFtZScpKVxuICAgICAgICBVdGlsLmNvcHlJdGVtSWZQcmVzZW50KHBhcmFtcywgb3B0aW9ucywgJ2NvdW50JylcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYGRhdGFiYXNlcy8ke2RiaWR9L3NlYXJjaF93b3Jkc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdYLVVzZXInOiB1c2VyfSxcbiAgICAgICAgICAgIHBhcmFtczogb3B0aW9uc1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldERvY3VtZW50S2V5d29yZHModXNlciwgZGJpZCwgcGFyYW1zKSB7XG4gICAgICAgIGxldCBvcHRpb25zID0ge31cbiAgICAgICAgaWYoIVV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnZG9jaWRzJykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCdkb2NpZHMnKSlcbiAgICAgICAgVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICdjb3VudCcpXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvZGF0YWJhc2VzLyR7ZGJpZH0vZG9jdW1lbnRzL3NwZWNpZmljX3dvcmRzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXJ9LFxuICAgICAgICAgICAgcGFyYW1zOiBvcHRpb25zXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdG9rZW5pemVUZXh0KHVzZXIsIHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYC90ZXh0cy90b2tlbnNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnWC1Vc2VyJzogdXNlcn0sXG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0VGV4dEltcG9ydGFuY2UodXNlciwgcGFyYW1zKSB7XG4gICAgICAgIGxldCBvcHRpb25zID0ge31cbiAgICAgICAgVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICd0ZXh0JylcbiAgICAgICAgVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICdzZW50ZW5jZXMnKVxuICAgICAgICBpZighb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgndGV4dCcpICYmICFvcHRpb25zLmhhc093blByb3BlcnR5KCdzZW50ZW5jZXMnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3RleHQgb3Igc2VudGVuY2VzJykpXG4gICAgICAgIGlmKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3RleHQnKSAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KCdzZW50ZW5jZXMnKSkgVXRpbC50aHJvd0Vycm9yKG5ldyBleGMuUmVxdWlyZUFyZ3VtZW50RXJyb3IoJ3NldCBqdXN0IG9uZSBwYXJhbWV0ZXI6IHRleHQgb3Igc2VudGVuY2VzJykpXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvdGV4dHMvcmFua3NgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnWC1Vc2VyJzogdXNlcn0sXG4gICAgICAgICAgICBwYXJhbXM6IG9wdGlvbnNcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBleHRyYWN0S2V5d29yZCh1c2VyLCBwYXJhbXMpIHtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7fVxuICAgICAgICBpZighVXRpbC5jb3B5SXRlbUlmUHJlc2VudChwYXJhbXMsIG9wdGlvbnMsICd0ZXh0JykpIFV0aWwudGhyb3dFcnJvcihuZXcgZXhjLlJlcXVpcmVBcmd1bWVudEVycm9yKCd0ZXh0JykpXG4gICAgICAgIFV0aWwuY29weUl0ZW1JZlByZXNlbnQocGFyYW1zLCBvcHRpb25zLCAnY291bnQnKVxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgL3RleHRzL2tleXdvcmRzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtVXNlcic6IHVzZXIgfSxcbiAgICAgICAgICAgIHBhcmFtczogb3B0aW9uc1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIF9yZXF1ZXN0KG5hbWUsIG9wdGlvbnMsIHJldHVybkpzb249dHJ1ZSkge1xuICAgICAgICBsZXQgdXJsID0gVXRpbC51cmxKb2luKHRoaXMuX3VybCwgbmFtZSlcbiAgICAgICAgbGV0IHNlbmRPcHRpb25zID0ge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ1gtVG9rZW4nOiB0aGlzLl9hdXRoLnRva2VuKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm94eTogdGhpcy5fY29uZmlnLnByb3h5XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1ldGhvZCA9IG9wdGlvbnMubWV0aG9kIHx8ICdQT1NUJ1xuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgncGFyYW1zJykpIHtcbiAgICAgICAgICAgIGlmKG1ldGhvZCA9PSAnUE9TVCcgfHwgbWV0aG9kID09ICdQVVQnKSB7XG4gICAgICAgICAgICAgICAgc2VuZE9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMucGFyYW1zKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZW5kT3B0aW9ucy5xcyA9IG9wdGlvbnMucGFyYW1zXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZihvcHRpb25zLmhhc093blByb3BlcnR5KCdmb3JtRGF0YScpKSB7XG4gICAgICAgICAgICBzZW5kT3B0aW9ucy5mb3JtRGF0YSA9IG9wdGlvbnMuZm9ybURhdGFcbiAgICAgICAgICAgIHNlbmRPcHRpb25zLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ211bHRpcGFydC9mb3JtLWRhdGEnXG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaGVhZGVycycpKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zLmhlYWRlcnMpLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICAgICAgc2VuZE9wdGlvbnMuaGVhZGVyc1t4XSA9IG9wdGlvbnMuaGVhZGVyc1t4XVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHJldHVybkpzb24pIHtcbiAgICAgICAgICAgIHJldHVybiBDb25uZWN0LnJlcXVlc3RKc29uKHVybCwgbWV0aG9kLCBzZW5kT3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gQ29ubmVjdC5yZXF1ZXN0UmF3KHVybCwgbWV0aG9kLCBzZW5kT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBJaXBcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2xpYi9paXAuanMiLCJjbGFzcyBNaWNyb3Bob25lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IDBcbiAgICAgIHRoaXMuY29udGV4dF8gPSBudWxsXG4gICAgICB0aGlzLnNvdXJjZV8gPSBudWxsXG4gICAgICB0aGlzLnNjcmlwdFByb2Nlc3Nvcl8gPSBudWxsXG4gICAgfVxuXG4gICAgc2V0TWVkaWFfKCkge1xuICAgICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tc0dldFVzZXJNZWRpYTtcbiAgICAgIHdpbmRvdy5BdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHRcbiAgICB9XG5cbiAgICBzdG9wKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGV4dF8uc3VzcGVuZCgpXG4gICAgfVxuXG4gICAgc3RhcnQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0Xy5yZXN1bWUoKVxuICAgIH1cblxuICAgIHNhbXBsZVJhdGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0Xy5zYW1wbGVSYXRlXG4gICAgfVxuXG4gICAgZ2V0TWljKCkge1xuICAgICAgdGhpcy5zZXRNZWRpYV8oKVxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJubyBtZWRpYVwiKVxuICAgICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKFwiWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgbWVkaWEgQVBJXCIpKVxuICAgICAgICB9XG4gICAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEoe1xuICAgICAgICAgICAgdmlkZW86IGZhbHNlLFxuICAgICAgICAgICAgYXVkaW86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0cmVhbSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgZ290IGF1ZGlvYClcbiAgICAgICAgICAgIHRoaXMuY29udGV4dF8gPSBuZXcgQXVkaW9Db250ZXh0KCk7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZV8gPSB0aGlzLmNvbnRleHRfLmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHN0cmVhbSk7XG4gICAgICAgICAgICB0aGlzLnNjcmlwdFByb2Nlc3Nvcl8gPSB0aGlzLmNvbnRleHRfLmNyZWF0ZVNjcmlwdFByb2Nlc3Nvcih0aGlzLmJ1ZmZlclNpemUsIDEsIDEpO1xuICAgICAgICAgICAgdGhpcy5zY3JpcHRQcm9jZXNzb3JfLm9uYXVkaW9wcm9jZXNzID0gZXZlbnQgPT4gdGhpcy5wcm9jZXNzSW5wdXRfKGV2ZW50KVxuICAgICAgICAgICAgdGhpcy5zb3VyY2VfLmNvbm5lY3QodGhpcy5zY3JpcHRQcm9jZXNzb3JfKVxuICAgICAgICAgICAgdGhpcy5zY3JpcHRQcm9jZXNzb3JfLmNvbm5lY3QodGhpcy5jb250ZXh0Xy5kZXN0aW5hdGlvbilcbiAgICAgICAgICAgIHRoaXMuY29udGV4dF8uc3VzcGVuZCgpXG4gICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVyciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdldCBtaWM6IHRoZSBmb2xsb3dpbmcgZXJyb3Igb2NjdXJlZDogXCIgKyBlcnIpO1xuICAgICAgICAgICAgcmVqZWN0KGVycilcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgb25JbnB1dChidWZmZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiY2FsbCBvbklucHV0XCIpXG4gICAgfVxuXG4gICAgcHJvY2Vzc0lucHV0XyhldmVudCkge1xuICAgICAgdGhpcy5vbklucHV0KGV2ZW50LmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKDApKVxuICAgIH1cbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBnZXRNaWMoKSB7XG4gICAgbGV0IG1pYyA9IG5ldyBNaWNyb3Bob25lO1xuICAgIHJldHVybiBtaWMuZ2V0TWljKCkudGhlbigoKSA9PiBtaWMpO1xuICB9XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9saWIvbWljLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==